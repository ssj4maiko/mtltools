"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[314],{314:(F,d,s)=>{s.d(d,{n:()=>D});var t=s(6738),g=s(6845),u=s(1457),a=s(6895);const f=function(){return["/novel/add"]};function m(i,o){1&i&&(t.TgZ(0,"div",17)(1,"div",18)(2,"a",19),t._uU(3,"Add Novel"),t.qZA()()()),2&i&&(t.xp6(2),t.Q6J("routerLink",t.DdM(1,f)))}function C(i,o){1&i&&t.GkF(0)}function h(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().sort("id","-")}),t.qZA()}}function x(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().sort("id","+")}),t.qZA()}}function Z(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().sort("name","-")}),t.qZA()}}function T(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().sort("name","+")}),t.qZA()}}function k(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().sort("nameJP","-")}),t.qZA()}}function A(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().sort("nameJP","+")}),t.qZA()}}function L(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().sort("chapters","-")}),t.qZA()}}function J(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().sort("chapters","+")}),t.qZA()}}function q(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().sort("driver","-")}),t.qZA()}}function b(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().sort("driver","+")}),t.qZA()}}function O(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().sort("added","-")}),t.qZA()}}function v(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().sort("added","+")}),t.qZA()}}function y(i,o){1&i&&t._UZ(0,"i",39)}function M(i,o){1&i&&t._UZ(0,"i",40)}function S(i,o){1&i&&t._UZ(0,"i",41)}function N(i,o){1&i&&t._UZ(0,"i",42)}const P=function(i){return{disabled:i}},_=function(i){return["/novel/",i]},w=function(i){return["/novel/dictionary",i]},I=function(i){return["/novel/edit",i]};function Q(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"tr",25)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",26),t._uU(4),t.qZA(),t.TgZ(5,"td",26),t._uU(6),t.qZA(),t.TgZ(7,"td",26),t._uU(8),t.qZA(),t.TgZ(9,"td",26),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",27),t.YNc(14,y,1,0,"i",28),t.YNc(15,M,1,0,"i",29),t.YNc(16,S,1,0,"i",30),t.YNc(17,N,1,0,"i",31),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td")(21,"a",32),t._UZ(22,"i",33),t.qZA(),t.TgZ(23,"a",26),t._UZ(24,"i",34),t.qZA(),t.TgZ(25,"a",35),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw().updateChapters(r.id)}),t._UZ(26,"i",36),t.qZA(),t.TgZ(27,"a",26),t._UZ(28,"i",37),t.qZA(),t.TgZ(29,"a",35),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw().delete(r.id)}),t._UZ(30,"i",38),t.qZA()()()}if(2&i){const e=t.oxw().$implicit,n=t.oxw();t.s9C("title",e.nameOriginal),t.Q6J("ngClass",t.VKq(20,P,n.updating[e.id])),t.xp6(2),t.Oqu(e.id),t.xp6(1),t.Q6J("routerLink",t.VKq(22,_,e.id)),t.xp6(1),t.Oqu(e.code),t.xp6(1),t.Q6J("routerLink",t.VKq(24,_,e.id)),t.xp6(1),t.Oqu(e.nameCustom),t.xp6(1),t.Q6J("routerLink",t.VKq(26,_,e.id)),t.xp6(1),t.Oqu(e.nameOriginal),t.xp6(1),t.Q6J("routerLink",t.VKq(28,_,e.id)),t.xp6(1),t.Oqu(e.numberChapters),t.xp6(2),t.Oqu(e.driver),t.xp6(2),t.Q6J("ngIf",e.completed),t.xp6(1),t.Q6J("ngIf",!e.completed),t.xp6(1),t.Q6J("ngIf",e.flagR18),t.xp6(1),t.Q6J("ngIf",!e.flagR18),t.xp6(2),t.Oqu(e.addedBy),t.xp6(2),t.s9C("href",e.urlSource,t.LSH),t.xp6(2),t.Q6J("routerLink",t.VKq(30,w,e.id)),t.xp6(4),t.Q6J("routerLink",t.VKq(32,I,e.id))}}function U(i,o){if(1&i&&(t.ynx(0),t.YNc(1,Q,31,34,"tr",24),t.BQk()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.show)}}function E(i,o){1&i&&(t.TgZ(0,"a",43)(1,"span",44),t._UZ(2,"i",45),t.qZA()())}function Y(i,o){1&i&&(t.TgZ(0,"a",46)(1,"span",44),t._UZ(2,"i",47),t.qZA()())}const c=function(i){return{orderedBy:i}};let D=(()=>{class i{constructor(e){this.api=e,this.novels=[],this.sortingAlg={idAsc:(n,r)=>n.id>r.id,nameAsc:(n,r)=>n.nameCustom>r.nameCustom,nameJPAsc:(n,r)=>n.nameOriginal>r.nameOriginal,chaptersAsc:(n,r)=>n.numberChapters>r.numberChapters,driverAsc:(n,r)=>n.driver>r.driver,addedAsc:(n,r)=>n.addedBy>r.addedBy,idDesc:(n,r)=>n.id<r.id,nameDesc:(n,r)=>n.nameCustom<r.nameCustom,nameJPDesc:(n,r)=>n.nameOriginal<r.nameOriginal,chaptersDesc:(n,r)=>n.numberChapters<r.numberChapters,driverDesc:(n,r)=>n.driver<r.driver,addedDesc:(n,r)=>n.addedBy<r.addedBy},this.currentSort={by:"id",dir:"+"},this.updating=[]}ngOnInit(){this.loadList()}loadList(){this.api.Novel.getAll().then(e=>{this.novels=Object.values(e),this.sort(this.currentSort.by,this.currentSort.dir)},e=>{console.log(e)})}sort(e,n){this.currentSort.by=e,this.currentSort.dir=n,this.novels.sort(this.sortingAlg[this.currentSort.by+("+"==n?"Asc":"Desc")])}updateChapters(e){this.updating[e]=!0,this.api.Chapter.autoUpdate({idNovel:e}).then(n=>{console.log("Novel updated",n),delete this.updating[e],this.api.Novel.get({id:e}).then(r=>{let l=!1;for(const p in this.novels)if(this.novels[p].id===r.id){this.novels[p]=r,l=!0;break}l||console.log("The novel was not found on the list? Impossible...")})},n=>{delete this.updating[e],alert("There was an error on updating, likely due to Timeout.\n\nThe backend may still be working, so you will have to refresh the page to see if it's still updatingIf it has stopped and/or it's taking too long, report it to the developer along with the novel, as it will be necessary to reproduce the error."),console.log(n)})}delete(e){confirm("Are you sure?")&&this.api.Novel.delete({id:e}).then(n=>{console.log(n),this.loadList()},n=>{console.log(n)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(g.s))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-novel-list"]],decls:43,vars:32,consts:[["actionButtons",""],[4,"ngTemplateOutlet"],[1,"table","is-striped","is-hoverable","is-fullwidth"],[2,"width","65px",3,"ngClass"],["class","fas fa-sort-numeric-down",3,"click",4,"ngIf"],["class","fas fa-sort-numeric-up",3,"click",4,"ngIf"],[3,"ngClass"],["class","fas fa-sort-alpha-down",3,"click",4,"ngIf"],["class","fas fa-sort-alpha-up",3,"click",4,"ngIf"],[2,"width","120px",3,"ngClass"],[2,"text-align","center","width","100px",3,"ngClass"],[2,"width","76px"],[2,"width","125px",3,"ngClass"],[2,"text-align","center","width","160px"],[4,"ngFor","ngForOf"],["success",""],["danger",""],[1,"columns","actionButtons"],[1,"column"],[1,"button","is-info",3,"routerLink"],[1,"fas","fa-sort-numeric-down",3,"click"],[1,"fas","fa-sort-numeric-up",3,"click"],[1,"fas","fa-sort-alpha-down",3,"click"],[1,"fas","fa-sort-alpha-up",3,"click"],[3,"title","ngClass",4,"ngIf"],[3,"title","ngClass"],[3,"routerLink"],[1,"status"],["class","fas fa-envelope has-text-success","title","Complete",4,"ngIf"],["class","fas fa-envelope-open-text has-text-info","title","Still going",4,"ngIf"],["class","fas fa-user-secret has-text-danger","title","R18",4,"ngIf"],["class","fas fa-user-secret has-text-grey-lighter","title","Everyone",4,"ngIf"],["target","_blank",3,"href"],["title","Source",1,"has-text-info","fas","fa-external-link-alt"],["title","Dictionaries",1,"fas","fa-book-open"],[3,"click"],["title","Update Chapters",1,"has-text-info","fas","fa-sync"],["title","Edit",1,"has-text-success","fas","fa-edit"],["title","Delete",1,"has-text-danger","fas","fa-trash"],["title","Complete",1,"fas","fa-envelope","has-text-success"],["title","Still going",1,"fas","fa-envelope-open-text","has-text-info"],["title","R18",1,"fas","fa-user-secret","has-text-danger"],["title","Everyone",1,"fas","fa-user-secret","has-text-grey-lighter"],[1,"button","is-success"],[1,"icon","is-small"],[1,"fas","fa-check"],[1,"button","is-danger"],[1,"fas","fa-times"]],template:function(e,n){if(1&e&&(t.YNc(0,m,4,2,"ng-template",null,0,t.W1O),t.TgZ(2,"div"),t.YNc(3,C,1,0,"ng-container",1),t.TgZ(4,"table",2)(5,"thead")(6,"tr")(7,"th",3),t._uU(8," ID "),t.YNc(9,h,1,0,"i",4),t.YNc(10,x,1,0,"i",5),t.qZA(),t.TgZ(11,"th"),t._uU(12," Code "),t.qZA(),t.TgZ(13,"th",6),t._uU(14," Name "),t.YNc(15,Z,1,0,"i",7),t.YNc(16,T,1,0,"i",8),t.qZA(),t.TgZ(17,"th",6),t._uU(18," Name Japanese "),t.YNc(19,k,1,0,"i",7),t.YNc(20,A,1,0,"i",8),t.qZA(),t.TgZ(21,"th",9),t._uU(22," Chapters "),t.YNc(23,L,1,0,"i",4),t.YNc(24,J,1,0,"i",5),t.qZA(),t.TgZ(25,"th",10),t._uU(26," Driver "),t.YNc(27,q,1,0,"i",7),t.YNc(28,b,1,0,"i",8),t.qZA(),t.TgZ(29,"th",11),t._uU(30," Status "),t.qZA(),t.TgZ(31,"th",12),t._uU(32," Added By "),t.YNc(33,O,1,0,"i",7),t.YNc(34,v,1,0,"i",8),t.qZA(),t.TgZ(35,"th",13),t._uU(36," Actions "),t.qZA()()(),t.TgZ(37,"tbody"),t.YNc(38,U,2,1,"ng-container",14),t.YNc(39,E,3,0,"ng-template",null,15,t.W1O),t.YNc(41,Y,3,0,"ng-template",null,16,t.W1O),t.qZA()()()),2&e){const r=t.MAs(1);t.xp6(3),t.Q6J("ngTemplateOutlet",r),t.xp6(4),t.Q6J("ngClass",t.VKq(20,c,"id"==n.currentSort.by)),t.xp6(2),t.Q6J("ngIf","id"!=n.currentSort.by||"-"!=n.currentSort.dir),t.xp6(1),t.Q6J("ngIf","id"==n.currentSort.by&&"-"==n.currentSort.dir),t.xp6(3),t.Q6J("ngClass",t.VKq(22,c,"name"==n.currentSort.by)),t.xp6(2),t.Q6J("ngIf","name"!=n.currentSort.by||"-"!=n.currentSort.dir),t.xp6(1),t.Q6J("ngIf","name"==n.currentSort.by&&"-"==n.currentSort.dir),t.xp6(1),t.Q6J("ngClass",t.VKq(24,c,"nameJP"==n.currentSort.by)),t.xp6(2),t.Q6J("ngIf","nameJP"!=n.currentSort.by||"-"!=n.currentSort.dir),t.xp6(1),t.Q6J("ngIf","nameJP"==n.currentSort.by&&"-"==n.currentSort.dir),t.xp6(1),t.Q6J("ngClass",t.VKq(26,c,"chapters"==n.currentSort.by)),t.xp6(2),t.Q6J("ngIf","chapters"!=n.currentSort.by||"-"!=n.currentSort.dir),t.xp6(1),t.Q6J("ngIf","chapters"==n.currentSort.by&&"-"==n.currentSort.dir),t.xp6(1),t.Q6J("ngClass",t.VKq(28,c,"driver"==n.currentSort.by)),t.xp6(2),t.Q6J("ngIf","driver"!=n.currentSort.by||"-"!=n.currentSort.dir),t.xp6(1),t.Q6J("ngIf","driver"==n.currentSort.by&&"-"==n.currentSort.dir),t.xp6(3),t.Q6J("ngClass",t.VKq(30,c,"added"==n.currentSort.by)),t.xp6(2),t.Q6J("ngIf","added"!=n.currentSort.by||"-"!=n.currentSort.dir),t.xp6(1),t.Q6J("ngIf","added"==n.currentSort.by&&"-"==n.currentSort.dir),t.xp6(4),t.Q6J("ngForOf",n.novels)}},directives:[u.yS,a.tP,a.mk,a.O5,a.sg,u.rH],styles:[".table[_ngcontent-%COMP%]   .orderedBy[_ngcontent-%COMP%]{color:#fff;background-color:#ffffff4d}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{display:block;float:right}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5), .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6), .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8){text-align:center}.table[_ngcontent-%COMP%]   tr.disabled[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{background-color:#007c1080}.table[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{margin:3px;font-size:20px;vertical-align:super;cursor:pointer}.columns[_ngcontent-%COMP%]{margin:5px}.actionButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center;width:100%}"]}),i})()}}]);