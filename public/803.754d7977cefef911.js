"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[803],{2803:(W,f,a)=>{a.r(f),a.d(f,{NovelModule:()=>P});var c=a(6895),p=a(4793),t=a(4650),m=a(6845);const h=function(){return["/novel/add"]};function v(n,o){1&n&&(t.TgZ(0,"div",6)(1,"div",7)(2,"a",8),t._uU(3,"Add Novel"),t.qZA()()()),2&n&&(t.xp6(2),t.Q6J("routerLink",t.DdM(1,h)))}function x(n,o){1&n&&t.GkF(0)}function Z(n,o){1&n&&t.GkF(0)}function C(n,o){1&n&&t.GkF(0)}const u=function(n){return["/novel/",n]},T=function(n){return["/novel/dictionary",n]},A=function(n){return["/novel/edit",n]};function N(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr",10)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",11),t._uU(4),t.qZA(),t.TgZ(5,"td",11),t._uU(6),t.qZA(),t.TgZ(7,"td",11),t._uU(8),t.qZA(),t.TgZ(9,"td",11),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t.YNc(14,Z,1,0,"ng-container",12),t.qZA(),t.TgZ(15,"td"),t.YNc(16,C,1,0,"ng-container",12),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td",11)(20,"a"),t._uU(21,"Check"),t.qZA()(),t.TgZ(22,"td",13),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit;return t.oxw().updateChapters(l.id)}),t.TgZ(23,"a"),t._uU(24,"Update"),t.qZA()(),t.TgZ(25,"td")(26,"a",11),t._UZ(27,"i",14),t.qZA(),t._uU(28," / "),t.TgZ(29,"a",13),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit;return t.oxw().delete(l.id)}),t._UZ(30,"i",15),t.qZA()()()}if(2&n){const e=t.oxw().$implicit;t.oxw();const i=t.MAs(34),l=t.MAs(36);t.s9C("title",e.nameOriginal),t.xp6(2),t.Oqu(e.id),t.xp6(1),t.Q6J("routerLink",t.VKq(20,u,e.id)),t.xp6(1),t.Oqu(e.code),t.xp6(1),t.Q6J("routerLink",t.VKq(22,u,e.id)),t.xp6(1),t.Oqu(e.nameCustom),t.xp6(1),t.Q6J("routerLink",t.VKq(24,u,e.id)),t.xp6(1),t.Oqu(e.nameOriginal),t.xp6(1),t.Q6J("routerLink",t.VKq(26,u,e.id)),t.xp6(1),t.Oqu(e.numberChapters),t.xp6(2),t.Oqu(e.driver),t.xp6(2),t.Q6J("ngIf",1==e.completed)("ngIfThen",i)("ngIfElse",l),t.xp6(2),t.Q6J("ngIf",1==e.flagR18)("ngIfThen",i)("ngIfElse",l),t.xp6(2),t.Oqu(e.addedBy),t.xp6(1),t.Q6J("routerLink",t.VKq(28,T,e.id)),t.xp6(7),t.Q6J("routerLink",t.VKq(30,A,e.id))}}function b(n,o){if(1&n&&(t.ynx(0),t.YNc(1,N,31,32,"tr",9),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.show)}}function q(n,o){1&n&&(t.TgZ(0,"a",16)(1,"span",17),t._UZ(2,"i",18),t.qZA()())}function y(n,o){1&n&&(t.TgZ(0,"a",19)(1,"span",17),t._UZ(2,"i",20),t.qZA()())}let F=(()=>{class n{constructor(e){this.api=e,this.novels=[]}ngOnInit(){this.loadList()}loadList(){this.api.Novel.getAll().then(e=>{this.novels=Object.values(e)},e=>{console.log(e)})}updateChapters(e){this.api.Chapter.autoUpdate({idNovel:e}).then(i=>{console.log("Novel updated",i),this.api.Novel.get({id:e}).then(l=>{let s=!1;for(const d in this.novels)if(this.novels[d].id===l.id){this.novels[d]=l,s=!0;break}s||console.log("The novel was not found on the list? Impossible...")})},i=>{console.log(i)})}delete(e){confirm("Are you sure?")&&this.api.Novel.delete({id:e}).then(i=>{console.log(i),this.loadList()},i=>{console.log(i)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-novel-list"]],decls:37,vars:2,consts:[["actionButtons",""],[4,"ngTemplateOutlet"],[1,"table","is-striped","is-hoverable","is-fullwidth"],[4,"ngFor","ngForOf"],["success",""],["danger",""],[1,"columns","actionButtons"],[1,"column"],[1,"button","is-info",3,"routerLink"],[3,"title",4,"ngIf"],[3,"title"],[3,"routerLink"],[4,"ngIf","ngIfThen","ngIfElse"],[3,"click"],[1,"fas","fa-edit"],[1,"fas","fa-trash"],[1,"button","is-success"],[1,"icon","is-small"],[1,"fas","fa-check"],[1,"button","is-danger"],[1,"fas","fa-times"]],template:function(e,i){if(1&e&&(t.YNc(0,v,4,2,"ng-template",null,0,t.W1O),t.YNc(2,x,1,0,"ng-container",1),t.TgZ(3,"div")(4,"table",2)(5,"thead")(6,"tr")(7,"th"),t._uU(8,"ID"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Code"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Name"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Name Japanese"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Chapters"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Driver"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Completed"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"R18"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Added By"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Dictionary"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Update Chapters"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Actions"),t.qZA()()(),t.TgZ(31,"tbody"),t.YNc(32,b,2,1,"ng-container",3),t.YNc(33,q,3,0,"ng-template",null,4,t.W1O),t.YNc(35,y,3,0,"ng-template",null,5,t.W1O),t.qZA()()()),2&e){const l=t.MAs(1);t.xp6(2),t.Q6J("ngTemplateOutlet",l),t.xp6(30),t.Q6J("ngForOf",i.novels)}},directives:[p.yS,c.tP,c.sg,c.O5,p.rH],styles:[".actionButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center;width:100%}"]}),n})();var r=a(4006),g=a(4868);class O{constructor(o){Object.assign(this,o)}}let _=(()=>{class n{constructor(e){this.formBuilder=e,this.selectDictionaries=[],this.selectDrivers=[],this.indexes=[],this.formGroup=e.group({id:[null],code:[null],nameOriginal:[null],nameCustom:[null],addedBy:[null],dictionary:[null],driver:[null],flagR18:[null],completed:[null],show:[null]})}loadMeta(e,i){this.selectDrivers=[];for(const l of Object.keys(e.drivers))this.selectDrivers.push(new g.Wx(l,e.drivers[l]));this.selectDictionaries=[];for(const l of Object.keys(i))this.selectDictionaries.push(new g.Wx(l+"",i[l].name,!1))}addForm(e,i,l,s){this.indexes.push(e),this.form.push(new g.Wi(e,i,l,s))}getForm(e){this.form=[],e&&this.addForm("id","","hidden"),this.addForm("code","Syosetsu code","text"),this.addForm("nameOriginal","Original Name","text"),this.addForm("nameCustom","Translated Name","text"),e&&this.addForm("addedBy","Added by","text"),this.addForm("dictionary","Dictionaries","multiselect",this.selectDictionaries),this.addForm("driver","Driver","select",this.selectDrivers),this.addForm("flagR18","R18?","checkbox"),this.addForm("completed","Completed?","checkbox"),this.addForm("show","Show on list?","checkbox")}setValues(e,i){const l=i.map(d=>d.id+""),s=new r.Oe(this.selectDictionaries.map(d=>(l.includes(d.value)&&d.setChecked(!0),d.control)));this.formGroup.setValue({id:e.id,code:e.code,nameOriginal:e.nameOriginal,nameCustom:e.nameCustom,addedBy:e.addedBy,dictionary:s,driver:e.driver,flagR18:e.flagR18,completed:e.completed,show:e.show})}getValues(e){const i={novel:null,dictionaries:null};i.novel=new O(this.formGroup.value),delete i.novel.dictionary;const l=this.indexes.indexOf("dictionary");if(i.dictionaries=this.form[l].getValues().map(s=>parseInt(s,10)),e&&e.length===i.dictionaries.length){const s=e.map(d=>d.id);JSON.stringify(s)===JSON.stringify(i.dictionaries)&&delete i.dictionaries}return i}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(r.qu))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function k(n,o){if(1&n&&(t.ynx(0,null,12),t._UZ(2,"input",13),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.s9C("formControlName",e.name)}}function U(n,o){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label",15),t._UZ(3,"input",16),t._uU(4),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.s9C("formControlName",e.name),t.xp6(1),t.hij(" ",e.label," ")}}function J(n,o){if(1&n&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.label)}}function w(n,o){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"div",5)(5,"select",17),t.YNc(6,J,2,2,"option",18),t.qZA()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.label),t.xp6(2),t.s9C("formControlName",e.name),t.xp6(1),t.Q6J("ngForOf",e.options)}}function Q(n,o){if(1&n&&(t.TgZ(0,"p")(1,"label"),t._UZ(2,"input",21),t._uU(3),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Q6J("formControl",e.control),t.xp6(1),t.hij(" ",e.label," ")}}function Y(n,o){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t.YNc(5,Q,4,2,"p",20),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.AsE("",e.label," - ",e.name,""),t.xp6(2),t.Q6J("ngForOf",e.options)}}function S(n,o){if(1&n&&(t.ynx(0,null,22),t.TgZ(2,"label",23),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t._UZ(5,"input",24),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.s9C("for",e.name),t.xp6(1),t.Oqu(e.label),t.xp6(2),t.s9C("type",e.type),t.s9C("id",e.name),t.s9C("formControlName",e.name)}}function B(n,o){if(1&n&&(t.TgZ(0,"div",8),t.ynx(1,9),t.YNc(2,k,3,1,"ng-container",10),t.YNc(3,U,5,2,"ng-container",10),t.YNc(4,w,7,3,"ng-container",10),t.YNc(5,Y,6,3,"ng-container",10),t.YNc(6,S,6,5,"ng-container",11),t.BQk(),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","hidden"),t.xp6(1),t.Q6J("ngSwitchCase","checkbox"),t.xp6(1),t.Q6J("ngSwitchCase","select"),t.xp6(1),t.Q6J("ngSwitchCase","multiselect")}}function E(n,o){if(1&n&&(t.ynx(0,null,12),t._UZ(2,"input",13),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.s9C("formControlName",e.name)}}function M(n,o){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label",15),t._UZ(3,"input",16),t._uU(4),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.s9C("formControlName",e.name),t.xp6(1),t.hij(" ",e.label," ")}}function D(n,o){if(1&n&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.label)}}function $(n,o){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"div",5)(5,"select",17),t.YNc(6,D,2,2,"option",18),t.qZA()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.label),t.xp6(2),t.s9C("formControlName",e.name),t.xp6(1),t.Q6J("ngForOf",e.options)}}function I(n,o){if(1&n&&(t.TgZ(0,"p")(1,"label"),t._UZ(2,"input",21),t._uU(3),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Q6J("formControl",e.control),t.xp6(1),t.hij(" ",e.label," ")}}function V(n,o){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t.YNc(5,I,4,2,"p",20),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.AsE("",e.label," - ",e.name,""),t.xp6(2),t.Q6J("ngForOf",e.options)}}function G(n,o){if(1&n&&(t.ynx(0,null,22),t.TgZ(2,"label",23),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t._UZ(5,"input",24),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.s9C("for",e.name),t.xp6(1),t.Oqu(e.label),t.xp6(2),t.s9C("type",e.type),t.s9C("id",e.name),t.s9C("formControlName",e.name)}}function j(n,o){if(1&n&&(t.TgZ(0,"div",8),t.ynx(1,9),t.YNc(2,E,3,1,"ng-container",10),t.YNc(3,M,5,2,"ng-container",10),t.YNc(4,$,7,3,"ng-container",10),t.YNc(5,V,6,3,"ng-container",10),t.YNc(6,G,6,5,"ng-container",11),t.BQk(),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","hidden"),t.xp6(1),t.Q6J("ngSwitchCase","checkbox"),t.xp6(1),t.Q6J("ngSwitchCase","select"),t.xp6(1),t.Q6J("ngSwitchCase","multiselect")}}const R=[{path:"",component:F,data:{title:"List Novels",breadcrumb:"List"}},{path:"add",component:(()=>{class n extends _{constructor(e,i,l,s){super(s),this.router=e,this.route=i,this.api=l,this.formBuilder=s}ngOnInit(){this.formTitle="Add new Novel",Promise.all([this.api.Meta.get("drivers"),this.api.Dictionary.getAll()]).then(e=>{this.loadMeta(e[0],e[1]),this.getForm(!0)})}submitForm(e){const i=this.getValues();this.api.Novel.add({values:i}).then(l=>{this.router.navigate(["/novel/",l.id])},l=>{console.log(l)})}goBack(){this.router.navigate(["/novel"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.F0),t.Y36(p.gz),t.Y36(m.s),t.Y36(r.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-novel-add"]],features:[t.qOj],decls:10,vars:3,consts:[[1,"form-content"],[1,"title"],[3,"formGroup","ngSubmit"],["class","field",4,"ngFor","ngForOf"],[1,"field","is-grouped"],[1,"control"],["type","submit","value","Submit",1,"button","is-link"],["value","Cancel",1,"button","is-danger",3,"click"],[1,"field"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["tempHidden",""],["type","hidden",3,"formControlName"],["tempCheck",""],[1,"checkbox"],["type","checkbox",3,"formControlName"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngFor","ngForOf"],["type","checkbox",3,"formControl"],["tempText",""],[1,"label",3,"for"],[1,"input",3,"type","id","formControlName"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return i.submitForm(i.formGroup.value)}),t.YNc(4,B,7,5,"div",3),t.TgZ(5,"div",4)(6,"div",5),t._UZ(7,"input",6),t.qZA(),t.TgZ(8,"div",5)(9,"input",7),t.NdJ("click",function(){return i.goBack()}),t.qZA()()()()()),2&e&&(t.xp6(2),t.Oqu(i.formTitle),t.xp6(1),t.Q6J("formGroup",i.formGroup),t.xp6(1),t.Q6J("ngForOf",i.form))},directives:[r._Y,r.JL,r.sg,c.sg,c.RF,c.n9,r.Fj,r.JJ,r.u,r.Wl,r.EJ,r.YN,r.Kr,r.oH,c.ED],styles:[".form-content[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border-radius:10px}"]}),n})(),data:{title:"Add New Novel",breadcrumb:"Add Novel"}},{path:"edit/:idNovel",component:(()=>{class n extends _{constructor(e,i,l,s){super(s),this.router=e,this.route=i,this.api=l,this.formBuilder=s}ngOnInit(){this.idNovel=this.route.snapshot.params.idNovel,this.formTitle="Edit Novel",Promise.all([this.api.Meta.get("drivers"),this.api.Novel.get({id:this.idNovel}),this.api.Dictionary.getAll({idNovel:this.idNovel}),this.api.Dictionary.getAll()]).then(e=>{this.novel=e[1],this.dictionaries=e[2],this.loadMeta(e[0],e[3]),this.setValues(e[1],e[2]),this.getForm(!1)})}submitForm(e){const i=this.getValues(this.dictionaries);this.api.Novel.update({id:this.idNovel,values:i}).then(l=>{this.goBack()},l=>{console.log(l)})}goBack(){this.router.navigate(["/novel"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.F0),t.Y36(p.gz),t.Y36(m.s),t.Y36(r.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-novel-edit"]],features:[t.qOj],decls:10,vars:3,consts:[[1,"form-content"],[1,"title"],[3,"formGroup","ngSubmit"],["class","field",4,"ngFor","ngForOf"],[1,"field","is-grouped"],[1,"control"],["type","submit","value","Submit",1,"button","is-link"],["value","Cancel",1,"button","is-danger",3,"click"],[1,"field"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["tempHidden",""],["type","hidden",3,"formControlName"],["tempCheck",""],[1,"checkbox"],["type","checkbox",3,"formControlName"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngFor","ngForOf"],["type","checkbox",3,"formControl"],["tempText",""],[1,"label",3,"for"],[1,"input",3,"type","id","formControlName"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return i.submitForm(i.formGroup.value)}),t.YNc(4,j,7,5,"div",3),t.TgZ(5,"div",4)(6,"div",5),t._UZ(7,"input",6),t.qZA(),t.TgZ(8,"div",5)(9,"input",7),t.NdJ("click",function(){return i.goBack()}),t.qZA()()()()()),2&e&&(t.xp6(2),t.Oqu(i.formTitle),t.xp6(1),t.Q6J("formGroup",i.formGroup),t.xp6(1),t.Q6J("ngForOf",i.form))},directives:[r._Y,r.JL,r.sg,c.sg,c.RF,c.n9,r.Fj,r.JJ,r.u,r.Wl,r.EJ,r.YN,r.Kr,r.oH,c.ED],styles:[".form-content[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border-radius:10px}"]}),n})(),data:{title:"Edit Novel",breadcrumb:"Edit Novel"}},{path:":idNovel",loadChildren:()=>Promise.all([a.e(592),a.e(320)]).then(a.bind(a,3320)).then(n=>n.ChapterModule),data:{title:"View chapters",breadcrumb:"Chapters"}},{path:"**",redirectTo:""}];let H=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.ez,p.Bz.forChild(R)]]}),n})();var K=a(6920);let P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.ez,H,p.Bz,r.u5,r.UX,K.uH]]}),n})()}}]);