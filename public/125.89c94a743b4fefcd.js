"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[125],{8125:(nt,h,d)=>{d.r(h),d.d(h,{DictionaryModule:()=>et});var l=d(6895),g=d(4793),t=d(4650),_=d(6845);function f(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",5),t.TgZ(1,"div",6),t.TgZ(2,"a",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().LINK(null,"add")}),t._uU(3,"Add Dictionary"),t.qZA(),t.qZA(),t.qZA()}}function y(n,c){1&n&&t.GkF(0)}const C=function(){return[]};function Z(n,c){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",8),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().LINK(r.id)}),t._uU(3),t.qZA(),t.TgZ(4,"td",8),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().LINK(r.id)}),t._uU(5),t.qZA(),t.TgZ(6,"td",8),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().LINK(r.id)}),t._uU(7),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"a",9),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().LINK(r.id,"edit")}),t._UZ(10,"i",10),t.qZA(),t._uU(11," / "),t.TgZ(12,"a",11),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().delete(r.id)}),t._UZ(13,"i",12),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=c.$implicit;t.xp6(3),t.Oqu(e.name),t.xp6(2),t.Oqu(e.language),t.xp6(2),t.Oqu(e.countCategories()),t.xp6(5),t.Q6J("routerLink",t.DdM(4,C))}}let x=(()=>{class n{constructor(e,i,o){this.router=e,this.route=i,this.api=o,this.dictionaries=[],this.idNovel=null}ngOnInit(){this.loadList()}loadList(){this.idNovel=this.route.snapshot.params.idNovel,this.api.Dictionary.getAll({idNovel:this.idNovel}).then(e=>{this.dictionaries=Object.values(e)},e=>{console.log(e)})}LINK(e,i){const o=[];this.idNovel&&(o.push("novel"),o.push(this.idNovel)),o.push("dictionary"),i&&o.push(i),e&&o.push(e),console.log("LINK",o),this.router.navigate(o)}delete(e){return confirm("Are you sure?")&&this.api.Dictionary.delete({id:e}).then(i=>{this.loadList()},i=>{console.log(i)}),!0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.F0),t.Y36(g.gz),t.Y36(_.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dictionary-list"]],decls:17,vars:2,consts:[["actionButtons",""],[4,"ngTemplateOutlet"],[1,"table","is-striped","is-hoverable","is-fullwidth"],[2,"width","200px"],[4,"ngFor","ngForOf"],[1,"columns","actionButtons"],[1,"column"],[1,"button","is-info",3,"click"],[3,"click"],[1,"icon","has-text-success",3,"click"],[1,"fas","fa-info-circle"],[1,"icon","has-text-danger",3,"routerLink","click"],[1,"fas","fa-ban"]],template:function(e,i){if(1&e&&(t.YNc(0,f,4,0,"ng-template",null,0,t.W1O),t.YNc(2,y,1,0,"ng-container",1),t.TgZ(3,"div"),t.TgZ(4,"table",2),t.TgZ(5,"thead"),t.TgZ(6,"tr"),t.TgZ(7,"th"),t._uU(8,"Name"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Language"),t.qZA(),t.TgZ(11,"th",3),t._uU(12,"# of Categories"),t.qZA(),t.TgZ(13,"th",3),t._uU(14,"Actions"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"tbody"),t.YNc(16,Z,14,5,"ng-container",4),t.qZA(),t.qZA(),t.qZA()),2&e){const o=t.MAs(1);t.xp6(2),t.Q6J("ngTemplateOutlet",o),t.xp6(14),t.Q6J("ngForOf",i.dictionaries)}},directives:[l.tP,l.sg,g.yS],styles:[".actionButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center;width:100%}"]}),n})();var a=d(4006),T=d(7783),u=d(4868);let m=(()=>{class n{constructor(e){this.formBuilder=e,this.selectNovels=[],this.selectLanguages=[],this.indexes=[],this.formGroup=e.group({id:[null],name:[null],language:[null],novel:[null]})}loadMeta(e,i){this.selectLanguages=[];for(const o of Object.keys(e.languages))this.selectLanguages.push(new u.Wx(o,e.languages[o]));this.selectNovels=[];for(const o of Object.keys(i))this.selectNovels.push(new u.Wx(i[o].id+"",i[o].nameCustom,!1))}addForm(e,i,o,r){this.indexes.push(e),this.form.push(new u.Wi(e,i,o,r))}getForm(e){this.form=[],e&&this.addForm("id","","hidden"),this.addForm("name","Name","text"),this.addForm("language","Language","select",this.selectLanguages),this.addForm("novel","Novels","multiselect",this.selectNovels)}setValues(e,i){const o=i.map(s=>s.id+""),r=new a.Oe(this.selectNovels.map(s=>(o.includes(s.value)&&s.setChecked(!0),s.control)));e&&this.formGroup.setValue({id:e.id,name:e.name,language:e.language,novel:r})}getValues(e){const i={dictionary:null,novels:null};i.dictionary=new T.Xy(this.formGroup.value),delete i.dictionary.novel;const o=this.indexes.indexOf("novel");if(i.novels=this.form[o].getValues().map(r=>parseInt(r,10)),e&&e.length===i.novels.length){const r=e.map(s=>s.id);JSON.stringify(r)===JSON.stringify(i.novels)&&delete i.novels}return i}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(a.qu))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function A(n,c){if(1&n&&(t.ynx(0,null,12),t._UZ(2,"input",13),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.s9C("formControlName",e.name)}}function v(n,c){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label",15),t._UZ(3,"input",16),t._uU(4),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.s9C("formControlName",e.name),t.xp6(1),t.hij(" ",e.label," ")}}function q(n,c){if(1&n&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.label)}}function N(n,c){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t.TgZ(5,"select",17),t.YNc(6,q,2,2,"option",18),t.qZA(),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.label),t.xp6(2),t.s9C("formControlName",e.name),t.xp6(1),t.Q6J("ngForOf",e.options)}}function S(n,c){if(1&n&&(t.TgZ(0,"p"),t.TgZ(1,"label"),t._UZ(2,"input",21),t._uU(3),t.qZA(),t.qZA()),2&n){const e=c.$implicit;t.xp6(2),t.Q6J("formControl",e.control),t.xp6(1),t.hij(" ",e.label," ")}}function O(n,c){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t.YNc(5,S,4,2,"p",20),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.AsE("",e.label," - ",e.name,""),t.xp6(2),t.Q6J("ngForOf",e.options)}}function D(n,c){if(1&n&&(t.ynx(0,null,22),t.TgZ(2,"label",23),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t._UZ(5,"input",24),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.s9C("for",e.name),t.xp6(1),t.Oqu(e.label),t.xp6(2),t.s9C("type",e.type),t.s9C("id",e.name),t.s9C("formControlName",e.name)}}function b(n,c){if(1&n&&(t.TgZ(0,"div",8),t.ynx(1,9),t.YNc(2,A,3,1,"ng-container",10),t.YNc(3,v,5,2,"ng-container",10),t.YNc(4,N,7,3,"ng-container",10),t.YNc(5,O,6,3,"ng-container",10),t.YNc(6,D,6,5,"ng-container",11),t.BQk(),t.qZA()),2&n){const e=c.$implicit;t.xp6(1),t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","hidden"),t.xp6(1),t.Q6J("ngSwitchCase","checkbox"),t.xp6(1),t.Q6J("ngSwitchCase","select"),t.xp6(1),t.Q6J("ngSwitchCase","multiselect")}}let M=(()=>{class n extends m{constructor(e,i,o,r){super(r),this.router=e,this.route=i,this.api=o,this.formBuilder=r}ngOnInit(){this.idNovel=this.route.snapshot.params.idNovel,this.idDictionary=this.route.snapshot.params.idDictionary,this.formTitle="Edit Dictionary",Promise.all([this.api.Meta.get("languages"),this.api.Dictionary.get({id:this.idDictionary}),this.api.Novel.getAll()]).then(e=>{this.dictionary=e[1],this.novels=e[2],this.loadMeta(e[0],e[2]),this.idNovel&&this.api.Novel.get({id:this.idNovel}).then(i=>{this.setValues(null,[i])}),this.getForm(!0)})}submitForm(e){const i=this.getValues(this.novels);this.api.Dictionary.add({values:i}).then(o=>{this.goBack()},o=>{console.log(o)})}LINK(e,i){const o=[];this.idNovel&&(o.push("novel"),o.push(this.idNovel)),o.push("dictionary"),i&&o.push(i),e&&o.push(e),this.router.navigate(o)}goBack(){this.LINK()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.F0),t.Y36(g.gz),t.Y36(_.s),t.Y36(a.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dictionary-add"]],features:[t.qOj],decls:10,vars:3,consts:[[1,"form-content"],[1,"title"],[3,"formGroup","ngSubmit"],["class","field",4,"ngFor","ngForOf"],[1,"field","is-grouped"],[1,"control"],["type","submit","value","Submit",1,"button","is-link"],["value","Cancel",1,"button","is-danger",3,"click"],[1,"field"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["tempHidden",""],["type","hidden",3,"formControlName"],["tempCheck",""],[1,"checkbox"],["type","checkbox",3,"formControlName"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngFor","ngForOf"],["type","checkbox",3,"formControl"],["tempText",""],[1,"label",3,"for"],[1,"input",3,"type","id","formControlName"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return i.submitForm(i.formGroup.value)}),t.YNc(4,b,7,5,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t._UZ(7,"input",6),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"input",7),t.NdJ("click",function(){return i.goBack()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Oqu(i.formTitle),t.xp6(1),t.Q6J("formGroup",i.formGroup),t.xp6(1),t.Q6J("ngForOf",i.form))},directives:[a._Y,a.JL,a.sg,l.sg,l.RF,l.n9,a.Fj,a.JJ,a.u,a.Wl,a.EJ,a.YN,a.Kr,a.oH,l.ED],styles:[".form-content[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border-radius:10px}"]}),n})();function w(n,c){if(1&n&&(t.ynx(0,null,12),t._UZ(2,"input",13),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.s9C("formControlName",e.name)}}function F(n,c){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label",15),t._UZ(3,"input",16),t._uU(4),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.s9C("formControlName",e.name),t.xp6(1),t.hij(" ",e.label," ")}}function H(n,c){if(1&n&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.label)}}function J(n,c){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t.TgZ(5,"select",17),t.YNc(6,H,2,2,"option",18),t.qZA(),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.label),t.xp6(2),t.s9C("formControlName",e.name),t.xp6(1),t.Q6J("ngForOf",e.options)}}function k(n,c){if(1&n&&(t.TgZ(0,"p"),t.TgZ(1,"label"),t._UZ(2,"input",21),t._uU(3),t.qZA(),t.qZA()),2&n){const e=c.$implicit;t.xp6(2),t.Q6J("formControl",e.control),t.xp6(1),t.hij(" ",e.label," ")}}function U(n,c){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t.YNc(5,k,4,2,"p",20),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.AsE("",e.label," - ",e.name,""),t.xp6(2),t.Q6J("ngForOf",e.options)}}function E(n,c){if(1&n&&(t.ynx(0,null,22),t.TgZ(2,"label",23),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t._UZ(5,"input",24),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.s9C("for",e.name),t.xp6(1),t.Oqu(e.label),t.xp6(2),t.s9C("type",e.type),t.s9C("id",e.name),t.s9C("formControlName",e.name)}}function Q(n,c){if(1&n&&(t.TgZ(0,"div",8),t.ynx(1,9),t.YNc(2,w,3,1,"ng-container",10),t.YNc(3,F,5,2,"ng-container",10),t.YNc(4,J,7,3,"ng-container",10),t.YNc(5,U,6,3,"ng-container",10),t.YNc(6,E,6,5,"ng-container",11),t.BQk(),t.qZA()),2&n){const e=c.$implicit;t.xp6(1),t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","hidden"),t.xp6(1),t.Q6J("ngSwitchCase","checkbox"),t.xp6(1),t.Q6J("ngSwitchCase","select"),t.xp6(1),t.Q6J("ngSwitchCase","multiselect")}}let Y=(()=>{class n extends m{constructor(e,i,o,r){super(r),this.router=e,this.route=i,this.api=o,this.formBuilder=r}ngOnInit(){this.idNovel=this.route.snapshot.params.idNovel,this.idDictionary=this.route.snapshot.params.idDictionary,this.formTitle="Edit Dictionary",Promise.all([this.api.Meta.get("languages"),this.api.Dictionary.get({id:this.idDictionary}),this.api.Novel.getAll()]).then(e=>{this.api.Novel.getAll({idDictionary:this.idDictionary}).then(i=>{this.dictionary=e[1],this.novels=e[2],this.loadMeta(e[0],e[2]),this.setValues(e[1],i),this.getForm(!1)})})}submitForm(e){const i=this.getValues(this.novels);this.api.Dictionary.update({id:this.idDictionary,values:i}).then(o=>{this.goBack()},o=>{console.log(o)})}goBack(){this.router.navigate(["/dictionary"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.F0),t.Y36(g.gz),t.Y36(_.s),t.Y36(a.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dictionary-edit"]],features:[t.qOj],decls:10,vars:3,consts:[[1,"form-content"],[1,"title"],[3,"formGroup","ngSubmit"],["class","field",4,"ngFor","ngForOf"],[1,"field","is-grouped"],[1,"control"],["type","submit","value","Submit",1,"button","is-link"],["value","Cancel",1,"button","is-danger",3,"click"],[1,"field"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["tempHidden",""],["type","hidden",3,"formControlName"],["tempCheck",""],[1,"checkbox"],["type","checkbox",3,"formControlName"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngFor","ngForOf"],["type","checkbox",3,"formControl"],["tempText",""],[1,"label",3,"for"],[1,"input",3,"type","id","formControlName"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return i.submitForm(i.formGroup.value)}),t.YNc(4,Q,7,5,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t._UZ(7,"input",6),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"input",7),t.NdJ("click",function(){return i.goBack()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Oqu(i.formTitle),t.xp6(1),t.Q6J("formGroup",i.formGroup),t.xp6(1),t.Q6J("ngForOf",i.form))},directives:[a._Y,a.JL,a.sg,l.sg,l.RF,l.n9,a.Fj,a.JJ,a.u,a.Wl,a.EJ,a.YN,a.Kr,a.oH,l.ED],styles:[".form-content[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border-radius:10px}"]}),n})();var L=d(3178);function $(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",9),t.TgZ(1,"div",10),t.TgZ(2,"a",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveList()}),t._uU(3,"Save List"),t.qZA(),t.qZA(),t.qZA()}}function B(n,c){1&n&&t.GkF(0)}function j(n,c){if(1&n&&(t.TgZ(0,"option",12),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.s9C("value",e.id),t.xp6(1),t.Oqu(e.language)}}function I(n,c){if(1&n&&(t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(2),t.hij(" ",i.categoriesSelectedHash[i.entriesSelected[i.entry2SelectHash[e].selected].idCategory].name," "),t.xp6(2),t.hij(" ",i.entriesSelected[i.entry2SelectHash[e].selected].entryTranslation," "),t.xp6(2),t.hij(" ",i.entriesSelected[i.entry2SelectHash[e].selected].entryOriginal," "),t.xp6(2),t.hij(" ",i.entriesSelected[i.entry2SelectHash[e].selected].description," ")}}function P(n,c){1&n&&(t.TgZ(0,"td"),t._uU(1," - "),t.qZA(),t.TgZ(2,"td"),t._uU(3," - "),t.qZA(),t.TgZ(4,"td"),t._uU(5," - "),t.qZA(),t.TgZ(6,"td"),t._uU(7," - "),t.qZA())}function V(n,c){if(1&n&&(t.TgZ(0,"option",12),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.s9C("value",e.id),t.xp6(1),t.Oqu(e.name)}}function K(n,c){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"td"),t.TgZ(2,"select",17),t.NdJ("ngModelChange",function(o){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return s.entries[s.entry2SelectHash[r].entry].idCategory=o})("ngModelChange",function(){t.CHM(e);const o=t.oxw().$implicit,r=t.oxw();return r.changeEntry(r.entries[r.entry2SelectHash[o].entry])}),t.YNc(3,V,2,2,"option",6),t.qZA(),t.qZA(),t.TgZ(4,"td"),t.TgZ(5,"input",18),t.NdJ("ngModelChange",function(o){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return s.entries[s.entry2SelectHash[r].entry].entryTranslation=o})("ngModelChange",function(){t.CHM(e);const o=t.oxw().$implicit,r=t.oxw();return r.changeEntry(r.entries[r.entry2SelectHash[o].entry])}),t.qZA(),t.qZA(),t.TgZ(6,"td"),t.TgZ(7,"input",18),t.NdJ("ngModelChange",function(o){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return s.entries[s.entry2SelectHash[r].entry].entryOriginal=o})("ngModelChange",function(){t.CHM(e);const o=t.oxw().$implicit,r=t.oxw();return r.changeEntry(r.entries[r.entry2SelectHash[o].entry])}),t.qZA(),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"input",18),t.NdJ("ngModelChange",function(o){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return s.entries[s.entry2SelectHash[r].entry].description=o})("ngModelChange",function(){t.CHM(e);const o=t.oxw().$implicit,r=t.oxw();return r.changeEntry(r.entries[r.entry2SelectHash[o].entry])}),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(2),t.Q6J("ngModel",i.entries[i.entry2SelectHash[e].entry].idCategory),t.xp6(1),t.Q6J("ngForOf",i.categories),t.xp6(2),t.Q6J("ngModel",i.entries[i.entry2SelectHash[e].entry].entryTranslation),t.xp6(2),t.Q6J("ngModel",i.entries[i.entry2SelectHash[e].entry].entryOriginal),t.xp6(2),t.Q6J("ngModel",i.entries[i.entry2SelectHash[e].entry].description)}}function G(n,c){if(1&n&&(t.TgZ(0,"option",12),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.s9C("value",e.id),t.xp6(1),t.Oqu(e.name)}}function z(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"select",19),t.NdJ("change",function(o){t.CHM(e);const r=t.oxw().index;return t.oxw().addEntry(o,r)}),t.TgZ(2,"option",20),t._uU(3,"Select a category to copy"),t.qZA(),t.YNc(4,G,2,2,"option",6),t.qZA(),t.qZA(),t.TgZ(5,"td"),t._uU(6," - "),t.qZA(),t.TgZ(7,"td"),t._uU(8," - "),t.qZA(),t.TgZ(9,"td"),t._uU(10," - "),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.categories)}}const W=function(n,c,e){return{new:n,deleted:c,changed:e}};function X(n,c){if(1&n&&(t.ynx(0),t.TgZ(1,"tr",13),t.YNc(2,I,9,4,"ng-container",14),t.YNc(3,P,8,0,"ng-template",null,15,t.W1O),t.TgZ(5,"td"),t._uU(6,"|"),t.qZA(),t.YNc(7,K,10,5,"ng-container",14),t.YNc(8,z,11,1,"ng-template",null,16,t.W1O),t.qZA(),t.BQk()),2&n){const e=c.$implicit,i=t.MAs(4),o=t.MAs(9),r=t.oxw();t.xp6(1),t.Q6J("ngClass",t.kEZ(5,W,r.entry2SelectHash[e].entry&&0==r.entries[r.entry2SelectHash[e].entry].id,r.entry2SelectHash[e].entry&&1==r.entries[r.entry2SelectHash[e].entry].delete,r.entry2SelectHash[e].entry&&1==r.entries[r.entry2SelectHash[e].entry].update)),t.xp6(1),t.Q6J("ngIf",r.entry2SelectHash[e]&&r.entry2SelectHash[e].selected)("ngIfElse",i),t.xp6(5),t.Q6J("ngIf",r.entry2SelectHash[e]&&null!=r.entry2SelectHash[e].entry)("ngIfElse",o)}}const R=[{path:"",component:x,data:{title:"List Dictionaries"}},{path:"add",component:M,data:{title:"Add Dictionaries",breadcrumb:"Add Dictionary"}},{path:"edit/:idDictionary",component:Y,data:{title:"Edit Dictionary",breadcrumb:"Edit Dictionary"}},{path:"diff/:idDictionary",component:(()=>{class n{constructor(e,i,o){this.api=e,this.route=i,this.router=o,this.dictionaries=[],this.categories=[],this.categoriesHash={},this.entries=[],this.entriesOriginalValues={},this.entry2SelectHash={},this.entry2SelectHashKeys=[],this.categoriesSelected=[],this.categoriesSelectedHash={},this.entriesSelected=[]}ngOnInit(){this.idNovel=this.route.snapshot.params.idNovel,this.idDictionary=this.route.snapshot.params.idDictionary,this.api.Dictionary.getAll({idNovel:this.idNovel}).then(e=>{this.dictionaries=Object.values(e),this.getCache()},e=>{console.log(e)})}ngOnDestroy(){delete this.dictionaries,delete this.categories,delete this.categoriesHash,delete this.entries,delete this.idDictionary,delete this.entry2SelectHash,delete this.entry2SelectHashKeys,delete this.categoriesSelected,delete this.categoriesSelectedHash,delete this.entriesSelected,delete this.idDictionarySelected}loadSelectedDictionary(){this.getSelectedCache()}changeEntry(e){e.id>0&&(console.log("changeEntry",e.id,e.idCategory,e),e.update=e.entryOriginal!=this.entriesOriginalValues[e.id].entryOriginal||e.entryTranslation!=this.entriesOriginalValues[e.id].entryTranslation||!!e.description&&e.description!=this.entriesOriginalValues[e.id].description||e.idCategory!=this.entriesOriginalValues[e.id].idCategory)}addEntry(e,i){const o=e.target.value,r=this.entry2SelectHash[this.entry2SelectHashKeys[i]],s=this.entriesSelected[r.selected],p=new L.G;p.id=0,p.idCategory=o,p.entryOriginal=s.entryOriginal,p.entryTranslation=s.entryTranslation,p.description=s.description,r.entry=this.entries.length,this.entries.push(p)}saveList(){const e={},i=[];this.categories.forEach(o=>{i.push(o),e[o.id]=[]}),this.entries.forEach(o=>{e[o.idCategory].push(o)}),i.forEach(o=>{o.entries=e[o.id]}),this.api.Dictionary.fullSave(this.idDictionary,i).then(o=>{o&&(this.categories=[],this.dictionaries=Object.values(this.api.Dictionary.getAll()),this.router.navigate(["/novel/dictionary/"]))})}getCache(){0==this.categories.length&&this.api.Dictionary.getCache(this.idDictionary).then(e=>{this.categories=[],this.entries=[],this.api.Category.getAll({idDictionary:this.idDictionary}).then(i=>{this.categories=i,this.categories.forEach(o=>{this.categoriesHash[o.id]={name:o.name},this.api.Entry.getAll({idDictionary:this.idDictionary,idCategory:o.id}).then(r=>{for(const s in r)this.entry2SelectHash[r[s].entryOriginal]={entry:this.entries.length,selected:null},this.entries.push(r[s]),this.entriesOriginalValues[r[s].id]={entryOriginal:""+r[s].entryOriginal,entryTranslation:""+r[s].entryTranslation,description:""+r[s].description,idCategory:""+r[s].idCategory}})})}),this.entry2SelectHashKeys=Object.keys(this.entry2SelectHash)})}getSelectedCache(){this.api.Dictionary.getCache(this.idDictionarySelected).then(e=>{this.categoriesSelected=[],this.entriesSelected=[],this.api.Category.getAll({idDictionary:this.idDictionarySelected}).then(i=>{this.categoriesSelected=i}),this.categoriesSelected.forEach(i=>{this.categoriesSelectedHash[i.id]={name:i.name},this.api.Entry.getAll({idDictionary:this.idDictionarySelected,idCategory:i.id}).then(o=>{for(const r in o)this.entry2SelectHash[o[r].entryOriginal]?this.entry2SelectHash[o[r].entryOriginal].selected=this.entriesSelected.length:this.entry2SelectHash[o[r].entryOriginal]={entry:null,selected:this.entriesSelected.length},this.entriesSelected.push(o[r])})}),this.entry2SelectHashKeys=Object.keys(this.entry2SelectHash)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.s),t.Y36(g.gz),t.Y36(g.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-diff"]],decls:33,vars:4,consts:[["actionButtons",""],[4,"ngTemplateOutlet"],[1,"table","is-stripede","is-fullwidth","tableContent"],["colspan","4"],[3,"ngModel","ngModelChange","change"],["value","","selected","selected"],[3,"value",4,"ngFor","ngForOf"],[1,"tableContent"],[4,"ngFor","ngForOf"],[1,"columns","actionButtons"],[1,"column"],[1,"button","is-info",3,"click"],[3,"value"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["selectedEmpty",""],["nonAnEntry",""],[3,"ngModel","ngModelChange"],["type","text",3,"ngModel","ngModelChange"],[3,"change"],["value",""]],template:function(e,i){if(1&e&&(t.YNc(0,$,4,0,"ng-template",null,0,t.W1O),t.YNc(2,B,1,0,"ng-container",1),t.TgZ(3,"div"),t.TgZ(4,"table",2),t.TgZ(5,"thead"),t.TgZ(6,"tr"),t.TgZ(7,"th",3),t.TgZ(8,"select",4),t.NdJ("ngModelChange",function(r){return i.idDictionarySelected=r})("change",function(){return i.loadSelectedDictionary()}),t.TgZ(9,"option",5),t._uU(10,"Select a Dictionary"),t.qZA(),t.YNc(11,j,2,2,"option",6),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"tr"),t.TgZ(13,"th"),t._uU(14,"Original"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Translated"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Description"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Category"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"|"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Category"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Original"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Translated"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Description"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"tbody",7),t.YNc(32,X,10,9,"ng-container",8),t.qZA(),t.qZA(),t.qZA()),2&e){const o=t.MAs(1);t.xp6(2),t.Q6J("ngTemplateOutlet",o),t.xp6(6),t.Q6J("ngModel",i.idDictionarySelected),t.xp6(3),t.Q6J("ngForOf",i.dictionaries),t.xp6(21),t.Q6J("ngForOf",i.entry2SelectHashKeys)}},directives:[l.tP,a.EJ,a.JJ,a.On,a.YN,a.Kr,l.sg,l.mk,l.O5,a.Fj],styles:[".actionButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center;width:100%}.tableContent[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#eee}.tableContent[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.changed[_ngcontent-%COMP%]{background-color:#afa}.tableContent[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.new[_ngcontent-%COMP%]{background-color:#aaf}"]}),n})(),data:{title:"Diff Dictionary",breadcrumb:"Diff"}},{path:":idDictionary",loadChildren:()=>Promise.all([d.e(592),d.e(912)]).then(d.bind(d,912)).then(n=>n.CategoryModule),data:{title:"View categories",breadcrumb:"View Categories"}},{path:"**",redirectTo:""}];let tt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,g.Bz.forChild(R)],g.Bz]}),n})(),et=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,tt,a.u5,a.UX]]}),n})()}}]);