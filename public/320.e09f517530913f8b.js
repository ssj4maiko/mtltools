"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[320],{3320:(_t,O,d)=>{d.r(O),d.d(O,{ChapterModule:()=>dt});var C=d(6895),h=d(4793),v=d(2340),t=d(4650),x=d(6845);function S(o,a){1&o&&(t.TgZ(0,"div",5)(1,"a",8),t._uU(2,"Import Chapter"),t.qZA()())}function Z(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",5)(1,"a",9),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateChapters()}),t._uU(2,"Update Chapters"),t.qZA()()}}const k=function(o){return["/novel/",o,"dictionary"]};function N(o,a){if(1&o&&(t.TgZ(0,"div",4)(1,"div",5)(2,"a",6),t._uU(3,"Dictionary"),t.qZA()(),t.YNc(4,S,3,0,"div",7),t.YNc(5,Z,3,0,"div",7),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("routerLink",t.VKq(3,k,e.idNovel)),t.xp6(2),t.Q6J("ngIf",e.novel&&"manual"==e.novel.driver),t.xp6(1),t.Q6J("ngIf",e.novel&&"manual"!=e.novel.driver)}}function L(o,a){1&o&&t.GkF(0)}function B(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"a",15),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw().$implicit;return t.oxw().openGT(s,r)}),t._uU(1),t.qZA()}if(2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.language)}}function J(o,a){1&o&&(t.TgZ(0,"a",16)(1,"span",17),t._UZ(2,"i",18),t.qZA()())}function A(o,a){1&o&&(t.TgZ(0,"a",19)(1,"span",17),t._UZ(2,"i",20),t.qZA()())}const y=function(o,a){return["/novel/",o,a]};function D(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"tr",10)(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td",11),t._uU(5),t.qZA(),t.TgZ(6,"td",11),t._uU(7),t.qZA(),t.TgZ(8,"td",11),t._uU(9),t.qZA(),t.TgZ(10,"td"),t.YNc(11,B,2,1,"a",12),t.qZA(),t.YNc(12,J,3,0,"ng-template",null,13,t.W1O),t.YNc(14,A,3,0,"ng-template",null,14,t.W1O),t.qZA(),t.BQk()),2&o){const e=a.$implicit,i=t.oxw();t.xp6(1),t.s9C("title",i.novel.title),t.xp6(2),t.Oqu(e.no),t.xp6(1),t.Q6J("routerLink",t.WLB(9,y,e.idNovel,e.no)),t.xp6(1),t.Oqu(e.title),t.xp6(1),t.Q6J("routerLink",t.WLB(12,y,e.idNovel,e.no)),t.xp6(1),t.Oqu(e.dateOriginalPost),t.xp6(1),t.Q6J("routerLink",t.WLB(15,y,e.idNovel,e.no)),t.xp6(1),t.Oqu(e.dateOriginalRevision),t.xp6(2),t.Q6J("ngForOf",i.dictionaries)}}let q=(()=>{class o{constructor(e,i,n){this.router=e,this.route=i,this.api=n,this.chapters=[],this.dictionaries=[]}ngOnInit(){this.idNovel=this.route.snapshot.params.idNovel,this.api.Novel.get({id:this.idNovel}).then(e=>{this.novel=e,this.api.Dictionary.getAll({idNovel:this.idNovel}).then(i=>{this.dictionaries=Object.values(i),this.api.Chapter.getAll({idNovel:this.idNovel}).then(n=>{this.chapters=Object.values(n)})})})}openGT(e,i){let n=`${v.N.backendServer}/static/${this.idNovel}/${i.id}/${e.no}/1`;n="https://translate.google.com/translate?sl=auto&tl=en&u="+n,window.open(n)}updateChapters(){this.api.Chapter.autoUpdate({idNovel:this.idNovel}).then(e=>{this.api.Chapter.getAll({idNovel:this.idNovel}).then(i=>{this.chapters=Object.values(i)})},e=>{console.log(e)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.F0),t.Y36(h.gz),t.Y36(x.s))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-chapter-list"]],decls:21,vars:2,consts:[["actionButtons",""],[4,"ngTemplateOutlet"],[1,"table","is-striped","is-hoverable","is-fullwidth"],[4,"ngFor","ngForOf"],[1,"columns","actionButtons"],[1,"column"],[1,"button","is-primary",3,"routerLink"],["class","column",4,"ngIf"],["routerLink","['/novel/',idNovel,'add']",1,"button","is-info"],[1,"button","is-info",3,"click"],[3,"title"],[3,"routerLink"],[3,"click",4,"ngFor","ngForOf"],["success",""],["danger",""],[3,"click"],[1,"button","is-success"],[1,"icon","is-small"],[1,"fas","fa-check"],[1,"button","is-danger"],[1,"fas","fa-times"]],template:function(e,i){if(1&e&&(t.YNc(0,N,6,5,"ng-template",null,0,t.W1O),t.YNc(2,L,1,0,"ng-container",1),t.TgZ(3,"div")(4,"table",2)(5,"thead")(6,"tr")(7,"th"),t._uU(8,"Number"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Title"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Date Created"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Date Updated"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Dictionary"),t._UZ(17,"br"),t._uU(18,"Google Translator"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,D,16,18,"ng-container",3),t.qZA()()()),2&e){const n=t.MAs(1);t.xp6(2),t.Q6J("ngTemplateOutlet",n),t.xp6(18),t.Q6J("ngForOf",i.chapters)}},directives:[h.yS,C.O5,C.tP,C.sg,h.rH],styles:[".actionButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center;width:100%}"]}),o})();var f=d(3178),Q=d(2414);let H=(()=>{class o{constructor(e){this.api=e,this.categories=[],this.categoriesOriginalValues=[],this.indexes=[]}rebuildCache(e){this.api.Category.getAll({idDictionary:this.idDictionary}).then(i=>{this.categories=Object.values(i);const n=[];this.categories.forEach((r,s)=>{n.push(new Promise((g,l)=>{this.api.Entry.getAll({idDictionary:this.idDictionary,idCategory:r.id}).then(p=>{n.push(new Promise((_,w)=>{r.entries=Object.values(p),_()}))}),g()}))}),Promise.all(n).then(r=>{this.categoriesOriginalValues=JSON.parse(JSON.stringify(this.categories)),e()})})}addEntry(e,i,n){e.entries||(e.entries=[]),e.entries.push(new f.y),setTimeout(()=>{let r,s;if(this.DOMcategories){let g=this.DOMcategories.toArray()[n];g&&(r=g.nativeElement)}r||(r=document.getElementById("categoryDOM-"+n)),s=r.children[r.children.length-2].children[0],s.focus()},150)}addCategory(){this.categories.push(new Q.c(null,this.idDictionary))}changeEntry(e,i,n){e.reset?this.categories[i].entries[n]=this.categories[i].entries[n].id?new f.y(this.categoriesOriginalValues[i].entries[n]):new f.y(null,this.categories[i].id):e.delete?e.id||this.categories[i].entries.splice(n,1):e.id&&(e.update=e.entryOriginal!==this.categoriesOriginalValues[i].entries[n].entryOriginal||e.entryTranslation!==this.categoriesOriginalValues[i].entries[n].entryTranslation||e.description!==this.categoriesOriginalValues[i].entries[n].description||e.idCategory!==this.categoriesOriginalValues[i].entries[n].idCategory||e.sufix!==this.categoriesOriginalValues[i].entries[n].sufix||e.prefix!==this.categoriesOriginalValues[i].entries[n].prefix)}changeCategory(e,i){e.id&&(e.update=e.name!==this.categoriesOriginalValues[i].name)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(x.s))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var c=d(4873),u=d(4006);function F(o,a){if(1&o&&(t.TgZ(0,"option",24),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.s9C("value",e.id),t.xp6(1),t.Oqu(e.language)}}function Y(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"li",18)(1,"input",19),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).refreshTranslation()}),t.qZA(),t.TgZ(2,"input",20),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).refreshOriginal()}),t.qZA(),t.TgZ(3,"select",21),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).dictionarySelector=n})("change",function(n){return t.CHM(e),t.oxw(2).dictionarySelected(n.target.value)}),t.TgZ(4,"option",22),t._uU(5,"Choose a language"),t.qZA(),t.YNc(6,F,2,2,"option",23),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.dictionarySelector),t.xp6(3),t.Q6J("ngForOf",e.dictionaries)}}const $=function(o,a,e){return{changed:o,new:a,"category-selected":e}};function I(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"li")(2,"h1",25),t.NdJ("click",function(){const r=t.CHM(e).index;return t.oxw(2).selectOpenCategory=r}),t.TgZ(3,"input",26),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.name=n})("ngModelChange",function(){const n=t.CHM(e),r=n.$implicit,s=n.index;return t.oxw(2).changeCategory(r,s)}),t.qZA()()(),t.BQk()}if(2&o){const e=a.$implicit,i=a.index,n=t.oxw(2);t.xp6(2),t.Q6J("ngClass",t.kEZ(3,$,1==e.update,null==e.id,n.selectOpenCategory==i)),t.xp6(1),t.MGl("id","category-",i,""),t.Q6J("ngModel",e.name)}}function U(o,a){if(1&o&&(t.TgZ(0,"option",24),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.s9C("value",e.id),t.xp6(1),t.Oqu(e.name)}}function R(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"select",47),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.sufix=n})("change",function(){t.CHM(e);const n=t.oxw(),r=n.$implicit,s=n.index,g=t.oxw().index;return t.oxw(2).changeEntry(r,g,s)}),t.TgZ(1,"option",48),t._uU(2,"Select a Category for the suffix"),t.qZA(),t.YNc(3,U,2,2,"option",23),t.qZA()}if(2&o){const e=t.oxw(),i=e.index,n=e.$implicit,r=t.oxw().index,s=t.oxw(2);t.hYB("id","entry-",r,"-",i,"-sufix"),t.Q6J("ngModel",n.sufix),t.xp6(3),t.Q6J("ngForOf",s.categories)}}function j(o,a){if(1&o&&(t.TgZ(0,"option",24),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.s9C("value",e.id),t.xp6(1),t.Oqu(e.name)}}function V(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"select",47),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.prefix=n})("change",function(){t.CHM(e);const n=t.oxw(),r=n.$implicit,s=n.index,g=t.oxw().index;return t.oxw(2).changeEntry(r,g,s)}),t.TgZ(1,"option",48),t._uU(2,"Select a Category for the Prefix"),t.qZA(),t.YNc(3,j,2,2,"option",23),t.qZA()}if(2&o){const e=t.oxw(),i=e.index,n=e.$implicit,r=t.oxw().index,s=t.oxw(2);t.hYB("id","entry-",r,"-",i,"-prefix"),t.Q6J("ngModel",n.prefix),t.xp6(3),t.Q6J("ngForOf",s.categories)}}const G=function(o,a,e){return{changed:o,deleted:a,new:e}},z=function(o,a,e,i){return{fas:o,"fa-angle-right":a,"fa-angle-left":e,"far fa-times-circle":i}},W=function(o,a){return{"entry-translation-half":o,"entry-translation":a}};function K(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",32)(1,"input",33,34),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.entryOriginal=n})("focus",function(){const r=t.CHM(e).index;return t.oxw(3).selectedEntry=r})("ngModelChange",function(){const n=t.CHM(e),r=n.$implicit,s=n.index,g=t.oxw().index;return t.oxw(2).changeEntry(r,g,s)}),t.qZA(),t.TgZ(3,"label",35),t._UZ(4,"i",16),t.TgZ(5,"input",36),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.sefixButton=n})("change",function(){const n=t.CHM(e),r=n.$implicit,s=n.index,g=t.oxw().index;return t.oxw(2).activateSufix(r,g,s)}),t.qZA()(),t.YNc(6,R,4,4,"select",37),t.TgZ(7,"input",38),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.entryTranslation=n})("focus",function(){const r=t.CHM(e).index;return t.oxw(3).selectedEntry=r})("ngModelChange",function(){const n=t.CHM(e),r=n.$implicit,s=n.index,g=t.oxw().index;return t.oxw(2).changeEntry(r,g,s)}),t.qZA(),t.YNc(8,V,4,4,"select",37),t.TgZ(9,"input",39),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.description=n})("focus",function(){const r=t.CHM(e).index;return t.oxw(3).selectedEntry=r})("ngModelChange",function(){const n=t.CHM(e),r=n.$implicit,s=n.index,g=t.oxw().index;return t.oxw(2).changeEntry(r,g,s)}),t.qZA(),t.TgZ(10,"label",40),t._UZ(11,"i",41),t.TgZ(12,"input",42),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.delete=n})("change",function(){const n=t.CHM(e),r=n.$implicit,s=n.index,g=t.oxw().index;return t.oxw(2).changeEntry(r,g,s)}),t.qZA()(),t.TgZ(13,"label",43),t._UZ(14,"i",44),t.TgZ(15,"input",45),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.reset=n})("change",function(){const n=t.CHM(e),r=n.$implicit,s=n.index,g=t.oxw().index;return t.oxw(2).changeEntry(r,g,s)}),t.qZA()(),t.TgZ(16,"input",46),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.idCategory=n}),t.qZA()()}if(2&o){const e=a.$implicit,i=a.index,n=t.oxw().index;t.Q6J("ngClass",t.kEZ(18,G,1==e.update,1==e.delete,null==e.id)),t.xp6(1),t.hYB("id","entry-",n,"-",i,""),t.Q6J("ngModel",e.entryOriginal),t.xp6(3),t.Q6J("ngClass",t.l5B(22,z,e.sufix||e.prefix,e.sufix,e.prefix,!e.sufix&&!e.prefix)),t.xp6(1),t.Q6J("ngModel",e.sefixButton),t.xp6(1),t.Q6J("ngIf",e.sufix),t.xp6(1),t.hYB("id","entry-",n,"-",i,"-trans"),t.Q6J("ngClass",t.WLB(27,W,e.sufix||e.prefix,!e.sufix&&!e.prefix))("ngModel",e.entryTranslation),t.xp6(1),t.Q6J("ngIf",e.prefix),t.xp6(1),t.hYB("id","entry-",n,"-",i,"-desc"),t.Q6J("ngModel",e.description),t.xp6(3),t.Q6J("ngModel",e.delete),t.xp6(3),t.Q6J("ngModel",e.reset),t.xp6(1),t.Q6J("ngModel",e.idCategory)}}const m=function(o){return{hidden:o}};function X(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"li",16)(2,"div",27,28),t.YNc(4,K,17,30,"div",29),t._UZ(5,"div",30),t.qZA(),t.TgZ(6,"input",31),t.NdJ("click",function(){const n=t.CHM(e),r=n.$implicit,s=n.index;return t.oxw(2).addEntry(r,r.id,s)}),t.qZA()(),t.BQk()}if(2&o){const e=a.$implicit,i=a.index,n=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(3,m,n.selectOpenCategory!=i)),t.xp6(1),t.MGl("id","categoryDOM-",i,""),t.xp6(2),t.Q6J("ngForOf",e.entries)}}function tt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"ul"),t.YNc(2,Y,7,2,"li",4),t.qZA(),t.TgZ(3,"ul")(4,"li",5)(5,"input",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveModifications()}),t.qZA(),t.TgZ(6,"input",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().openOutside(!0)}),t.qZA(),t.TgZ(7,"input",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().openOutside(!1)}),t.qZA()()(),t.TgZ(8,"div",9)(9,"ul",10),t.YNc(10,I,4,7,"ng-container",11),t.TgZ(11,"li")(12,"h1",12)(13,"input",13),t.NdJ("click",function(){return t.CHM(e),t.oxw().addCategory()}),t.qZA()()()(),t.TgZ(14,"div",14)(15,"ul",15)(16,"li",16)(17,"p",17),t._uU(18," <- Select a category "),t.qZA()(),t.YNc(19,X,7,5,"ng-container",11),t.qZA()()(),t.TgZ(20,"ul")(21,"li",5)(22,"input",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveModifications()}),t.qZA(),t.TgZ(23,"input",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().openOutside(!0)}),t.qZA(),t.TgZ(24,"input",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().openOutside(!1)}),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.dictionaries.length>0),t.xp6(3),t.Q6J("disabled",e.saving),t.xp6(5),t.Q6J("ngForOf",e.categories),t.xp6(6),t.Q6J("ngClass",t.VKq(6,m,e.selectOpenCategory>=0)),t.xp6(3),t.Q6J("ngForOf",e.categories),t.xp6(3),t.Q6J("disabled",e.saving)}}let P=(()=>{class o extends H{constructor(e,i){super(e),this.api=e,this.route=i,this.Sidebar2Chapter=new t.vpe,this.dictionaries=[],this.categories=[],this.dictionarySelector="",this.shortcuts=[],this.selectOpenCategory=-1,this.selectedEntry=-1,this.getSelectedEntryType=n=>{let r=n.split("-");return r[3]?"-"+r[3]:""},this.moveFocus=(n,r)=>{let s=document.getElementById(n);s?(s.focus(),s.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})):console.error(n),r&&console.log({output:r.key,category:this.selectOpenCategory,categoryLength:this.categories.length,entry:this.selectedEntry,entryLength:this.categories[this.selectOpenCategory].entries?.length,target:r?.event.target})},this.moveCurrentCategory=n=>{this.moveFocus("category-"+this.selectOpenCategory,n)},this.moveCurrentEntry=(n="",r)=>{this.moveFocus("entry-"+this.selectOpenCategory+"-"+this.selectedEntry+n,r)},this.saving=!1}ngOnInit(){this.idNovel=this.route.snapshot.params.idNovel,this.api.Dictionary.getAll({idNovel:this.idNovel}).then(e=>{this.dictionaries=e,this.dictionarySelector=e[0].id,this.dictionarySelected(this.dictionarySelector)})}ngOnDestroy(){delete this.dictionaries,delete this.categories,delete this.categoriesOriginalValues,delete this.idCategory,delete this.idDictionary,delete this.idNovel,delete this.dictionarySelector,console.log("destroy Sidebar")}dictionarySelected(e){this.idDictionary=e,this.getCache()}getCache(){0===this.categories.length?this.api.Dictionary.getCache(this.idDictionary).then(e=>{this.PrepareCacheThenTranslate(e)}):this.refreshTranslation()}PrepareCacheThenTranslate(e){e&&new Promise((n,r)=>{this.rebuildCache(n)}).then(n=>{this.refreshTranslation()})}refreshTranslation(){this.Sidebar2Chapter.emit(this.categories)}refreshOriginal(){this.Sidebar2Chapter.emit([])}saveModifications(){this.saving=!0,this.api.Dictionary.fullSave(this.idDictionary,this.categories).then(e=>{this.categories=[],this.getCache(),this.refreshTranslation(),this.saving=!1,console.log("saveModifications",e)}).catch(e=>{this.saving=!1,console.error(e)})}openOutside(e){let n=`${v.N.backendServer}/static/${this.idNovel}/${this.idDictionary}/${this.route.snapshot.params.noChapter}/`;e&&(n="https://translate.google.com/translate?sl=auto&tl=en&u="+n),window.open(n)}textPointer(e,i){this.selectOpenCategory=e,this.selectedEntry=i,console.log("TESTES",this.selectOpenCategory,this.selectedEntry),setTimeout(()=>{this.moveCurrentEntry("")},100)}activateSufix(e,i,n){switch(!0){case!!e.sufix:e.sufix=null,e.prefix=this.categories[0].id;break;case!!e.prefix:e.sufix=null,e.prefix=null;break;default:e.sufix=this.categories[0].id,e.prefix=null}this.changeEntry(e,i,n)}ngAfterViewInit(){this.shortcuts.push({key:["f5"],preventDefault:!0,label:"Dictionary",description:"Refresh Translation",allowIn:[c.Mv.ContentEditable,c.Mv.Input,c.Mv.Select,c.Mv.Textarea],command:e=>{this.refreshTranslation()}},{key:["f4"],preventDefault:!0,label:"Dictionary",description:"Refresh to Original",allowIn:[c.Mv.ContentEditable,c.Mv.Input,c.Mv.Select,c.Mv.Textarea],command:e=>{this.refreshOriginal()}},{key:["ctrl + s"],preventDefault:!0,label:"Dictionary",description:"Save Modifications",allowIn:[c.Mv.ContentEditable,c.Mv.Input,c.Mv.Select,c.Mv.Textarea],command:e=>{this.saveModifications()}},{key:["ctrl + up","ctrl + alt + up"],preventDefault:!0,label:"Categories",description:"Category Up",allowIn:[c.Mv.ContentEditable,c.Mv.Input,c.Mv.Select,c.Mv.Textarea],command:e=>{this.selectedEntry=-1,this.selectOpenCategory>0?this.selectOpenCategory--:this.selectOpenCategory=this.categories.length-1,this.moveCurrentCategory(e)}},{key:["ctrl + down","ctrl + alt + down"],preventDefault:!0,label:"Categories",description:"Category Down",allowIn:[c.Mv.ContentEditable,c.Mv.Input,c.Mv.Select,c.Mv.Textarea],command:e=>{this.selectedEntry=-1,this.selectOpenCategory<this.categories.length-1?this.selectOpenCategory++:this.selectOpenCategory=0,this.moveCurrentCategory(e)}},{key:["ctrl + alt + plus","ctrl + alt + n"],preventDefault:!0,label:"Categories",description:"Add New Category",allowIn:[c.Mv.ContentEditable,c.Mv.Input,c.Mv.Select,c.Mv.Textarea],command:e=>{this.addCategory(),this.selectOpenCategory=this.categories.length-1,setTimeout(()=>{this.moveCurrentCategory(e)},100)}},{key:"alt + down",preventDefault:!0,label:"Entries",description:"Move Down on Entry List",allowIn:[c.Mv.ContentEditable,c.Mv.Input,c.Mv.Select,c.Mv.Textarea],command:e=>{if(this.selectOpenCategory<0&&(this.selectOpenCategory=0),this.categories[this.selectOpenCategory].entries){this.selectedEntry>=this.categories[this.selectOpenCategory].entries.length-1?this.selectedEntry=0:this.selectedEntry++;let i=e.event.target,n=i.id?this.getSelectedEntryType(i.id):"";("-sufix"==n&&!this.categories[this.selectOpenCategory].entries[this.selectedEntry].sufix||"-prefix"==n&&!this.categories[this.selectOpenCategory].entries[this.selectedEntry].prefix)&&(n="-trans"),this.moveCurrentEntry(n,e)}}},{key:"alt + up",preventDefault:!0,label:"Entries",description:"Move Up on Entry List",allowIn:[c.Mv.ContentEditable,c.Mv.Input,c.Mv.Select,c.Mv.Textarea],command:e=>{if(this.selectOpenCategory<0&&(this.selectOpenCategory=0),this.categories[this.selectOpenCategory].entries){this.selectedEntry<=0?this.selectedEntry=this.categories[this.selectOpenCategory].entries.length-1:this.selectedEntry--;let i=e.event.target,n=i.id?this.getSelectedEntryType(i.id):"";("-sufix"==n&&!this.categories[this.selectOpenCategory].entries[this.selectedEntry].sufix||"-prefix"==n&&!this.categories[this.selectOpenCategory].entries[this.selectedEntry].prefix)&&(n="-trans"),this.moveCurrentEntry(n,e)}}},{key:"alt + right",preventDefault:!0,label:"Entries",description:"Move Right on Entry List",allowIn:[c.Mv.ContentEditable,c.Mv.Input,c.Mv.Select,c.Mv.Textarea],command:e=>{if(this.selectOpenCategory<0||!this.categories[this.selectOpenCategory].entries)return;let i=e.event.target;if(0!==i.id.indexOf("entry-"))return;let n=i.id?this.getSelectedEntryType(i.id):"";switch(n){case"":n=this.categories[this.selectOpenCategory].entries[this.selectedEntry].sufix?"-sufix":"-trans";break;case"-sufix":n="-trans";break;case"-trans":n=this.categories[this.selectOpenCategory].entries[this.selectedEntry].prefix?"-prefix":"-desc";break;case"-prefix":n="-desc"}this.moveCurrentEntry(n,e)}},{key:"alt + left",preventDefault:!0,label:"Entries",description:"Move Left on Entry List",allowIn:[c.Mv.ContentEditable,c.Mv.Input,c.Mv.Select,c.Mv.Textarea],command:e=>{if(this.selectOpenCategory<0||!this.categories[this.selectOpenCategory].entries)return;let i=e.event.target;if(0!==i.id.indexOf("entry-"))return;let n=i.id?this.getSelectedEntryType(i.id):"";switch(n){case"-desc":n=this.categories[this.selectOpenCategory].entries[this.selectedEntry].prefix?"-prefix":"-trans";break;case"-prefix":n="-trans";break;case"-trans":n=this.categories[this.selectOpenCategory].entries[this.selectedEntry].sufix?"-sufix":"";break;case"-sufix":n=""}this.moveCurrentEntry(n,e)}},{key:["alt + home","alt + 1"],preventDefault:!0,label:"Entries",description:"Move to First Entry",allowIn:[c.Mv.ContentEditable,c.Mv.Input,c.Mv.Select,c.Mv.Textarea],command:e=>{if(this.selectOpenCategory<0&&(this.selectOpenCategory=0),this.categories[this.selectOpenCategory].entries){this.selectedEntry=0;let i=e.event.target,n=i.id?this.getSelectedEntryType(i.id):"";this.moveCurrentEntry(n,e)}}},{key:"alt + end",preventDefault:!0,label:"Entries",description:"Move to Last Entry",allowIn:[c.Mv.ContentEditable,c.Mv.Input,c.Mv.Select,c.Mv.Textarea],command:e=>{if(this.selectOpenCategory<0&&(this.selectOpenCategory=0),this.categories[this.selectOpenCategory].entries){this.selectedEntry=this.categories[this.selectOpenCategory].entries.length-1;let i=e.event.target,n=i.id?this.getSelectedEntryType(i.id):"";this.moveCurrentEntry(n,e)}}},{key:["alt + plus","alt + insert","alt + n"],preventDefault:!0,label:"Entries",description:"Add New Entry",allowIn:[c.Mv.ContentEditable,c.Mv.Input,c.Mv.Select,c.Mv.Textarea],command:e=>{this.selectOpenCategory<0||(this.addEntry(this.categories[this.selectOpenCategory],this.categories[this.selectOpenCategory].id,this.selectOpenCategory),this.selectedEntry=this.categories[this.selectOpenCategory].entries.length-1,setTimeout(()=>{this.moveCurrentEntry("",e)},100))}},{key:["alt + -","alt + d"],preventDefault:!0,label:"Entries",description:"Remove Entry",allowIn:[c.Mv.ContentEditable,c.Mv.Input,c.Mv.Select,c.Mv.Textarea],command:e=>{if(this.selectOpenCategory<0||this.selectedEntry<0)return;let i=this.categories[this.selectOpenCategory].entries[this.selectedEntry];i.delete=!i.delete}},{key:["alt + *","alt + r"],preventDefault:!0,label:"Entries",description:"Return Entry to normal",allowIn:[c.Mv.ContentEditable,c.Mv.Input,c.Mv.Select,c.Mv.Textarea],command:e=>{if(this.selectOpenCategory<0||this.selectedEntry<0)return;let i=this.categories[this.selectOpenCategory].entries[this.selectedEntry];i.reset=!0,this.changeEntry(i,this.selectOpenCategory,this.selectedEntry),setTimeout(()=>{this.moveFocus(e.event.target.id)},100)}},{key:["alt + s"],preventDefault:!0,label:"Entries",description:"Toggle Suffix/Prefix",allowIn:[c.Mv.ContentEditable,c.Mv.Input,c.Mv.Select,c.Mv.Textarea],command:e=>{this.selectOpenCategory<0||this.selectedEntry<0||this.activateSufix(this.categories[this.selectOpenCategory].entries[this.selectedEntry],this.selectOpenCategory,this.selectedEntry)}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.s),t.Y36(h.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-chapter-sidebar"]],viewQuery:function(e,i){if(1&e&&t.Gf(c.xj,5),2&e){let n;t.iGM(n=t.CRH())&&(i.keyboard=n.first)}},outputs:{Sidebar2Chapter:"Sidebar2Chapter"},features:[t.qOj],decls:3,vars:4,consts:[["class","dictionaryList",4,"ngIf"],[3,"shortcuts"],[3,"key","title"],[1,"dictionaryList"],["class","dictionary-selector",4,"ngIf"],[1,"dictionary-buttons"],["type","button","value","Save Modifications",1,"button","is-small","is-danger",3,"disabled","click"],["type","button","value","Google Translate",1,"button","is-small","is-info",3,"click"],["type","button","value","Open Keyword Translated Raw",1,"button","is-small","is-warning",3,"click"],[1,"interactiveBox"],[1,"categories"],[4,"ngFor","ngForOf"],[1,"categoryButtonRow"],["type","button","value","+ Add new Category",1,"button","is-small","is-primary",3,"click"],[1,"entries"],[1,"entries-container"],[3,"ngClass"],[1,"hint"],[1,"dictionary-selector"],["type","button","value","Refresh Translation",1,"button","is-small","is-info",3,"click"],["type","button","value","Refresh to Original",1,"button","is-small","is-warning",3,"click"],[1,"select",3,"ngModel","ngModelChange","change"],["value","","selected","selected"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"ngClass","click"],["type","text","placeholder","Category Name",1,"category-name",3,"ngModel","id","ngModelChange"],[1,"category-entry-container",3,"id"],["categoryDOM",""],["class","entry",3,"ngClass",4,"ngFor","ngForOf"],[1,"entry-spacer"],["type","button","value","+ Add new Entry",1,"addNewEntryButton",3,"click"],[1,"entry",3,"ngClass"],["type","text","placeholder","Original",1,"entry-original",3,"ngModel","id","ngModelChange","focus"],["entry",""],[1,"sufixButton","sidebarButton"],["type","checkbox","title","Toggle suffix/prefix on/off",1,"hidden",3,"ngModel","ngModelChange","change"],["class","select",3,"ngModel","id","ngModelChange","change",4,"ngIf"],["type","text","placeholder","Translation",3,"ngClass","ngModel","id","ngModelChange","focus"],["type","text","placeholder","Description",1,"entry-description",3,"ngModel","id","ngModelChange","focus"],[1,"deleteButton","sidebarButton"],[1,"fas","fa-trash"],["type","checkbox","title","Delete",1,"hidden",3,"ngModel","ngModelChange","change"],[1,"resetButton","sidebarButton"],[1,"fas","fa-sync-alt"],["type","checkbox","title","Reset",1,"hidden",3,"ngModel","ngModelChange","change"],["type","hidden",3,"ngModel","ngModelChange"],[1,"select",3,"ngModel","id","ngModelChange","change"],["disabled","disabled"]],template:function(e,i){1&e&&(t.YNc(0,tt,25,8,"div",0),t._UZ(1,"ng-keyboard-shortcuts",1)(2,"ng-keyboard-shortcuts-help",2)),2&e&&(t.Q6J("ngIf",i.dictionaries.length>0),t.xp6(1),t.Q6J("shortcuts",i.shortcuts),t.xp6(1),t.Q6J("key","f1")("title","Shortcut Keys"))},directives:[C.O5,u.EJ,u.JJ,u.On,u.YN,u.Kr,C.sg,C.mk,u.Fj,u.Wl,c.xj,c.iD],styles:['.dictionaryList[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;overflow-y:hidden}.dictionaryList[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{flex-grow:0;flex-basis:25px;height:25px}.dictionaryList[_ngcontent-%COMP%]   .dictionary-selector[_ngcontent-%COMP%]{align-self:flex-start;width:100%}.dictionaryList[_ngcontent-%COMP%]   .dictionary-selector[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:33.3%;height:100%}.dictionaryList[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{align-self:flex-end}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]{display:flex;flex-direction:row;overflow-y:hidden;flex-grow:1;flex-basis:auto}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{color:#fff;background:rgba(255,255,255,.5);float:left;line-height:1.4;animation-duration:.05s;animation-name:categoriesHide;width:50px}@keyframes categoriesShow{0%{width:50px}to{width:150px}}@keyframes categoriesHide{0%{width:150px}to{width:50px}}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]:hover{animation-duration:.05s;animation-name:categoriesShow;width:150px}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{height:30px;width:100%;background:#2f0050}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   h1.changed[_ngcontent-%COMP%]{background:#009013}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   h1.new[_ngcontent-%COMP%]{background:#000063}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   h1.categoryButtonRow[_ngcontent-%COMP%]{background:#00d1b2}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   h1.categoryButtonRow[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%]{background-color:transparent;border:0px solid white;color:#fff;outline-width:0px}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   .category-selected[_ngcontent-%COMP%]{border-width:2px 0px 2px 5px;border-style:solid;border-color:red}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]{width:100%;height:100%;padding:left 10;float:left;overflow:hidden;z-index:1;background-color:#5e009f}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{background:black;color:#fff;height:100%}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]{height:100%}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:100%;position:relative;overflow-x:auto}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]{flex-direction:row;overflow-y:auto;overflow-x:hidden;height:100%;height:calc(100% - 30px);width:100%}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{box-sizing:border-box}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]{width:100%;min-width:630px;height:25px;display:flex;flex-direction:row}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]:focus-within{background-color:#fff3!important}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:0px solid white;color:#fff}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]   .entry-original[_ngcontent-%COMP%], .dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]   .entry-translation[_ngcontent-%COMP%], .dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]   .sidebarButton[_ngcontent-%COMP%], .dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{flex-grow:0}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]   .entry-original[_ngcontent-%COMP%]{flex-basis:100px}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]   .entry-translation[_ngcontent-%COMP%], .dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]   .entry-translation-half[_ngcontent-%COMP%]{min-width:30px}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]   .entry-translation[_ngcontent-%COMP%]{flex-basis:150px}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]   .entry-translation-half[_ngcontent-%COMP%]{flex-basis:75px}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]   .entry-description[_ngcontent-%COMP%]{flex-grow:1}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{flex-basis:75px;max-width:75px;color:#fff;background-color:#000;outline:0px solid #000;border:0px solid #000;height:100%}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]:focus{outline:1px solid blue}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]   .sufixButton[_ngcontent-%COMP%]{color:pink}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]   .deleteButton[_ngcontent-%COMP%]{color:red}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]   .resetButton[_ngcontent-%COMP%]{color:#00f}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]   .sidebarButton[_ngcontent-%COMP%]{flex-basis:14px;margin:0 8px;text-align:center}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]:after{clear:both;content:"";display:block}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]:nth-child(odd){background-color:#555}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]:nth-child(even){background-color:#888}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry.changed[_ngcontent-%COMP%]{background-color:green}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry.new[_ngcontent-%COMP%]{background-color:#000063}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .category-entry-container[_ngcontent-%COMP%]   .entry.deleted[_ngcontent-%COMP%]{background-color:#480000}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .entry-spacer[_ngcontent-%COMP%]{height:200px}.dictionaryList[_ngcontent-%COMP%]   .interactiveBox[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entries-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .addNewEntryButton[_ngcontent-%COMP%]{position:absolute;bottom:0px;left:0px;width:100%;height:30px;text-align:left;border-width:2px 0;border-color:#009013;background-color:#000;color:#fff}.dictionaryList[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}.dictionaryList[_ngcontent-%COMP%]   .dictionary-buttons[_ngcontent-%COMP%]{width:100%}.dictionaryList[_ngcontent-%COMP%]   .dictionary-buttons[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:33.3%;height:100%}']}),o})();var T=d(1481);function et(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"a",15),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).chapterRoute.previous()}),t._uU(1," Previous "),t.qZA()}}function nt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"a",15),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).chapterRoute.next()}),t._uU(1," Next "),t.qZA()}}const it=function(o){return["/novel/",o]};function ot(o,a){if(1&o&&(t.TgZ(0,"div",11)(1,"div",12),t.YNc(2,et,2,0,"a",13),t.qZA(),t.TgZ(3,"div",12)(4,"a",14),t._uU(5," Table of Contents "),t.qZA()(),t.TgZ(6,"div",12),t.YNc(7,nt,2,0,"a",13),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.chapterPrevious),t.xp6(2),t.Q6J("routerLink",t.VKq(3,it,e.idNovel)),t.xp6(3),t.Q6J("ngIf",e.chapterNext)}}function rt(o,a){1&o&&t.GkF(0)}function ct(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"h1",16),t._uU(2),t.qZA(),t._UZ(3,"hr")(4,"div",17),t.ALo(5,"safeHtml"),t.BQk()),2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.renderedTitle),t.xp6(2),t.Q6J("innerHTML",t.lcZ(5,2,e.renderedText),t.oJD)}}function st(o,a){1&o&&t.GkF(0)}let at=(()=>{class o{constructor(e){this.sanitized=e}transform(e){return this.sanitized.bypassSecurityTrustHtml(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(T.H7,16))},o.\u0275pipe=t.Yjl({name:"safeHtml",type:o,pure:!0}),o})(),b=(()=>{class o{constructor(e,i,n,r,s){this.router=e,this.route=i,this.sanitized=n,this.api=r,this.viewport=s,this.shortcuts=[],this.chapterRoute={next:()=>{document.getElementById("content").scrollTop=0,this.router.navigate(["novel",this.idNovel,this.chapterNext.no])},previous:()=>{document.getElementById("content").scrollTop=0,this.router.navigate(["novel",this.idNovel,this.chapterPrevious.no])}},this.showSidebar=!0}ngOnInit(){this.loadedChapter=new Promise(e=>{this.loadedChapterResolve=e}),this.startContent()}ngAfterViewInit(){this.shortcuts.push({key:"alt + pageup",preventDefault:!0,label:"Chapter",description:"Previous Chapter",command:e=>{this.chapterRoute.previous()}},{key:"alt + pagedown",preventDefault:!0,label:"Chapter",description:"Next Chapter",command:e=>{this.chapterRoute.next()}})}ngOnDestroy(){delete this.loadedChapter,console.log("destroy detailed chapter")}ngDoCheck(){this.noChapter!==this.route.snapshot.params.noChapter&&(console.log("changing chapter",this.Sidebar.categories),this.ngOnInit(),this.translateText(this.Sidebar.categories))}startContent(){this.idNovel=this.route.snapshot.params.idNovel,this.noChapter=this.route.snapshot.params.noChapter,Promise.all([this.api.Novel.get({id:this.idNovel}),this.api.Chapter.get({idNovel:this.idNovel,no:this.noChapter,text:!0})]).then(e=>{this.novel=e[0],this.chapter=e[1],this.renderDataView(),this.cacheAdjecentChapters(this.noChapter-0),this.loadedChapterResolve()})}cacheAdjecentChapters(e){const i=e-1;i>0&&this.api.Chapter.get({idNovel:this.idNovel,no:i,text:!0}).then(r=>{this.chapterPrevious=r});const n=e-0+1;n<=this.novel.numberChapters&&this.api.Chapter.get({idNovel:this.idNovel,no:n,text:!0}).then(r=>{this.chapterNext=r})}renderDataView(){this.renderedTitle=this.chapter.title,this.renderedText=this.chapter.textRevision?this.chapter.textRevision:this.chapter.textOriginal}translateText(e){this.loadedChapter.then(i=>{if(this.renderDataView(),e.length>0){const n=[];e.forEach((g,l)=>{g.entries&&g.entries.forEach((p,_)=>{if(p.entryOriginal){let w=new RegExp("(\\p{P})+","gu");const E=p.entryOriginal.replace(w,""),M=E.length;n[M]||(n[M]=[]),n[M].push({entryOriginal:p.entryOriginal,entryTranslation:p.entryTranslation,description:p.description,sufix:p.sufix,prefix:p.prefix,id:p.id,idCategory:g.id,category:g.name,simplified:E,index:[l,_]})}})});for(let g=n.length;g>0;--g)n[g]&&n[g].forEach((l,p)=>{if(l.entryOriginal!=l.entryTranslation)if(l.sufix){const _=new RegExp("]"+l.sufix+"]"+l.entryOriginal,"g");this.renderedTitle=this.renderedTitle.replace(_,l.entryTranslation+"]"+l.idCategory+"]"),this.renderedText=this.renderedText.replace(_,'<span class="replaced sufix" '+(l.description?`title="${l.description}"`:"")+' id="replaced-'+l.index[0]+"-"+l.index[1]+'">'+l.entryTranslation+"</span>]"+l.idCategory+"]")}else if(l.prefix){const _=new RegExp(l.entryOriginal+"["+l.idCategory+"[","g");this.renderedTitle=this.renderedTitle.replace(_,"["+l.idCategory+"["+l.entryTranslation),this.renderedText=this.renderedText.replace(_,"["+l.idCategory+'[<span class="replaced prefix" '+(l.description?`title="${l.description}"`:"")+' id="replaced-'+l.index[0]+"-"+l.index[1]+'">'+l.entryTranslation+"</span>")}else{const _=new RegExp(l.entryOriginal,"g");this.renderedTitle=this.renderedTitle.replace(_,"["+l.idCategory+"["+l.entryTranslation+"]"+l.idCategory+"]"),this.renderedText=this.renderedText.replace(_,"["+l.idCategory+'[<span class="replaced" '+(l.description?`title="${l.description}"`:"")+' id="replaced-'+l.index[0]+"-"+l.index[1]+'">'+l.entryTranslation+"</span>]"+l.idCategory+"]")}});const r="\\][0-9]+\\]",s="\\[[0-9]+\\[";try{let g=new RegExp("("+r+s+")+","gm");this.renderedTitle=this.renderedTitle.replace(g," "),this.renderedText=this.renderedText.replace(g," "),g=new RegExp("("+r+")+","gm"),this.renderedTitle=this.renderedTitle.replace(g,""),this.renderedText=this.renderedText.replace(g,""),g=new RegExp("("+s+")+","gm"),this.renderedTitle=this.renderedTitle.replace(g,""),this.renderedText=this.renderedText.replace(g,"")}catch(g){console.info(r+s),console.error(g)}setTimeout(()=>{Array.from(document.getElementsByClassName("replaced")).forEach(l=>{l.addEventListener("click",p=>{let _=p.target.id.split("-");this.Sidebar.textPointer(_[1],_[2])})})},200)}})}toogleSidebar(){this.showSidebar=!this.showSidebar}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.F0),t.Y36(h.gz),t.Y36(T.H7),t.Y36(x.s),t.Y36(C.EM))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-chapter-detail"]],viewQuery:function(e,i){if(1&e&&(t.Gf(P,5),t.Gf(c.xj,5)),2&e){let n;t.iGM(n=t.CRH())&&(i.Sidebar=n.first),t.iGM(n=t.CRH())&&(i.keyboard=n.first)}},decls:13,vars:7,consts:[[1,"flexContent"],[1,"sidebar",3,"hidden"],[3,"Sidebar2Chapter"],["SidebarChild",""],["id","content",1,"content"],["Content",""],["controlButtons",""],[4,"ngTemplateOutlet"],[4,"ngIf"],[3,"shortcuts"],[3,"key","title"],[1,"columns","controlButtons"],[1,"column"],["class","button is-large is-primary",3,"click",4,"ngIf"],[1,"button","is-large","is-primary",3,"routerLink"],[1,"button","is-large","is-primary",3,"click"],[1,"title"],[1,"novel-content",3,"innerHTML"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"app-chapter-sidebar",2,3),t.NdJ("Sidebar2Chapter",function(r){return i.translateText(r)}),t.qZA()(),t.TgZ(4,"div",4,5),t.YNc(6,ot,8,5,"ng-template",null,6,t.W1O),t.YNc(8,rt,1,0,"ng-container",7),t.YNc(9,ct,6,4,"ng-container",8),t.YNc(10,st,1,0,"ng-container",7),t.qZA()(),t._UZ(11,"ng-keyboard-shortcuts",9)(12,"ng-keyboard-shortcuts-help",10)),2&e){const n=t.MAs(7);t.xp6(1),t.Q6J("hidden",!i.showSidebar),t.xp6(7),t.Q6J("ngTemplateOutlet",n),t.xp6(1),t.Q6J("ngIf",i.chapter),t.xp6(1),t.Q6J("ngTemplateOutlet",n),t.xp6(1),t.Q6J("shortcuts",i.shortcuts),t.xp6(1),t.Q6J("key","f1")("title","Help")}},styles:[".controlButtons{margin-top:1px}.controlButtons a{width:100%;text-align:center}.content>h1.title{color:#fff}.novel-content{color:#fff}.novel-content .replaced{background-color:#636363}.novel-content .replaced.sufix{background-color:#ce7474}.novel-content .replaced.prefix{background-color:#7476ce}.flexContent{display:flex;flex-direction:row;width:100%;height:100%}.flexContent .sidebar{z-index:20;width:400px;position:fixed;left:0px;margin-right:10px;height:calc(100% - 100px);top:100px;bottom:0px;overflow-y:auto;background:#5e009f}.flexContent .sidebar:hover{width:80%;max-width:800px}.flexContent .content{width:calc(100% - 400px);height:calc(100% - 100px);right:0px;position:fixed;overflow-y:auto;overflow-x:hidden}.help-modal__body{min-width:700px}\n"],encapsulation:2}),o})();const lt=[{path:"",component:q,data:{title:"List Chapters"}},{path:"dictionary",loadChildren:()=>d.e(125).then(d.bind(d,8125)).then(o=>o.DictionaryModule),data:{title:"View dictionary",breadcrumb:"Dictionaries"}},{path:":noChapter",component:b,data:{title:"View chapter",breadcrumb:"View Chapter"}},{path:"**",redirectTo:""}];let gt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.Bz.forChild(lt)],h.Bz]}),o})(),dt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[C.ez,gt,h.Bz,u.u5,c.Ux.forRoot()]]}),o})();t.B6R(b,[P,C.O5,h.yS,C.tP,c.xj,c.iD],[at])}}]);