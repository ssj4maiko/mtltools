"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[349],{349:($,u,a)=>{a.r(u),a.d(u,{NovelModule:()=>D});var c=a(6895),m=a(1457),h=a(314),l=a(4719),p=a(4868);class v{constructor(o){Object.assign(this,o)}}var t=a(6738);let f=(()=>{class i{constructor(e){this.formBuilder=e,this.selectDictionaries=[],this.selectDrivers=[],this.indexes=[],this.formGroup=e.group({id:[null],code:[null],nameOriginal:[null],nameCustom:[null],addedBy:[null],dictionary:[null],driver:[null],flagR18:[null],completed:[null],show:[null]})}loadMeta(e,n){this.selectDrivers=[];for(const r of Object.keys(e.drivers))this.selectDrivers.push(new p.Wx(r,e.drivers[r]));this.selectDictionaries=[];for(const r of Object.keys(n))this.selectDictionaries.push(new p.Wx(r+"",n[r].name,!1))}addForm(e,n,r,s){this.indexes.push(e),this.form.push(new p.Wi(e,n,r,s))}getForm(e){this.form=[],e&&this.addForm("id","","hidden"),this.addForm("code","Syosetsu code","text"),this.addForm("nameOriginal","Original Name","text"),this.addForm("nameCustom","Translated Name","text"),e&&this.addForm("addedBy","Added by","text"),this.addForm("dictionary","Dictionaries","multiselect",this.selectDictionaries),this.addForm("driver","Driver","select",this.selectDrivers),this.addForm("flagR18","R18?","checkbox"),this.addForm("completed","Completed?","checkbox"),this.addForm("show","Show on list?","checkbox")}setValues(e,n){const r=n.map(d=>d.id+""),s=new l.Oe(this.selectDictionaries.map(d=>(r.includes(d.value)&&d.setChecked(!0),d.control)));this.formGroup.setValue({id:e.id,code:e.code,nameOriginal:e.nameOriginal,nameCustom:e.nameCustom,addedBy:e.addedBy,dictionary:s,driver:e.driver,flagR18:e.flagR18,completed:e.completed,show:e.show})}getValues(e){const n={novel:null,dictionaries:null};n.novel=new v(this.formGroup.value),delete n.novel.dictionary;const r=this.indexes.indexOf("dictionary");if(n.dictionaries=this.form[r].getValues().map(s=>parseInt(s,10)),e&&e.length===n.dictionaries.length){const s=e.map(d=>d.id);JSON.stringify(s)===JSON.stringify(n.dictionaries)&&delete n.dictionaries}return n}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(l.qu))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var g=a(6845);function _(i,o){if(1&i&&(t.ynx(0,null,12),t._UZ(2,"input",13),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.s9C("formControlName",e.name)}}function x(i,o){if(1&i&&(t.ynx(0,null,14),t.TgZ(2,"label",15),t._UZ(3,"input",16),t._uU(4),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(3),t.s9C("formControlName",e.name),t.xp6(1),t.hij(" ",e.label," ")}}function C(i,o){if(1&i&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.label)}}function N(i,o){if(1&i&&(t.ynx(0,null,14),t.TgZ(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"div",5)(5,"select",17),t.YNc(6,C,2,2,"option",18),t.qZA()(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.label),t.xp6(2),t.s9C("formControlName",e.name),t.xp6(1),t.Q6J("ngForOf",e.options)}}function Z(i,o){if(1&i&&(t.TgZ(0,"p")(1,"label"),t._UZ(2,"input",21),t._uU(3),t.qZA()()),2&i){const e=o.$implicit;t.xp6(2),t.Q6J("formControl",e.control),t.xp6(1),t.hij(" ",e.label," ")}}function b(i,o){if(1&i&&(t.ynx(0,null,14),t.TgZ(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t.YNc(5,Z,4,2,"p",20),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(3),t.AsE("",e.label," - ",e.name,""),t.xp6(2),t.Q6J("ngForOf",e.options)}}function y(i,o){if(1&i&&(t.ynx(0,null,22),t.TgZ(2,"label",23),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t._UZ(5,"input",24),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.s9C("for",e.name),t.xp6(1),t.Oqu(e.label),t.xp6(2),t.s9C("type",e.type),t.s9C("id",e.name),t.s9C("formControlName",e.name)}}function T(i,o){if(1&i&&(t.TgZ(0,"div",8),t.ynx(1,9),t.YNc(2,_,3,1,"ng-container",10),t.YNc(3,x,5,2,"ng-container",10),t.YNc(4,N,7,3,"ng-container",10),t.YNc(5,b,6,3,"ng-container",10),t.YNc(6,y,6,5,"ng-container",11),t.BQk(),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","hidden"),t.xp6(1),t.Q6J("ngSwitchCase","checkbox"),t.xp6(1),t.Q6J("ngSwitchCase","select"),t.xp6(1),t.Q6J("ngSwitchCase","multiselect")}}function A(i,o){if(1&i&&(t.ynx(0,null,12),t._UZ(2,"input",13),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.s9C("formControlName",e.name)}}function O(i,o){if(1&i&&(t.ynx(0,null,14),t.TgZ(2,"label",15),t._UZ(3,"input",16),t._uU(4),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(3),t.s9C("formControlName",e.name),t.xp6(1),t.hij(" ",e.label," ")}}function J(i,o){if(1&i&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.label)}}function w(i,o){if(1&i&&(t.ynx(0,null,14),t.TgZ(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"div",5)(5,"select",17),t.YNc(6,J,2,2,"option",18),t.qZA()(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.label),t.xp6(2),t.s9C("formControlName",e.name),t.xp6(1),t.Q6J("ngForOf",e.options)}}function k(i,o){if(1&i&&(t.TgZ(0,"p")(1,"label"),t._UZ(2,"input",21),t._uU(3),t.qZA()()),2&i){const e=o.$implicit;t.xp6(2),t.Q6J("formControl",e.control),t.xp6(1),t.hij(" ",e.label," ")}}function S(i,o){if(1&i&&(t.ynx(0,null,14),t.TgZ(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t.YNc(5,k,4,2,"p",20),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(3),t.AsE("",e.label," - ",e.name,""),t.xp6(2),t.Q6J("ngForOf",e.options)}}function Q(i,o){if(1&i&&(t.ynx(0,null,22),t.TgZ(2,"label",23),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t._UZ(5,"input",24),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.s9C("for",e.name),t.xp6(1),t.Oqu(e.label),t.xp6(2),t.s9C("type",e.type),t.s9C("id",e.name),t.s9C("formControlName",e.name)}}function Y(i,o){if(1&i&&(t.TgZ(0,"div",8),t.ynx(1,9),t.YNc(2,A,3,1,"ng-container",10),t.YNc(3,O,5,2,"ng-container",10),t.YNc(4,w,7,3,"ng-container",10),t.YNc(5,S,6,3,"ng-container",10),t.YNc(6,Q,6,5,"ng-container",11),t.BQk(),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","hidden"),t.xp6(1),t.Q6J("ngSwitchCase","checkbox"),t.xp6(1),t.Q6J("ngSwitchCase","select"),t.xp6(1),t.Q6J("ngSwitchCase","multiselect")}}const B=[{path:"",component:h.n,data:{title:"List Novels",breadcrumb:"List"}},{path:"add",component:(()=>{class i extends f{constructor(e,n,r,s){super(s),this.router=e,this.route=n,this.api=r,this.formBuilder=s}ngOnInit(){this.formTitle="Add new Novel",Promise.all([this.api.Meta.get("drivers"),this.api.Dictionary.getAll()]).then(e=>{this.loadMeta(e[0],e[1]),this.getForm(!0)})}submitForm(e){const n=this.getValues();this.api.Novel.add({values:n}).then(r=>{this.router.navigate(["/novel/",r.id])},r=>{console.log(r)})}goBack(){this.router.navigate(["/novel"])}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.F0),t.Y36(m.gz),t.Y36(g.s),t.Y36(l.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-novel-add"]],features:[t.qOj],decls:10,vars:3,consts:[[1,"form-content"],[1,"title"],[3,"formGroup","ngSubmit"],["class","field",4,"ngFor","ngForOf"],[1,"field","is-grouped"],[1,"control"],["type","submit","value","Submit",1,"button","is-link"],["value","Cancel",1,"button","is-danger",3,"click"],[1,"field"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["tempHidden",""],["type","hidden",3,"formControlName"],["tempCheck",""],[1,"checkbox"],["type","checkbox",3,"formControlName"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngFor","ngForOf"],["type","checkbox",3,"formControl"],["tempText",""],[1,"label",3,"for"],[1,"input",3,"type","id","formControlName"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return n.submitForm(n.formGroup.value)}),t.YNc(4,T,7,5,"div",3),t.TgZ(5,"div",4)(6,"div",5),t._UZ(7,"input",6),t.qZA(),t.TgZ(8,"div",5)(9,"input",7),t.NdJ("click",function(){return n.goBack()}),t.qZA()()()()()),2&e&&(t.xp6(2),t.Oqu(n.formTitle),t.xp6(1),t.Q6J("formGroup",n.formGroup),t.xp6(1),t.Q6J("ngForOf",n.form))},directives:[l._Y,l.JL,l.sg,c.sg,c.RF,c.n9,l.Fj,l.JJ,l.u,l.Wl,l.EJ,l.YN,l.Kr,l.oH,c.ED],styles:[".form-content[_ngcontent-%COMP%]{padding:30px;border-radius:10px}"]}),i})(),data:{title:"Add New Novel",breadcrumb:"Add Novel"}},{path:"edit/:idNovel",component:(()=>{class i extends f{constructor(e,n,r,s){super(s),this.router=e,this.route=n,this.api=r,this.formBuilder=s}ngOnInit(){this.idNovel=this.route.snapshot.params.idNovel,this.formTitle="Edit Novel",Promise.all([this.api.Meta.get("drivers"),this.api.Novel.get({id:this.idNovel}),this.api.Dictionary.getAll({idNovel:this.idNovel}),this.api.Dictionary.getAll()]).then(e=>{this.novel=e[1],this.dictionaries=e[2],this.loadMeta(e[0],e[3]),this.setValues(e[1],e[2]),this.getForm(!1)})}submitForm(e){const n=this.getValues(this.dictionaries);this.api.Novel.update({id:this.idNovel,values:n}).then(r=>{this.goBack()},r=>{console.log(r)})}goBack(){this.router.navigate(["/novel"])}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.F0),t.Y36(m.gz),t.Y36(g.s),t.Y36(l.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-novel-edit"]],features:[t.qOj],decls:10,vars:3,consts:[[1,"form-content"],[1,"title"],[3,"formGroup","ngSubmit"],["class","field",4,"ngFor","ngForOf"],[1,"field","is-grouped"],[1,"control"],["type","submit","value","Submit",1,"button","is-link"],["value","Cancel",1,"button","is-danger",3,"click"],[1,"field"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["tempHidden",""],["type","hidden",3,"formControlName"],["tempCheck",""],[1,"checkbox"],["type","checkbox",3,"formControlName"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngFor","ngForOf"],["type","checkbox",3,"formControl"],["tempText",""],[1,"label",3,"for"],[1,"input",3,"type","id","formControlName"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return n.submitForm(n.formGroup.value)}),t.YNc(4,Y,7,5,"div",3),t.TgZ(5,"div",4)(6,"div",5),t._UZ(7,"input",6),t.qZA(),t.TgZ(8,"div",5)(9,"input",7),t.NdJ("click",function(){return n.goBack()}),t.qZA()()()()()),2&e&&(t.xp6(2),t.Oqu(n.formTitle),t.xp6(1),t.Q6J("formGroup",n.formGroup),t.xp6(1),t.Q6J("ngForOf",n.form))},directives:[l._Y,l.JL,l.sg,c.sg,c.RF,c.n9,l.Fj,l.JJ,l.u,l.Wl,l.EJ,l.YN,l.Kr,l.oH,c.ED],styles:[".form-content[_ngcontent-%COMP%]{padding:30px;border-radius:10px}"]}),i})(),data:{title:"Edit Novel",breadcrumb:"Edit Novel"}},{path:":idNovel",loadChildren:()=>Promise.all([a.e(592),a.e(12)]).then(a.bind(a,4012)).then(i=>i.ChapterModule),data:{title:"View chapters",breadcrumb:"Chapters"}},{path:"**",redirectTo:""}];let U=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[c.ez,m.Bz.forChild(B)]]}),i})();var E=a(6920);let D=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[c.ez,U,m.Bz,l.u5,l.UX,E.uH]]}),i})()}}]);