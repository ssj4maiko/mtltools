!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{VVAt:function(t,n,o){"use strict";o.r(n),o.d(n,"DictionaryModule",(function(){return ee}));var c=o("ofXK"),a=o("tyNb"),r=o("yTNM"),l=o("fXoL"),s=function(e){return["/novel/dictionary",e,"add"]};function b(e,t){if(1&e&&(l.Ob(0,"div",5),l.Ob(1,"div",6),l.Ob(2,"a",7),l.oc(3,"Add Dictionary"),l.Nb(),l.Nb(),l.Nb()),2&e){var i=l.Xb();l.yb(2),l.ac("routerLink",l.dc(1,s,i.idNovel))}}function d(e,t){1&e&&l.Kb(0)}var u=function(e,t){return["/novel/dictionary/",e,t]},h=function(e,t){return["/novel/dictionary/",e,t,"diff"]},y=function(e,t){return["/novel/dictionary/",e,t,"edit"]},g=function(e,t){return["/novel/dictionary/",e,t,"del"]};function f(e,t){if(1&e&&(l.Mb(0),l.Ob(1,"tr",8),l.Ob(2,"td"),l.oc(3),l.Nb(),l.Ob(4,"td"),l.oc(5),l.Nb(),l.Ob(6,"td"),l.Ob(7,"a",8),l.oc(8," Diff "),l.Nb(),l.oc(9," / "),l.Ob(10,"a",9),l.Jb(11,"i",10),l.Nb(),l.oc(12," / "),l.Ob(13,"a",11),l.Jb(14,"i",12),l.Nb(),l.Nb(),l.Nb(),l.Lb()),2&e){var i=t.$implicit;l.yb(1),l.ac("routerLink",l.ec(6,u,i.idNovel,i.id)),l.yb(2),l.pc(i.language),l.yb(2),l.pc(i.count_categories[0].count),l.yb(2),l.ac("routerLink",l.ec(9,h,i.idNovel,i.id)),l.yb(3),l.ac("routerLink",l.ec(12,y,i.idNovel,i.id)),l.yb(3),l.ac("routerLink",l.ec(15,g,i.idNovel,i.id))}}var p,v=((p=function(){function t(i,n,o){e(this,t),this.router=i,this.route=n,this.api=o,this.dictionaries=[]}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.idNovel=this.route.snapshot.params.idNovel,this.novel=this.api.Novel(this.idNovel),this.novel?this.dictionaryList():this.api.getNovel(this.idNovel).subscribe((function(t){e.novel=e.api.Novel(e.idNovel),e.dictionaryList()}),(function(e){console.log(e)}))}},{key:"dictionaryList",value:function(){var e=this;this.api.getDictionaries(this.idNovel).subscribe((function(t){var i=e.api.Dictionaries(e.idNovel);i&&(e.dictionaries=Object.values(i)),console.log(e.dictionaries)}),(function(e){console.log(e)}))}}]),t}()).\u0275fac=function(e){return new(e||p)(l.Ib(a.c),l.Ib(a.a),l.Ib(r.a))},p.\u0275cmp=l.Cb({type:p,selectors:[["app-dictionary-list"]],decls:15,vars:2,consts:[["actionButtons",""],[4,"ngTemplateOutlet"],[1,"table","is-striped","is-hoverable","is-fullwidth"],[2,"width","200px"],[4,"ngFor","ngForOf"],[1,"columns","actionButtons"],[1,"column"],[1,"button","is-info",3,"routerLink"],[3,"routerLink"],[1,"icon","has-text-success",3,"routerLink"],[1,"fas","fa-info-circle"],[1,"icon","has-text-danger",3,"routerLink"],[1,"fas","fa-ban"]],template:function(e,t){if(1&e&&(l.mc(0,b,4,3,"ng-template",null,0,l.nc),l.mc(2,d,1,0,"ng-container",1),l.Ob(3,"div"),l.Ob(4,"table",2),l.Ob(5,"thead"),l.Ob(6,"tr"),l.Ob(7,"th"),l.oc(8,"Language"),l.Nb(),l.Ob(9,"th",3),l.oc(10,"# of Categories"),l.Nb(),l.Ob(11,"th",3),l.oc(12,"Actions"),l.Nb(),l.Nb(),l.Nb(),l.Ob(13,"tbody"),l.mc(14,f,15,18,"ng-container",4),l.Nb(),l.Nb(),l.Nb()),2&e){var i=l.hc(1);l.yb(2),l.ac("ngTemplateOutlet",i),l.yb(12),l.ac("ngForOf",t.dictionaries)}},directives:[c.n,c.i,a.f,a.d],styles:[".actionButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center;width:100%}"]}),p),m=o("WIjz"),O=o("3Pt+");function N(e,t){if(1&e&&(l.Mb(0,null,12),l.Jb(2,"input",13),l.Lb()),2&e){var i=l.Xb().$implicit;l.yb(2),l.bc("formControlName",i.name)}}function S(e,t){if(1&e&&(l.Mb(0,null,14),l.Ob(2,"label",15),l.Jb(3,"input",16),l.oc(4),l.Nb(),l.Lb()),2&e){var i=l.Xb().$implicit;l.yb(3),l.bc("formControlName",i.name),l.yb(1),l.qc(" ",i.label," ")}}function C(e,t){if(1&e&&(l.Ob(0,"option",19),l.oc(1),l.Nb()),2&e){var i=t.$implicit;l.bc("value",i.value),l.yb(1),l.pc(i.label)}}function k(e,t){if(1&e&&(l.Mb(0,null,14),l.Ob(2,"label"),l.oc(3),l.Nb(),l.Ob(4,"div",5),l.Ob(5,"select",17),l.mc(6,C,2,2,"option",18),l.Nb(),l.Nb(),l.Lb()),2&e){var i=l.Xb().$implicit;l.yb(3),l.pc(i.label),l.yb(2),l.bc("formControlName",i.name),l.yb(1),l.ac("ngForOf",i.options)}}function D(e,t){if(1&e&&(l.Mb(0,null,20),l.Ob(2,"label",21),l.oc(3),l.Nb(),l.Ob(4,"div",5),l.Jb(5,"input",22),l.Nb(),l.Lb()),2&e){var i=l.Xb().$implicit;l.yb(2),l.bc("for",i.name),l.yb(1),l.pc(i.label),l.yb(2),l.bc("type",i.type),l.bc("id",i.name),l.bc("formControlName",i.name)}}function M(e,t){if(1&e&&(l.Ob(0,"div",8),l.Mb(1,9),l.mc(2,N,3,1,"ng-container",10),l.mc(3,S,5,2,"ng-container",10),l.mc(4,k,7,3,"ng-container",10),l.mc(5,D,6,5,"ng-container",11),l.Lb(),l.Nb()),2&e){var i=t.$implicit;l.yb(1),l.ac("ngSwitch",i.type),l.yb(1),l.ac("ngSwitchCase","hidden"),l.yb(1),l.ac("ngSwitchCase","checkbox"),l.yb(1),l.ac("ngSwitchCase","select")}}var H,w=((H=function(){function t(i,n,o,c){e(this,t),this.router=i,this.route=n,this.api=o,this.formBuilder=c,new m.b("english"),this.form=[new m.a("idNovel","idNovel","hidden"),new m.a("language","Language","text")]}return i(t,[{key:"ngOnInit",value:function(){this.idNovel=this.route.snapshot.params.idNovel,this.formTitle="Add new Dictionary",this.formGroup=this.formBuilder.group({idNovel:[null],language:[null]})}},{key:"submitForm",value:function(e){var t=this;console.log(e),this.api.addDictionary(this.idNovel,e).subscribe((function(e){console.log(e),t.router.navigate(["/novel/dictionary",t.idNovel])}),(function(e){console.log(e)}))}},{key:"goBack",value:function(){this.router.navigate(["/novel/dictionary",this.idNovel])}}]),t}()).\u0275fac=function(e){return new(e||H)(l.Ib(a.c),l.Ib(a.a),l.Ib(r.a),l.Ib(O.e))},H.\u0275cmp=l.Cb({type:H,selectors:[["app-dictionary-add"]],decls:10,vars:3,consts:[[1,"form-content"],[1,"title"],[3,"formGroup","ngSubmit"],["class","field",4,"ngFor","ngForOf"],[1,"field","is-grouped"],[1,"control"],["type","submit","value","Submit",1,"button","is-link"],["value","Cancel",1,"button","is-danger",3,"click"],[1,"field"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["tempHidden",""],["type","hidden",3,"formControlName"],["tempCheck",""],[1,"checkbox"],["type","checkbox",3,"formControlName"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["tempText",""],[1,"label",3,"for"],[1,"input",3,"type","id","formControlName"]],template:function(e,t){1&e&&(l.Ob(0,"div",0),l.Ob(1,"h1",1),l.oc(2),l.Nb(),l.Ob(3,"form",2),l.Vb("ngSubmit",(function(){return t.submitForm(t.formGroup.value)})),l.mc(4,M,6,4,"div",3),l.Ob(5,"div",4),l.Ob(6,"div",5),l.Jb(7,"input",6),l.Nb(),l.Ob(8,"div",5),l.Ob(9,"input",7),l.Vb("click",(function(){return t.goBack()})),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb()),2&e&&(l.yb(2),l.pc(t.formTitle),l.yb(1),l.ac("formGroup",t.formGroup),l.yb(1),l.ac("ngForOf",t.form))},directives:[O.q,O.k,O.g,c.i,c.k,c.l,c.m,O.b,O.j,O.f,O.a,O.o,O.m,O.p],styles:[".form-content[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border-radius:10px}"]}),H);function X(e,t){if(1&e&&(l.Mb(0,null,12),l.Jb(2,"input",13),l.Lb()),2&e){var i=l.Xb().$implicit;l.yb(2),l.bc("formControlName",i.name)}}function L(e,t){if(1&e&&(l.Mb(0,null,14),l.Ob(2,"label",15),l.Jb(3,"input",16),l.oc(4),l.Nb(),l.Lb()),2&e){var i=l.Xb().$implicit;l.yb(3),l.bc("formControlName",i.name),l.yb(1),l.qc(" ",i.label," ")}}function F(e,t){if(1&e&&(l.Ob(0,"option",19),l.oc(1),l.Nb()),2&e){var i=t.$implicit;l.bc("value",i.value),l.yb(1),l.pc(i.label)}}function $(e,t){if(1&e&&(l.Mb(0,null,14),l.Ob(2,"label"),l.oc(3),l.Nb(),l.Ob(4,"div",5),l.Ob(5,"select",17),l.mc(6,F,2,2,"option",18),l.Nb(),l.Nb(),l.Lb()),2&e){var i=l.Xb().$implicit;l.yb(3),l.pc(i.label),l.yb(2),l.bc("formControlName",i.name),l.yb(1),l.ac("ngForOf",i.options)}}function I(e,t){if(1&e&&(l.Mb(0,null,20),l.Ob(2,"label",21),l.oc(3),l.Nb(),l.Ob(4,"div",5),l.Jb(5,"input",22),l.Nb(),l.Lb()),2&e){var i=l.Xb().$implicit;l.yb(2),l.bc("for",i.name),l.yb(1),l.pc(i.label),l.yb(2),l.bc("type",i.type),l.bc("id",i.name),l.bc("formControlName",i.name)}}function T(e,t){if(1&e&&(l.Ob(0,"div",8),l.Mb(1,9),l.mc(2,X,3,1,"ng-container",10),l.mc(3,L,5,2,"ng-container",10),l.mc(4,$,7,3,"ng-container",10),l.mc(5,I,6,5,"ng-container",11),l.Lb(),l.Nb()),2&e){var i=t.$implicit;l.yb(1),l.ac("ngSwitch",i.type),l.yb(1),l.ac("ngSwitchCase","hidden"),l.yb(1),l.ac("ngSwitchCase","checkbox"),l.yb(1),l.ac("ngSwitchCase","select")}}var V,E=((V=function(){function t(i,n,o,c){e(this,t),this.router=i,this.route=n,this.api=o,this.formBuilder=c;var a=[new m.b("english")];console.log(a),this.form=[new m.a("id","id","hidden"),new m.a("idNovel","idNovel","hidden"),new m.a("language","Language","text")]}return i(t,[{key:"ngOnInit",value:function(){this.idNovel=this.route.snapshot.params.idNovel,this.idDictionary=this.route.snapshot.params.idDictionary,this.formTitle="Edit Dictionary",this.formGroup=this.formBuilder.group({id:[null],idNovel:[null],language:[null]}),this.getDictionary()}},{key:"getDictionary",value:function(){var e=this;this.dictionary=this.api.Dictionary(this.idNovel,this.idDictionary),this.dictionary?this.setFormValues():this.api.getDictionary(this.idNovel,this.idDictionary).subscribe((function(t){e.dictionary=e.api.Dictionary(e.idNovel,e.idDictionary),e.setFormValues()}))}},{key:"setFormValues",value:function(){this.formGroup.setValue({id:this.dictionary.id,idNovel:this.dictionary.idNovel,language:this.dictionary.language})}},{key:"submitForm",value:function(e){var t=this;console.log(e),this.api.updateDictionary(this.idNovel,this.idDictionary,e).subscribe((function(e){console.log(e),t.router.navigate(["/novel/dictionary",t.idNovel])}),(function(e){console.log(e)}))}},{key:"goBack",value:function(){this.router.navigate(["/novel/dictionary",this.idNovel])}}]),t}()).\u0275fac=function(e){return new(e||V)(l.Ib(a.c),l.Ib(a.a),l.Ib(r.a),l.Ib(O.e))},V.\u0275cmp=l.Cb({type:V,selectors:[["app-dictionary-edit"]],decls:10,vars:3,consts:[[1,"form-content"],[1,"title"],[3,"formGroup","ngSubmit"],["class","field",4,"ngFor","ngForOf"],[1,"field","is-grouped"],[1,"control"],["type","submit","value","Submit",1,"button","is-link"],["value","Cancel",1,"button","is-danger",3,"click"],[1,"field"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["tempHidden",""],["type","hidden",3,"formControlName"],["tempCheck",""],[1,"checkbox"],["type","checkbox",3,"formControlName"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["tempText",""],[1,"label",3,"for"],[1,"input",3,"type","id","formControlName"]],template:function(e,t){1&e&&(l.Ob(0,"div",0),l.Ob(1,"h1",1),l.oc(2),l.Nb(),l.Ob(3,"form",2),l.Vb("ngSubmit",(function(){return t.submitForm(t.formGroup.value)})),l.mc(4,T,6,4,"div",3),l.Ob(5,"div",4),l.Ob(6,"div",5),l.Jb(7,"input",6),l.Nb(),l.Ob(8,"div",5),l.Ob(9,"input",7),l.Vb("click",(function(){return t.goBack()})),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb()),2&e&&(l.yb(2),l.pc(t.formTitle),l.yb(1),l.ac("formGroup",t.formGroup),l.yb(1),l.ac("ngForOf",t.form))},directives:[O.q,O.k,O.g,c.i,c.k,c.l,c.m,O.b,O.j,O.f,O.a,O.o,O.m,O.p],styles:[".form-content[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border-radius:10px}"]}),V),x=function t(){e(this,t)};function P(e,t){if(1&e){var i=l.Pb();l.Ob(0,"div",9),l.Ob(1,"div",10),l.Ob(2,"a",11),l.Vb("click",(function(){return l.ic(i),l.Xb().saveList()})),l.oc(3,"Save List"),l.Nb(),l.Nb(),l.Nb()}}function j(e,t){1&e&&l.Kb(0)}function _(e,t){if(1&e&&(l.Ob(0,"option",12),l.oc(1),l.Nb()),2&e){var i=t.$implicit;l.bc("value",i.id),l.yb(1),l.pc(i.language)}}function B(e,t){if(1&e&&(l.Mb(0),l.Ob(1,"td"),l.oc(2),l.Nb(),l.Ob(3,"td"),l.oc(4),l.Nb(),l.Ob(5,"td"),l.oc(6),l.Nb(),l.Ob(7,"td"),l.oc(8),l.Nb(),l.Lb()),2&e){var i=l.Xb().$implicit,n=l.Xb();l.yb(2),l.qc(" ",n.categoriesSelectedHash[n.entriesSelected[n.entry2SelectHash[i].selected].idCategory].name," "),l.yb(2),l.qc(" ",n.entriesSelected[n.entry2SelectHash[i].selected].entryTranslation," "),l.yb(2),l.qc(" ",n.entriesSelected[n.entry2SelectHash[i].selected].entryOriginal," "),l.yb(2),l.qc(" ",n.entriesSelected[n.entry2SelectHash[i].selected].description," ")}}function G(e,t){1&e&&(l.Ob(0,"td"),l.oc(1," - "),l.Nb(),l.Ob(2,"td"),l.oc(3," - "),l.Nb(),l.Ob(4,"td"),l.oc(5," - "),l.Nb(),l.Ob(6,"td"),l.oc(7," - "),l.Nb())}function J(e,t){if(1&e&&(l.Ob(0,"option",12),l.oc(1),l.Nb()),2&e){var i=t.$implicit;l.bc("value",i.id),l.yb(1),l.pc(i.name)}}function K(e,t){if(1&e){var i=l.Pb();l.Mb(0),l.Ob(1,"td"),l.Ob(2,"select",17),l.Vb("ngModelChange",(function(e){l.ic(i);var t=l.Xb().$implicit,n=l.Xb();return n.entries[n.entry2SelectHash[t].entry].idCategory=e}))("ngModelChange",(function(){l.ic(i);var e=l.Xb().$implicit,t=l.Xb();return t.changeEntry(t.entries[t.entry2SelectHash[e].entry])})),l.mc(3,J,2,2,"option",6),l.Nb(),l.Nb(),l.Ob(4,"td"),l.Ob(5,"input",18),l.Vb("ngModelChange",(function(e){l.ic(i);var t=l.Xb().$implicit,n=l.Xb();return n.entries[n.entry2SelectHash[t].entry].entryTranslation=e}))("ngModelChange",(function(){l.ic(i);var e=l.Xb().$implicit,t=l.Xb();return t.changeEntry(t.entries[t.entry2SelectHash[e].entry])})),l.Nb(),l.Nb(),l.Ob(6,"td"),l.Ob(7,"input",18),l.Vb("ngModelChange",(function(e){l.ic(i);var t=l.Xb().$implicit,n=l.Xb();return n.entries[n.entry2SelectHash[t].entry].entryOriginal=e}))("ngModelChange",(function(){l.ic(i);var e=l.Xb().$implicit,t=l.Xb();return t.changeEntry(t.entries[t.entry2SelectHash[e].entry])})),l.Nb(),l.Nb(),l.Ob(8,"td"),l.Ob(9,"input",18),l.Vb("ngModelChange",(function(e){l.ic(i);var t=l.Xb().$implicit,n=l.Xb();return n.entries[n.entry2SelectHash[t].entry].description=e}))("ngModelChange",(function(){l.ic(i);var e=l.Xb().$implicit,t=l.Xb();return t.changeEntry(t.entries[t.entry2SelectHash[e].entry])})),l.Nb(),l.Nb(),l.Lb()}if(2&e){var n=l.Xb().$implicit,o=l.Xb();l.yb(2),l.ac("ngModel",o.entries[o.entry2SelectHash[n].entry].idCategory),l.yb(1),l.ac("ngForOf",o.categories),l.yb(2),l.ac("ngModel",o.entries[o.entry2SelectHash[n].entry].entryTranslation),l.yb(2),l.ac("ngModel",o.entries[o.entry2SelectHash[n].entry].entryOriginal),l.yb(2),l.ac("ngModel",o.entries[o.entry2SelectHash[n].entry].description)}}function q(e,t){if(1&e&&(l.Ob(0,"option",12),l.oc(1),l.Nb()),2&e){var i=t.$implicit;l.bc("value",i.id),l.yb(1),l.pc(i.name)}}function A(e,t){if(1&e){var i=l.Pb();l.Ob(0,"td"),l.Ob(1,"select",19),l.Vb("change",(function(e){l.ic(i);var t=l.Xb().index;return l.Xb().addEntry(e,t)})),l.Ob(2,"option",20),l.oc(3,"Select a category to copy"),l.Nb(),l.mc(4,q,2,2,"option",6),l.Nb(),l.Nb(),l.Ob(5,"td"),l.oc(6," - "),l.Nb(),l.Ob(7,"td"),l.oc(8," - "),l.Nb(),l.Ob(9,"td"),l.oc(10," - "),l.Nb()}if(2&e){var n=l.Xb(2);l.yb(4),l.ac("ngForOf",n.categories)}}var z=function(e,t,i){return{new:e,deleted:t,changed:i}};function W(e,t){if(1&e&&(l.Mb(0),l.Ob(1,"tr",13),l.mc(2,B,9,4,"ng-container",14),l.mc(3,G,8,0,"ng-template",null,15,l.nc),l.Ob(5,"td"),l.oc(6,"|"),l.Nb(),l.mc(7,K,10,5,"ng-container",14),l.mc(8,A,11,1,"ng-template",null,16,l.nc),l.Nb(),l.Lb()),2&e){var i=t.$implicit,n=l.hc(4),o=l.hc(9),c=l.Xb();l.yb(1),l.ac("ngClass",l.fc(5,z,c.entry2SelectHash[i].entry&&0==c.entries[c.entry2SelectHash[i].entry].id,c.entry2SelectHash[i].entry&&1==c.entries[c.entry2SelectHash[i].entry].delete,c.entry2SelectHash[i].entry&&1==c.entries[c.entry2SelectHash[i].entry].update)),l.yb(1),l.ac("ngIf",c.entry2SelectHash[i]&&c.entry2SelectHash[i].selected)("ngIfElse",n),l.yb(5),l.ac("ngIf",c.entry2SelectHash[i]&&null!=c.entry2SelectHash[i].entry)("ngIfElse",o)}}var Q,R,U,Y=[{path:"list",component:v,data:{title:"List Dictionaries"}},{path:"add",component:w,data:{title:"Add Dictionaries"}},{path:":idDictionary/edit",component:E,data:{title:"Edit Dictionary"}},{path:":idDictionary/diff",component:(Q=function(){function t(i,n,o){e(this,t),this.api=i,this.route=n,this.router=o,this.dictionaries=[],this.categories=[],this.categoriesHash={},this.entries=[],this.entriesOriginalValues={},this.entry2SelectHash={},this.entry2SelectHashKeys=[],this.categoriesSelected=[],this.categoriesSelectedHash={},this.entriesSelected=[]}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.idNovel=this.route.snapshot.params.idNovel,this.idDictionary=this.route.snapshot.params.idDictionary,this.dictionaries=Object.values(this.api.Dictionaries(this.idNovel)),0==this.dictionaries.length?this.api.getDictionaries(this.idNovel).subscribe((function(t){var i=e.api.Dictionaries(e.idNovel);i&&(e.dictionaries=Object.values(i)),e.getCache()}),(function(e){console.log(e)})):this.getCache()}},{key:"ngOnDestroy",value:function(){delete this.dictionaries,delete this.categories,delete this.categoriesHash,delete this.entries,delete this.idDictionary,delete this.entry2SelectHash,delete this.entry2SelectHashKeys,delete this.categoriesSelected,delete this.categoriesSelectedHash,delete this.entriesSelected,delete this.idDictionarySelected}},{key:"loadSelectedDictionary",value:function(){this.getSelectedCache()}},{key:"changeEntry",value:function(e){e.id>0&&(console.log(e.id),console.log(e.idCategory),e.update=e.entryOriginal!=this.entriesOriginalValues[e.id].entryOriginal||e.entryTranslation!=this.entriesOriginalValues[e.id].entryTranslation||!!e.description&&e.description!=this.entriesOriginalValues[e.id].description||e.idCategory!=this.entriesOriginalValues[e.id].idCategory,console.log(e))}},{key:"addEntry",value:function(e,t){var i=e.target.value,n=this.entry2SelectHash[this.entry2SelectHashKeys[t]],o=this.entriesSelected[n.selected],c=new x;c.id=0,c.idCategory=i,c.entryOriginal=o.entryOriginal,c.entryTranslation=o.entryTranslation,c.description=o.description,n.entry=this.entries.length,this.entries.push(c)}},{key:"saveList",value:function(){var e=this,t={},i=[];this.categories.forEach((function(e){i.push(e),t[e.id]=[]})),this.entries.forEach((function(e){t[e.idCategory].push(e)})),i.forEach((function(e){e.entries=t[e.id]})),this.api.saveFullDictionary(this.idNovel,this.idDictionary,i).subscribe((function(t){t.changes&&(e.dictionaries=Object.values(e.api.Dictionaries(e.idNovel)),e.categories=[],e.router.navigate(["/novel/dictionary/",e.idNovel])),console.log(t)}),(function(e){console.log(e)}))}},{key:"getCache",value:function(){var e=this;0==this.categories.length&&this.api.dictionaryCache(this.idNovel,this.idDictionary).subscribe((function(t){e.categories=[],e.entries=[],e.categories=Object.values(e.api.Categories(e.idDictionary)),e.categories.forEach((function(t){e.categoriesHash[t.id]={name:t.name};var i=e.api.Entries(t.id);for(var n in i)e.entry2SelectHash[i[n].entryOriginal]={entry:e.entries.length,selected:null},e.entries.push(i[n]),e.entriesOriginalValues[i[n].id]={entryOriginal:""+i[n].entryOriginal,entryTranslation:""+i[n].entryTranslation,description:""+i[n].description,idCategory:""+i[n].idCategory}})),e.entry2SelectHashKeys=Object.keys(e.entry2SelectHash)}),(function(e){console.log(e)}))}},{key:"getSelectedCache",value:function(){var e=this;this.api.dictionaryCache(this.idNovel,this.idDictionarySelected).subscribe((function(t){e.categoriesSelected=[],e.entriesSelected=[],e.categoriesSelected=Object.values(e.api.Categories(e.idDictionarySelected)),e.categoriesSelected.forEach((function(t){e.categoriesSelectedHash[t.id]={name:t.name};var i=e.api.Entries(t.id);for(var n in i)e.entry2SelectHash[i[n].entryOriginal]?e.entry2SelectHash[i[n].entryOriginal].selected=e.entriesSelected.length:e.entry2SelectHash[i[n].entryOriginal]={entry:null,selected:e.entriesSelected.length},e.entriesSelected.push(i[n])})),e.entry2SelectHashKeys=Object.keys(e.entry2SelectHash)}),(function(e){console.log(e)}))}}]),t}(),Q.\u0275fac=function(e){return new(e||Q)(l.Ib(r.a),l.Ib(a.a),l.Ib(a.c))},Q.\u0275cmp=l.Cb({type:Q,selectors:[["app-diff"]],decls:33,vars:4,consts:[["actionButtons",""],[4,"ngTemplateOutlet"],[1,"table","is-stripede","is-fullwidth","tableContent"],["colspan","4"],[3,"ngModel","ngModelChange","change"],["value","","selected","selected"],[3,"value",4,"ngFor","ngForOf"],[1,"tableContent"],[4,"ngFor","ngForOf"],[1,"columns","actionButtons"],[1,"column"],[1,"button","is-info",3,"click"],[3,"value"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["selectedEmpty",""],["nonAnEntry",""],[3,"ngModel","ngModelChange"],["type","text",3,"ngModel","ngModelChange"],[3,"change"],["value",""]],template:function(e,t){if(1&e&&(l.mc(0,P,4,0,"ng-template",null,0,l.nc),l.mc(2,j,1,0,"ng-container",1),l.Ob(3,"div"),l.Ob(4,"table",2),l.Ob(5,"thead"),l.Ob(6,"tr"),l.Ob(7,"th",3),l.Ob(8,"select",4),l.Vb("ngModelChange",(function(e){return t.idDictionarySelected=e}))("change",(function(){return t.loadSelectedDictionary()})),l.Ob(9,"option",5),l.oc(10,"Select a Dictionary"),l.Nb(),l.mc(11,_,2,2,"option",6),l.Nb(),l.Nb(),l.Nb(),l.Ob(12,"tr"),l.Ob(13,"th"),l.oc(14,"Original"),l.Nb(),l.Ob(15,"th"),l.oc(16,"Translated"),l.Nb(),l.Ob(17,"th"),l.oc(18,"Description"),l.Nb(),l.Ob(19,"th"),l.oc(20,"Category"),l.Nb(),l.Ob(21,"th"),l.oc(22,"|"),l.Nb(),l.Ob(23,"th"),l.oc(24,"Category"),l.Nb(),l.Ob(25,"th"),l.oc(26,"Original"),l.Nb(),l.Ob(27,"th"),l.oc(28,"Translated"),l.Nb(),l.Ob(29,"th"),l.oc(30,"Description"),l.Nb(),l.Nb(),l.Nb(),l.Ob(31,"tbody",7),l.mc(32,W,10,9,"ng-container",8),l.Nb(),l.Nb(),l.Nb()),2&e){var i=l.hc(1);l.yb(2),l.ac("ngTemplateOutlet",i),l.yb(6),l.ac("ngModel",t.idDictionarySelected),l.yb(3),l.ac("ngForOf",t.dictionaries),l.yb(21),l.ac("ngForOf",t.entry2SelectHashKeys)}},directives:[c.n,O.o,O.j,O.l,O.m,O.p,c.i,c.h,c.j,O.b],styles:[".actionButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center;width:100%}.tableContent[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#eee}.tableContent[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.changed[_ngcontent-%COMP%]{background-color:#afa}.tableContent[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.new[_ngcontent-%COMP%]{background-color:#aaf}"]}),Q),data:{title:"Diff Dictionary"}},{path:":idDictionary",loadChildren:"../category#CategoryModule",data:{title:"View chapters"}},{path:"**",redirectTo:"list"}],Z=((U=function t(){e(this,t)}).\u0275mod=l.Gb({type:U}),U.\u0275inj=l.Fb({factory:function(e){return new(e||U)},imports:[[c.b,a.g.forChild(Y)],a.g]}),U),ee=((R=function t(){e(this,t)}).\u0275mod=l.Gb({type:R}),R.\u0275inj=l.Fb({factory:function(e){return new(e||R)},imports:[[c.b,Z,O.i,O.n]]}),R)}}])}();