!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{JW32:function(e,i,o){"use strict";o.r(i),o.d(i,"ChapterModule",(function(){return U}));var a=o("ofXK"),r=o("tyNb"),c=o("yTNM"),s=o("AytR"),l=o("fXoL");function d(t,e){1&t&&(l.Ob(0,"div",5),l.Ob(1,"a",8),l.oc(2,"Import Chapter"),l.Nb(),l.Nb())}function u(t,e){if(1&t){var n=l.Pb();l.Ob(0,"div",5),l.Ob(1,"a",9),l.Vb("click",(function(){return l.ic(n),l.Xb(2).updateChapters()})),l.oc(2,"Update Chapters"),l.Nb(),l.Nb()}}function g(t,e){if(1&t){var n=l.Pb();l.Ob(0,"div",5),l.Ob(1,"a",9),l.Vb("click",(function(){return l.ic(n),l.Xb(2).downloadChapter()})),l.oc(2,"Add Next Chapter"),l.Nb(),l.Nb()}}var b=function(t){return["/novel/dictionary",t]};function h(t,e){if(1&t&&(l.Ob(0,"div",4),l.Ob(1,"div",5),l.Ob(2,"a",6),l.oc(3,"Dictionary"),l.Nb(),l.Nb(),l.mc(4,d,3,0,"div",7),l.mc(5,u,3,0,"div",7),l.mc(6,g,3,0,"div",7),l.Nb()),2&t){var n=l.Xb();l.yb(2),l.ac("routerLink",l.dc(4,b,n.idNovel)),l.yb(2),l.ac("ngIf",n.novel&&!n.novel.flagSyosetu),l.yb(1),l.ac("ngIf",n.novel&&n.novel.flagSyosetu),l.yb(1),l.ac("ngIf",n.novel&&n.novel.flagSyosetu)}}function p(t,e){1&t&&l.Kb(0)}function f(t,e){if(1&t){var n=l.Pb();l.Ob(0,"a",15),l.Vb("click",(function(){l.ic(n);var t=e.$implicit,i=l.Xb().$implicit;return l.Xb().openGT(i,t)})),l.oc(1),l.Nb()}if(2&t){var i=e.$implicit;l.yb(1),l.pc(i.language)}}function y(t,e){1&t&&(l.Ob(0,"a",16),l.Ob(1,"span",17),l.Jb(2,"i",18),l.Nb(),l.Nb())}function v(t,e){1&t&&(l.Ob(0,"a",19),l.Ob(1,"span",17),l.Jb(2,"i",20),l.Nb(),l.Nb())}var O=function(t,e){return["/novel/",t,e]};function C(t,e){if(1&t&&(l.Mb(0),l.Ob(1,"tr",10),l.Ob(2,"td"),l.oc(3),l.Nb(),l.Ob(4,"td",11),l.oc(5),l.Nb(),l.Ob(6,"td",11),l.oc(7),l.Nb(),l.Ob(8,"td",11),l.oc(9),l.Nb(),l.Ob(10,"td"),l.mc(11,f,2,1,"a",12),l.Nb(),l.mc(12,y,3,0,"ng-template",null,13,l.nc),l.mc(14,v,3,0,"ng-template",null,14,l.nc),l.Nb(),l.Lb()),2&t){var n=e.$implicit,i=l.Xb();l.yb(1),l.bc("title",i.novel.title),l.yb(2),l.pc(n.no),l.yb(1),l.ac("routerLink",l.ec(9,O,n.idNovel,n.no)),l.yb(1),l.pc(n.title),l.yb(1),l.ac("routerLink",l.ec(12,O,n.idNovel,n.no)),l.yb(1),l.pc(n.dateOriginalPost),l.yb(1),l.ac("routerLink",l.ec(15,O,n.idNovel,n.no)),l.yb(1),l.pc(n.dateOriginalRevision),l.yb(2),l.ac("ngForOf",i.dictionaries)}}var N,m=((N=function(){function e(n,i,o){t(this,e),this.router=n,this.route=i,this.api=o,this.chapters=[],this.dictionaries=[]}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.idNovel=this.route.snapshot.params.idNovel,this.novel=this.api.Novel(this.idNovel),this.dictionaries=Object.values(this.api.Dictionaries(this.idNovel)),this.chapters=Object.values(this.api.Chapters(this.idNovel)),this.novel?this.chapterList():this.api.getNovel(this.idNovel).subscribe((function(e){t.novel=t.api.Novel(t.idNovel),t.chapterList()}),(function(t){console.log(t)}))}},{key:"chapterList",value:function(t){var e=this;this.chapters.length?this.dictionaryList():this.api.getChapters(this.idNovel,t).subscribe((function(t){var n=e.api.Chapters(e.idNovel);n&&(e.chapters=Object.values(n)),e.dictionaryList()}),(function(t){console.log(t)}))}},{key:"dictionaryList",value:function(){var t=this;this.api.getDictionaries(this.idNovel).subscribe((function(e){var n=t.api.Dictionaries(t.idNovel);n&&(t.dictionaries=Object.values(n)),console.log(t.dictionaries)}),(function(t){console.log(t)}))}},{key:"openGT",value:function(t,e){var n="".concat(s.a.backendServer,"/static/").concat(this.idNovel,"/").concat(e.id,"/").concat(t.no,"/1");n="https://translate.google.com/translate?sl=auto&tl=en&u="+n,window.open(n)}},{key:"downloadChapter",value:function(){alert("Needs to be fixed, use Update Chapters for now")}},{key:"updateChapters",value:function(){var t=this;alert("Press it only one time, it is working, but there will be no visible response until it's finished.\nConsider Pressing F12 and switching to the Network tab, so you can see when it's finished"),this.api.autoUpdateChapters(this.idNovel).subscribe((function(e){console.log(e),t.chapterList(!0)}),(function(t){console.log(t)}))}}]),e}()).\u0275fac=function(t){return new(t||N)(l.Ib(r.c),l.Ib(r.a),l.Ib(c.a))},N.\u0275cmp=l.Cb({type:N,selectors:[["app-chapter-list"]],decls:21,vars:2,consts:[["actionButtons",""],[4,"ngTemplateOutlet"],[1,"table","is-striped","is-hoverable","is-fullwidth"],[4,"ngFor","ngForOf"],[1,"columns","actionButtons"],[1,"column"],[1,"button","is-primary",3,"routerLink"],["class","column",4,"ngIf"],["routerLink","['/novel/',idNovel,'add']",1,"button","is-info"],[1,"button","is-info",3,"click"],[3,"title"],[3,"routerLink"],[3,"click",4,"ngFor","ngForOf"],["success",""],["danger",""],[3,"click"],[1,"button","is-success"],[1,"icon","is-small"],[1,"fas","fa-check"],[1,"button","is-danger"],[1,"fas","fa-times"]],template:function(t,e){if(1&t&&(l.mc(0,h,7,6,"ng-template",null,0,l.nc),l.mc(2,p,1,0,"ng-container",1),l.Ob(3,"div"),l.Ob(4,"table",2),l.Ob(5,"thead"),l.Ob(6,"tr"),l.Ob(7,"th"),l.oc(8,"Number"),l.Nb(),l.Ob(9,"th"),l.oc(10,"Title"),l.Nb(),l.Ob(11,"th"),l.oc(12,"Date Created"),l.Nb(),l.Ob(13,"th"),l.oc(14,"Date Updated"),l.Nb(),l.Ob(15,"th"),l.oc(16,"Dictionary"),l.Jb(17,"br"),l.oc(18,"Google Translator"),l.Nb(),l.Nb(),l.Nb(),l.Ob(19,"tbody"),l.mc(20,C,16,18,"ng-container",3),l.Nb(),l.Nb(),l.Nb()),2&t){var n=l.hc(1);l.yb(2),l.ac("ngTemplateOutlet",n),l.yb(18),l.ac("ngForOf",e.chapters)}},directives:[a.n,a.i,r.f,a.j,r.d],styles:[".actionButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center;width:100%}"]}),N),M=o("jhN1"),k=o("3Pt+");function P(t,e){if(1&t&&(l.Ob(0,"option",15),l.oc(1),l.Nb()),2&t){var n=e.$implicit;l.bc("value",n.id),l.yb(1),l.pc(n.language)}}function w(t,e){if(1&t){var n=l.Pb();l.Ob(0,"li",9),l.Ob(1,"select",10),l.Vb("ngModelChange",(function(t){return l.ic(n),l.Xb().dictionarySelector=t}))("change",(function(t){return l.ic(n),l.Xb().dictionarySelected(t.target.value)})),l.Ob(2,"option",11),l.oc(3,"Choose a language"),l.Nb(),l.mc(4,P,2,2,"option",12),l.Nb(),l.Ob(5,"input",13),l.Vb("click",(function(){return l.ic(n),l.Xb().refreshTranslation()})),l.Nb(),l.Ob(6,"input",14),l.Vb("click",(function(){return l.ic(n),l.Xb().refreshOriginal()})),l.Nb(),l.Nb()}if(2&t){var i=l.Xb();l.yb(1),l.ac("ngModel",i.dictionarySelector),l.yb(3),l.ac("ngForOf",i.dictionaries)}}var _=function(t,e){return{changed:t,new:e}};function T(t,e){if(1&t){var n=l.Pb();l.Ob(0,"div",21),l.Ob(1,"input",22),l.Vb("ngModelChange",(function(t){return l.ic(n),e.$implicit.entryOriginal=t}))("ngModelChange",(function(){l.ic(n);var t=e.$implicit;return l.Xb(2).changeEntry(t)})),l.Nb(),l.Ob(2,"input",23),l.Vb("ngModelChange",(function(t){return l.ic(n),e.$implicit.entryTranslation=t}))("ngModelChange",(function(){l.ic(n);var t=e.$implicit;return l.Xb(2).changeEntry(t)})),l.Nb(),l.Ob(3,"input",24),l.Vb("ngModelChange",(function(t){return l.ic(n),e.$implicit.description=t}))("ngModelChange",(function(){l.ic(n);var t=e.$implicit;return l.Xb(2).changeEntry(t)})),l.Nb(),l.Ob(4,"input",25),l.Vb("ngModelChange",(function(t){return l.ic(n),e.$implicit.idCategory=t})),l.Nb(),l.Nb()}if(2&t){var i=e.$implicit;l.ac("ngClass",l.ec(5,_,1==i.update,0==i.id)),l.yb(1),l.ac("ngModel",i.entryOriginal),l.yb(1),l.ac("ngModel",i.entryTranslation),l.yb(1),l.ac("ngModel",i.description),l.yb(1),l.ac("ngModel",i.idCategory)}}var L=function(t){return{hidden:t}};function x(t,e){if(1&t){var n=l.Pb();l.Mb(0),l.Ob(1,"li",3),l.Ob(2,"h1",16),l.Vb("click",(function(){l.ic(n);var t=e.index;return l.Xb().selectOpenCategory=t})),l.Ob(3,"input",17),l.Vb("ngModelChange",(function(t){return l.ic(n),e.$implicit.name=t}))("ngModelChange",(function(){l.ic(n);var t=e.$implicit;return l.Xb().changeCategory(t)})),l.Nb(),l.Nb(),l.Nb(),l.Ob(4,"li",18),l.mc(5,T,5,8,"div",19),l.Ob(6,"input",20),l.Vb("click",(function(){l.ic(n);var t=e.$implicit;return l.Xb().addEntry(t.entries,t.id)})),l.Nb(),l.Nb(),l.Lb()}if(2&t){var i=e.$implicit,o=e.index,a=l.Xb();l.yb(2),l.ac("ngClass",l.ec(4,_,1==i.update,0==i.id)),l.yb(1),l.ac("ngModel",i.name),l.yb(1),l.ac("ngClass",l.dc(7,L,a.selectOpenCategory!=o)),l.yb(1),l.ac("ngForOf",i.entries)}}var V,D=((V=function(){function e(n,i){t(this,e),this.api=n,this.route=i,this.Sidebar2Chapter=new l.n,this.dictionaries=[],this.categories=[],this.entriesOriginalValues={},this.categoriesOriginalValues={},this.dictionarySelector=""}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.idNovel=this.route.snapshot.params.idNovel,this.dictionaries=Object.values(this.api.Dictionaries(this.idNovel)),0==this.dictionaries.length?this.api.getDictionaries(this.idNovel).subscribe((function(e){var n=t.api.Dictionaries(t.idNovel);n&&(t.dictionaries=Object.values(n)),t.dictionarySelector=t.dictionaries[0].id,t.dictionarySelected(t.dictionarySelector)}),(function(t){console.log(t)})):(this.dictionarySelector=this.dictionaries[0].id,this.dictionarySelected(this.dictionarySelector))}},{key:"ngOnDestroy",value:function(){delete this.dictionaries,delete this.categories,delete this.entriesOriginalValues,delete this.categoriesOriginalValues,delete this.idCategory,delete this.idDictionary,delete this.idNovel,delete this.dictionarySelector,console.log("destroy Sidebar")}},{key:"dictionarySelected",value:function(t){this.idDictionary=t,this.getCache()}},{key:"getCache",value:function(){var t=this;0==this.categories.length?this.api.dictionaryCache(this.idNovel,this.idDictionary).subscribe((function(e){t.categories=[],t.categoriesOriginalValues={},t.entriesOriginalValues={},t.categories=Object.values(t.api.Categories(t.idDictionary)),t.categories.forEach((function(e){t.categoriesOriginalValues[e.id]={name:e.name},e.entries=Object.values(t.api.Entries(e.id)),e.entries.forEach((function(n){t.entriesOriginalValues[e.id]||(t.entriesOriginalValues[e.id]={}),t.entriesOriginalValues[e.id][n.id]={entryOriginal:""+n.entryOriginal,entryTranslation:""+n.entryTranslation,description:""+n.description,idCategory:""+n.idCategory}}))})),t.refreshTranslation()}),(function(t){console.log(t)})):this.refreshTranslation()}},{key:"changeEntry",value:function(t){t.id>0&&(t.update=t.entryOriginal!=this.entriesOriginalValues[t.idCategory][t.id].entryOriginal||t.entryTranslation!=this.entriesOriginalValues[t.idCategory][t.id].entryTranslation||!!t.description&&t.description!=this.entriesOriginalValues[t.idCategory][t.id].description||t.idCategory!=this.entriesOriginalValues[t.idCategory][t.id].idCategory)}},{key:"changeCategory",value:function(t){t.id>0&&(t.update=t.name!=this.categoriesOriginalValues[t.id].name,console.log(t.update))}},{key:"addEntry",value:function(t,e){t.push({id:0,entryOriginal:"",entryTranslation:"",description:"",update:!1,idCategory:e})}},{key:"addCategory",value:function(){this.categories.push({id:0,idDictionary:this.idDictionary,name:"",update:!1,entries:[]})}},{key:"refreshTranslation",value:function(){this.Sidebar2Chapter.emit(this.categories)}},{key:"refreshOriginal",value:function(){this.Sidebar2Chapter.emit([])}},{key:"saveModifications",value:function(){var t=this;this.api.saveFullDictionary(this.idNovel,this.idDictionary,this.categories).subscribe((function(e){e.changes&&(t.dictionaries=Object.values(t.api.Dictionaries(t.idNovel)),t.categories=[],t.getCache()),console.log(e)}),(function(t){console.log(t)})),console.log(this.categories)}},{key:"openOutside",value:function(t){var e="".concat(s.a.backendServer,"/static/").concat(this.idNovel,"/").concat(this.idDictionary,"/").concat(this.route.snapshot.params.noChapter,"/");t&&(e="https://translate.google.com/translate?sl=auto&tl=en&u="+e),window.open(e)}}]),e}()).\u0275fac=function(t){return new(t||V)(l.Ib(c.a),l.Ib(r.a))},V.\u0275cmp=l.Cb({type:V,selectors:[["app-chapter-sidebar"]],outputs:{Sidebar2Chapter:"Sidebar2Chapter"},decls:10,vars:2,consts:[[1,"dictionaryList"],["class","dictionary-selector",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"categories"],[1,"dictionary-buttons"],["type","button","value","+ Add new Category",1,"button","is-small","is-primary",3,"click"],["type","button","value","Save Modifications",1,"button","is-small","is-danger",3,"click"],["type","button","value","Google Translate",1,"button","is-small","is-info",3,"click"],["type","button","value","Open Keyword Translated Raw",1,"button","is-small","is-warning",3,"click"],[1,"dictionary-selector"],[1,"select",3,"ngModel","ngModelChange","change"],["value","","selected","selected"],[3,"value",4,"ngFor","ngForOf"],["type","button","value","Refresh Translation",1,"button","is-small","is-info",3,"click"],["type","button","value","Refresh to Original",1,"button","is-small","is-warning",3,"click"],[3,"value"],[3,"ngClass","click"],["type","text","placeholder","Category Name",1,"category-name",3,"ngModel","ngModelChange"],[1,"entries",3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],["type","button","value","+ Add new Entry",3,"click"],[3,"ngClass"],["type","text","placeholder","Original",1,"entry-original",3,"ngModel","ngModelChange"],["type","text","placeholder","Translation",1,"entry-translation",3,"ngModel","ngModelChange"],["type","text","placeholder","Description",1,"entry-description",3,"ngModel","ngModelChange"],["type","hidden",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(l.Ob(0,"ul",0),l.mc(1,w,7,2,"li",1),l.mc(2,x,7,9,"ng-container",2),l.Jb(3,"li",3),l.Ob(4,"li",4),l.Ob(5,"input",5),l.Vb("click",(function(){return e.addCategory()})),l.Nb(),l.Ob(6,"input",6),l.Vb("click",(function(){return e.saveModifications()})),l.Nb(),l.Nb(),l.Ob(7,"li",4),l.Ob(8,"input",7),l.Vb("click",(function(){return e.openOutside(!0)})),l.Nb(),l.Ob(9,"input",8),l.Vb("click",(function(){return e.openOutside(!1)})),l.Nb(),l.Nb(),l.Nb()),2&t&&(l.yb(1),l.ac("ngIf",e.dictionaries.length>0),l.yb(1),l.ac("ngForOf",e.categories))},directives:[a.j,a.i,k.o,k.j,k.l,k.m,k.p,a.h,k.b],styles:[".dictionaryList[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}.dictionaryList[_ngcontent-%COMP%]   .dictionary-selector[_ngcontent-%COMP%]{align-self:flex-start;width:100%}.dictionaryList[_ngcontent-%COMP%]   .dictionary-selector[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:33.3%;height:100%}.dictionaryList[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{align-self:flex-end}.dictionaryList[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{color:#fff;width:100%}.dictionaryList[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{height:30px;width:100%;background:linear-gradient(180deg,#e570e7 0,#c85ec7 47%,#a849a3)}.dictionaryList[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > h1.changed[_ngcontent-%COMP%]{background:linear-gradient(180deg,#009013 0,#00b469 47%,#107020)}.dictionaryList[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > h1.new[_ngcontent-%COMP%]{background:linear-gradient(180deg,#393cff 0,#1f00cc 47%,#1400cc)}.dictionaryList[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%]{background-color:transparent;border:0 solid #fff;color:#fff;margin-left:15px}.dictionaryList[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]{padding:left 10;overflow-y:auto}.dictionaryList[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(odd){background-color:grey}.dictionaryList[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%] > div.changed[_ngcontent-%COMP%]{background-color:green}.dictionaryList[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%] > div.new[_ngcontent-%COMP%]{background-color:#00f}.dictionaryList[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:0 solid #fff;color:#fff}.dictionaryList[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entry-original[_ngcontent-%COMP%], .dictionaryList[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entry-translation[_ngcontent-%COMP%]{width:30%}.dictionaryList[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entry-description[_ngcontent-%COMP%]{width:40%}.dictionaryList[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}.dictionaryList[_ngcontent-%COMP%]   .dictionary-buttons[_ngcontent-%COMP%]{width:100%}.dictionaryList[_ngcontent-%COMP%]   .dictionary-buttons[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:50%;height:100%}"]}),V),S=function(t,e){return["/novel/",t,e]};function I(t,e){if(1&t&&(l.Ob(0,"a",8),l.oc(1," Previous "),l.Nb()),2&t){var n=l.Xb(2);l.ac("routerLink",l.ec(1,S,n.idNovel,n.chapterPrevious.no))}}function X(t,e){if(1&t&&(l.Ob(0,"a",8),l.oc(1," Next "),l.Nb()),2&t){var n=l.Xb(2);l.ac("routerLink",l.ec(1,S,n.idNovel,n.chapterNext.no))}}var E=function(t){return["/novel/",t]};function F(t,e){if(1&t&&(l.Ob(0,"div",5),l.Ob(1,"div",6),l.mc(2,I,2,4,"a",7),l.Nb(),l.Ob(3,"div",6),l.Ob(4,"a",8),l.oc(5," Table of Contents "),l.Nb(),l.Nb(),l.Ob(6,"div",6),l.mc(7,X,2,4,"a",7),l.Nb(),l.Nb()),2&t){var n=l.Xb();l.yb(2),l.ac("ngIf",n.chapterPrevious),l.yb(2),l.ac("routerLink",l.dc(3,E,n.idNovel)),l.yb(3),l.ac("ngIf",n.chapterNext)}}function j(t,e){1&t&&l.Kb(0)}function $(t,e){if(1&t&&(l.Mb(0),l.Ob(1,"h1",9),l.oc(2),l.Nb(),l.Jb(3,"hr"),l.Jb(4,"div",10),l.Lb()),2&t){var n=l.Xb();l.yb(2),l.pc(n.renderedTitle),l.yb(2),l.bc("innerHTML",n.renderedText,l.jc)}}function R(t,e){1&t&&l.Kb(0)}var J,B,G,K=[{path:"list",component:m,data:{title:"List Chapter"}},{path:":noChapter",component:(J=function(){function e(n,i,o,a){t(this,e),this.router=n,this.route=i,this.sanitized=o,this.api=a}return n(e,[{key:"startContent",value:function(){var t=this;this.idNovel=this.route.snapshot.params.idNovel,this.noChapter=this.route.snapshot.params.noChapter,this.novel=this.api.Novel(this.idNovel),this.loadingChapter=new Promise((function(e,n){t.novel?!t.chapter||t.chapter.textOriginal?t.getChapter(e,n):(t.chapter=t.api.Chapter(t.idNovel,t.noChapter),t.renderDataView(),e()):t.api.getNovel(t.idNovel).subscribe((function(i){t.novel=t.api.Novel(t.idNovel),t.getChapter(e,n)}),(function(t){console.log(t),n()}))})),this.api.getChapters(this.idNovel).subscribe((function(e){t.chapterPrevious=t.api.Chapter(t.idNovel,+t.noChapter-1),t.chapterNext=t.api.Chapter(t.idNovel,+t.noChapter+1)}),(function(t){console.log(t)}))}},{key:"renderDataView",value:function(){this.renderedTitle=this.chapter.title,this.renderedText=this.chapter.textRevision?this.chapter.textRevision:this.chapter.textOriginal}},{key:"ngOnInit",value:function(){console.log("onInit"),this.startContent()}},{key:"ngDoCheck",value:function(){this.noChapter!=this.route.snapshot.params.noChapter&&this.startContent()}},{key:"translateText",value:function(t){var e=this;this.loadingChapter.then((function(n){if(e.renderDataView(),t.length>0){var i=[];t.forEach((function(t){t.entries.forEach((function(e){var n=e.entryOriginal.length;i[n]||(i[n]=[]),i[n].push({entryOriginal:e.entryOriginal,entryTranslation:e.entryTranslation,idEntry:e.id,idCategory:t.id,category:t.name})}))}));for(var o=i.length;o>0;--o)i[o]&&i[o].forEach((function(t){var n=new RegExp(t.entryOriginal,"g");e.renderedTitle=e.renderedTitle.replace(n,"[["+t.entryTranslation+"]]"),e.renderedText=e.renderedText.replace(n,"[["+t.entryTranslation+"]]")}));var a=new RegExp("\\]\\]\\[\\[","g");e.renderedTitle=e.renderedTitle.replace(a," "),e.renderedText=e.renderedText.replace(a," "),a=new RegExp("\\]\\]","g"),e.renderedTitle=e.renderedTitle.replace(a,""),e.renderedText=e.renderedText.replace(a,""),a=new RegExp("\\[\\[","g"),e.renderedTitle=e.renderedTitle.replace(a,""),e.renderedText=e.renderedText.replace(a,"")}}))}},{key:"getChapter",value:function(t,e){var n=this;this.api.getChapter(this.idNovel,this.noChapter).subscribe((function(e){n.chapter=n.api.Chapter(n.idNovel,n.noChapter),n.renderDataView(),t()}),(function(t){console.log(t),e()}))}}]),e}(),J.\u0275fac=function(t){return new(t||J)(l.Ib(r.c),l.Ib(r.a),l.Ib(M.b),l.Ib(c.a))},J.\u0275cmp=l.Cb({type:J,selectors:[["app-chapter-detail"]],decls:7,vars:3,consts:[[1,"sidebar"],[3,"Sidebar2Chapter"],["controlButtons",""],[4,"ngTemplateOutlet"],[4,"ngIf"],[1,"columns","controlButtons"],[1,"column"],["class","button is-large is-primary",3,"routerLink",4,"ngIf"],[1,"button","is-large","is-primary",3,"routerLink"],[1,"title"],[1,"novel-content",3,"innerHTML"]],template:function(t,e){if(1&t&&(l.Ob(0,"div",0),l.Ob(1,"app-chapter-sidebar",1),l.Vb("Sidebar2Chapter",(function(t){return e.translateText(t)})),l.Nb(),l.Nb(),l.mc(2,F,8,5,"ng-template",null,2,l.nc),l.mc(4,j,1,0,"ng-container",3),l.mc(5,$,5,2,"ng-container",4),l.mc(6,R,1,0,"ng-container",3)),2&t){var n=l.hc(3);l.yb(4),l.ac("ngTemplateOutlet",n),l.yb(1),l.ac("ngIf",e.chapter),l.yb(1),l.ac("ngTemplateOutlet",n)}},directives:[D,a.n,a.j,r.f],styles:[".controlButtons[_ngcontent-%COMP%]{margin-top:1px}.controlButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;text-align:center}.novel-content[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{color:#fff}.sidebar[_ngcontent-%COMP%]{z-index:20;position:fixed;width:500px;right:0;top:0;bottom:0;overflow-y:auto;background-color:rgba(63,63,63,.8)}"]}),J),data:{title:"View chapter"}},{path:"**",redirectTo:"list"}],A=((G=function e(){t(this,e)}).\u0275mod=l.Gb({type:G}),G.\u0275inj=l.Fb({factory:function(t){return new(t||G)},imports:[[r.g.forChild(K)],r.g]}),G),U=((B=function e(){t(this,e)}).\u0275mod=l.Gb({type:B}),B.\u0275inj=l.Fb({factory:function(t){return new(t||B)},imports:[[a.b,A,r.g,k.i]]}),B)}}])}();