"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[256],{8256:(O,T,g)=>{g.r(T),g.d(T,{DictionaryModule:()=>X});var o=g(6895),h=g(1457),A=g(3795),a=g(4719),N=g(7783),x=g(4868),t=g(6738);let v=(()=>{class n{constructor(e){this.formBuilder=e,this.selectNovels=[],this.selectLanguages=[],this.indexes=[],this.formGroup=e.group({id:[null],name:[null],language:[null],novel:[null]})}loadMeta(e,i){this.selectLanguages=[];for(const r of Object.keys(e.languages))this.selectLanguages.push(new x.Wx(r,e.languages[r]));this.selectNovels=[];for(const r of Object.keys(i))this.selectNovels.push(new x.Wx(i[r].id+"",i[r].nameCustom,!1))}addForm(e,i,r,s){this.indexes.push(e),this.form.push(new x.Wi(e,i,r,s))}getForm(e){this.form=[],e&&this.addForm("id","","hidden"),this.addForm("name","Name","text"),this.addForm("language","Language","select",this.selectLanguages),this.addForm("novel","Novels","multiselect",this.selectNovels)}setValues(e,i){const r=i.map(l=>l.id+""),s=new a.Oe(this.selectNovels.map(l=>(r.includes(l.value)&&l.setChecked(!0),l.control)));e&&this.formGroup.setValue({id:e.id,name:e.name,language:e.language,novel:s})}getValues(e){const i={dictionary:null,novels:null};i.dictionary=new N.Xy(this.formGroup.value),delete i.dictionary.novel;const r=this.indexes.indexOf("novel");if(i.novels=this.form[r].getValues().map(s=>parseInt(s,10)),e&&e.length===i.novels.length){const s=e.map(l=>l.id);JSON.stringify(s)===JSON.stringify(i.novels)&&delete i.novels}return i}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(a.qu))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Z=g(6845);function u(n,c){if(1&n&&(t.ynx(0,null,12),t._UZ(2,"input",13),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.s9C("formControlName",e.name)}}function f(n,c){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label",15),t._UZ(3,"input",16),t._uU(4),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.s9C("formControlName",e.name),t.xp6(1),t.hij(" ",e.label," ")}}function d(n,c){if(1&n&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.label)}}function p(n,c){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"div",5)(5,"select",17),t.YNc(6,d,2,2,"option",18),t.qZA()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.label),t.xp6(2),t.s9C("formControlName",e.name),t.xp6(1),t.Q6J("ngForOf",e.options)}}function _(n,c){if(1&n&&(t.TgZ(0,"p")(1,"label"),t._UZ(2,"input",21),t._uU(3),t.qZA()()),2&n){const e=c.$implicit;t.xp6(2),t.Q6J("formControl",e.control),t.xp6(1),t.hij(" ",e.label," ")}}function m(n,c){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t.YNc(5,_,4,2,"p",20),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.AsE("",e.label," - ",e.name,""),t.xp6(2),t.Q6J("ngForOf",e.options)}}function y(n,c){if(1&n&&(t.ynx(0,null,22),t.TgZ(2,"label",23),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t._UZ(5,"input",24),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.s9C("for",e.name),t.xp6(1),t.Oqu(e.label),t.xp6(2),t.s9C("type",e.type),t.s9C("id",e.name),t.s9C("formControlName",e.name)}}function S(n,c){if(1&n&&(t.TgZ(0,"div",8),t.ynx(1,9),t.YNc(2,u,3,1,"ng-container",10),t.YNc(3,f,5,2,"ng-container",10),t.YNc(4,p,7,3,"ng-container",10),t.YNc(5,m,6,3,"ng-container",10),t.YNc(6,y,6,5,"ng-container",11),t.BQk(),t.qZA()),2&n){const e=c.$implicit;t.xp6(1),t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","hidden"),t.xp6(1),t.Q6J("ngSwitchCase","checkbox"),t.xp6(1),t.Q6J("ngSwitchCase","select"),t.xp6(1),t.Q6J("ngSwitchCase","multiselect")}}let D=(()=>{class n extends v{constructor(e,i,r,s){super(s),this.router=e,this.route=i,this.api=r,this.formBuilder=s}ngOnInit(){this.idNovel=this.route.snapshot.params.idNovel,this.idDictionary=this.route.snapshot.params.idDictionary,this.formTitle="Edit Dictionary",Promise.all([this.api.Meta.get("languages"),this.api.Dictionary.get({id:this.idDictionary}),this.api.Novel.getAll()]).then(e=>{this.dictionary=e[1],this.novels=e[2],this.loadMeta(e[0],e[2]),this.idNovel&&this.api.Novel.get({id:this.idNovel}).then(i=>{this.setValues(null,[i])}),this.getForm(!0)})}submitForm(e){const i=this.getValues(this.novels);this.api.Dictionary.add({values:i}).then(r=>{this.goBack()},r=>{console.log(r)})}LINK(e,i){const r=[];this.idNovel&&(r.push("novel"),r.push(this.idNovel)),r.push("dictionary"),i&&r.push(i),e&&r.push(e),this.router.navigate(r)}goBack(){this.LINK()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.F0),t.Y36(h.gz),t.Y36(Z.s),t.Y36(a.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dictionary-add"]],features:[t.qOj],decls:10,vars:3,consts:[[1,"form-content"],[1,"title"],[3,"formGroup","ngSubmit"],["class","field",4,"ngFor","ngForOf"],[1,"field","is-grouped"],[1,"control"],["type","submit","value","Submit",1,"button","is-link"],["value","Cancel",1,"button","is-danger",3,"click"],[1,"field"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["tempHidden",""],["type","hidden",3,"formControlName"],["tempCheck",""],[1,"checkbox"],["type","checkbox",3,"formControlName"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngFor","ngForOf"],["type","checkbox",3,"formControl"],["tempText",""],[1,"label",3,"for"],[1,"input",3,"type","id","formControlName"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return i.submitForm(i.formGroup.value)}),t.YNc(4,S,7,5,"div",3),t.TgZ(5,"div",4)(6,"div",5),t._UZ(7,"input",6),t.qZA(),t.TgZ(8,"div",5)(9,"input",7),t.NdJ("click",function(){return i.goBack()}),t.qZA()()()()()),2&e&&(t.xp6(2),t.Oqu(i.formTitle),t.xp6(1),t.Q6J("formGroup",i.formGroup),t.xp6(1),t.Q6J("ngForOf",i.form))},directives:[a._Y,a.JL,a.sg,o.sg,o.RF,o.n9,a.Fj,a.JJ,a.u,a.Wl,a.EJ,a.YN,a.Kr,a.oH,o.ED],styles:[".form-content[_ngcontent-%COMP%]{padding:30px;border-radius:10px}"]}),n})();function M(n,c){if(1&n&&(t.ynx(0,null,12),t._UZ(2,"input",13),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.s9C("formControlName",e.name)}}function b(n,c){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label",15),t._UZ(3,"input",16),t._uU(4),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.s9C("formControlName",e.name),t.xp6(1),t.hij(" ",e.label," ")}}function q(n,c){if(1&n&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.label)}}function F(n,c){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"div",5)(5,"select",17),t.YNc(6,q,2,2,"option",18),t.qZA()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.label),t.xp6(2),t.s9C("formControlName",e.name),t.xp6(1),t.Q6J("ngForOf",e.options)}}function H(n,c){if(1&n&&(t.TgZ(0,"p")(1,"label"),t._UZ(2,"input",21),t._uU(3),t.qZA()()),2&n){const e=c.$implicit;t.xp6(2),t.Q6J("formControl",e.control),t.xp6(1),t.hij(" ",e.label," ")}}function J(n,c){if(1&n&&(t.ynx(0,null,14),t.TgZ(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t.YNc(5,H,4,2,"p",20),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.AsE("",e.label," - ",e.name,""),t.xp6(2),t.Q6J("ngForOf",e.options)}}function U(n,c){if(1&n&&(t.ynx(0,null,22),t.TgZ(2,"label",23),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t._UZ(5,"input",24),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.s9C("for",e.name),t.xp6(1),t.Oqu(e.label),t.xp6(2),t.s9C("type",e.type),t.s9C("id",e.name),t.s9C("formControlName",e.name)}}function E(n,c){if(1&n&&(t.TgZ(0,"div",8),t.ynx(1,9),t.YNc(2,M,3,1,"ng-container",10),t.YNc(3,b,5,2,"ng-container",10),t.YNc(4,F,7,3,"ng-container",10),t.YNc(5,J,6,3,"ng-container",10),t.YNc(6,U,6,5,"ng-container",11),t.BQk(),t.qZA()),2&n){const e=c.$implicit;t.xp6(1),t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","hidden"),t.xp6(1),t.Q6J("ngSwitchCase","checkbox"),t.xp6(1),t.Q6J("ngSwitchCase","select"),t.xp6(1),t.Q6J("ngSwitchCase","multiselect")}}let w=(()=>{class n extends v{constructor(e,i,r,s){super(s),this.router=e,this.route=i,this.api=r,this.formBuilder=s}ngOnInit(){this.idNovel=this.route.snapshot.params.idNovel,this.idDictionary=this.route.snapshot.params.idDictionary,this.formTitle="Edit Dictionary",Promise.all([this.api.Meta.get("languages"),this.api.Dictionary.get({id:this.idDictionary}),this.api.Novel.getAll()]).then(e=>{this.api.Novel.getAll({idDictionary:this.idDictionary}).then(i=>{this.dictionary=e[1],this.novels=e[2],this.loadMeta(e[0],e[2]),this.setValues(e[1],i),this.getForm(!1)})})}submitForm(e){const i=this.getValues(this.novels);this.api.Dictionary.update({id:this.idDictionary,values:i}).then(r=>{this.goBack()},r=>{console.log(r)})}goBack(){this.router.navigate(["/dictionary"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.F0),t.Y36(h.gz),t.Y36(Z.s),t.Y36(a.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dictionary-edit"]],features:[t.qOj],decls:10,vars:3,consts:[[1,"form-content"],[1,"title"],[3,"formGroup","ngSubmit"],["class","field",4,"ngFor","ngForOf"],[1,"field","is-grouped"],[1,"control"],["type","submit","value","Submit",1,"button","is-link"],["value","Cancel",1,"button","is-danger",3,"click"],[1,"field"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["tempHidden",""],["type","hidden",3,"formControlName"],["tempCheck",""],[1,"checkbox"],["type","checkbox",3,"formControlName"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngFor","ngForOf"],["type","checkbox",3,"formControl"],["tempText",""],[1,"label",3,"for"],[1,"input",3,"type","id","formControlName"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return i.submitForm(i.formGroup.value)}),t.YNc(4,E,7,5,"div",3),t.TgZ(5,"div",4)(6,"div",5),t._UZ(7,"input",6),t.qZA(),t.TgZ(8,"div",5)(9,"input",7),t.NdJ("click",function(){return i.goBack()}),t.qZA()()()()()),2&e&&(t.xp6(2),t.Oqu(i.formTitle),t.xp6(1),t.Q6J("formGroup",i.formGroup),t.xp6(1),t.Q6J("ngForOf",i.form))},directives:[a._Y,a.JL,a.sg,o.sg,o.RF,o.n9,a.Fj,a.JJ,a.u,a.Wl,a.EJ,a.YN,a.Kr,a.oH,o.ED],styles:[".form-content[_ngcontent-%COMP%]{padding:30px;border-radius:10px}"]}),n})();var k=g(3178);function Q(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"a",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveList()}),t._uU(3,"Save List"),t.qZA()()()}}function Y(n,c){1&n&&t.GkF(0)}function L(n,c){if(1&n&&(t.TgZ(0,"option",12),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.s9C("value",e.id),t.xp6(1),t.Oqu(e.language)}}function B(n,c){if(1&n&&(t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(2),t.hij(" ",i.categoriesSelectedHash[i.entriesSelected[i.entry2SelectHash[e].selected].idCategory].name," "),t.xp6(2),t.hij(" ",i.entriesSelected[i.entry2SelectHash[e].selected].entryTranslation," "),t.xp6(2),t.hij(" ",i.entriesSelected[i.entry2SelectHash[e].selected].entryOriginal," "),t.xp6(2),t.hij(" ",i.entriesSelected[i.entry2SelectHash[e].selected].description," ")}}function $(n,c){1&n&&(t.TgZ(0,"td"),t._uU(1," - "),t.qZA(),t.TgZ(2,"td"),t._uU(3," - "),t.qZA(),t.TgZ(4,"td"),t._uU(5," - "),t.qZA(),t.TgZ(6,"td"),t._uU(7," - "),t.qZA())}function P(n,c){if(1&n&&(t.TgZ(0,"option",12),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.s9C("value",e.id),t.xp6(1),t.Oqu(e.name)}}function I(n,c){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"td")(2,"select",17),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw().$implicit,l=t.oxw();return l.entries[l.entry2SelectHash[s].entry].idCategory=r})("ngModelChange",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return s.changeEntry(s.entries[s.entry2SelectHash[r].entry])}),t.YNc(3,P,2,2,"option",6),t.qZA()(),t.TgZ(4,"td")(5,"input",18),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw().$implicit,l=t.oxw();return l.entries[l.entry2SelectHash[s].entry].entryTranslation=r})("ngModelChange",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return s.changeEntry(s.entries[s.entry2SelectHash[r].entry])}),t.qZA()(),t.TgZ(6,"td")(7,"input",18),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw().$implicit,l=t.oxw();return l.entries[l.entry2SelectHash[s].entry].entryOriginal=r})("ngModelChange",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return s.changeEntry(s.entries[s.entry2SelectHash[r].entry])}),t.qZA()(),t.TgZ(8,"td")(9,"input",18),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw().$implicit,l=t.oxw();return l.entries[l.entry2SelectHash[s].entry].description=r})("ngModelChange",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return s.changeEntry(s.entries[s.entry2SelectHash[r].entry])}),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(2),t.Q6J("ngModel",i.entries[i.entry2SelectHash[e].entry].idCategory),t.xp6(1),t.Q6J("ngForOf",i.categories),t.xp6(2),t.Q6J("ngModel",i.entries[i.entry2SelectHash[e].entry].entryTranslation),t.xp6(2),t.Q6J("ngModel",i.entries[i.entry2SelectHash[e].entry].entryOriginal),t.xp6(2),t.Q6J("ngModel",i.entries[i.entry2SelectHash[e].entry].description)}}function j(n,c){if(1&n&&(t.TgZ(0,"option",12),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.s9C("value",e.id),t.xp6(1),t.Oqu(e.name)}}function K(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"select",19),t.NdJ("change",function(r){t.CHM(e);const s=t.oxw().index;return t.oxw().addEntry(r,s)}),t.TgZ(2,"option",20),t._uU(3,"Select a category to copy"),t.qZA(),t.YNc(4,j,2,2,"option",6),t.qZA()(),t.TgZ(5,"td"),t._uU(6," - "),t.qZA(),t.TgZ(7,"td"),t._uU(8," - "),t.qZA(),t.TgZ(9,"td"),t._uU(10," - "),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.categories)}}const V=function(n,c,e){return{new:n,deleted:c,changed:e}};function G(n,c){if(1&n&&(t.ynx(0),t.TgZ(1,"tr",13),t.YNc(2,B,9,4,"ng-container",14),t.YNc(3,$,8,0,"ng-template",null,15,t.W1O),t.TgZ(5,"td"),t._uU(6,"|"),t.qZA(),t.YNc(7,I,10,5,"ng-container",14),t.YNc(8,K,11,1,"ng-template",null,16,t.W1O),t.qZA(),t.BQk()),2&n){const e=c.$implicit,i=t.MAs(4),r=t.MAs(9),s=t.oxw();t.xp6(1),t.Q6J("ngClass",t.kEZ(5,V,s.entry2SelectHash[e].entry&&0==s.entries[s.entry2SelectHash[e].entry].id,s.entry2SelectHash[e].entry&&1==s.entries[s.entry2SelectHash[e].entry].delete,s.entry2SelectHash[e].entry&&1==s.entries[s.entry2SelectHash[e].entry].update)),t.xp6(1),t.Q6J("ngIf",s.entry2SelectHash[e]&&s.entry2SelectHash[e].selected)("ngIfElse",i),t.xp6(5),t.Q6J("ngIf",s.entry2SelectHash[e]&&null!=s.entry2SelectHash[e].entry)("ngIfElse",r)}}const z=[{path:"",component:A.n,data:{title:"List Dictionaries"}},{path:"add",component:D,data:{title:"Add Dictionaries",breadcrumb:"Add Dictionary"}},{path:"edit/:idDictionary",component:w,data:{title:"Edit Dictionary",breadcrumb:"Edit Dictionary"}},{path:"diff/:idDictionary",component:(()=>{class n{constructor(e,i,r){this.api=e,this.route=i,this.router=r,this.dictionaries=[],this.categories=[],this.categoriesHash={},this.entries=[],this.entriesOriginalValues={},this.entry2SelectHash={},this.entry2SelectHashKeys=[],this.categoriesSelected=[],this.categoriesSelectedHash={},this.entriesSelected=[]}ngOnInit(){this.idNovel=this.route.snapshot.params.idNovel,this.idDictionary=this.route.snapshot.params.idDictionary,this.api.Dictionary.getAll({idNovel:this.idNovel}).then(e=>{this.dictionaries=Object.values(e),this.getCache()},e=>{console.log(e)})}ngOnDestroy(){delete this.dictionaries,delete this.categories,delete this.categoriesHash,delete this.entries,delete this.idDictionary,delete this.entry2SelectHash,delete this.entry2SelectHashKeys,delete this.categoriesSelected,delete this.categoriesSelectedHash,delete this.entriesSelected,delete this.idDictionarySelected}loadSelectedDictionary(){this.getSelectedCache()}changeEntry(e){e.id>0&&(console.log("changeEntry",e.id,e.idCategory,e),e.update=e.entryOriginal!=this.entriesOriginalValues[e.id].entryOriginal||e.entryTranslation!=this.entriesOriginalValues[e.id].entryTranslation||!!e.description&&e.description!=this.entriesOriginalValues[e.id].description||e.idCategory!=this.entriesOriginalValues[e.id].idCategory)}addEntry(e,i){const r=e.target.value,s=this.entry2SelectHash[this.entry2SelectHashKeys[i]],l=this.entriesSelected[s.selected],C=new k.G;C.id=0,C.idCategory=r,C.entryOriginal=l.entryOriginal,C.entryTranslation=l.entryTranslation,C.description=l.description,s.entry=this.entries.length,this.entries.push(C)}saveList(){const e={},i=[];this.categories.forEach(r=>{i.push(r),e[r.id]=[]}),this.entries.forEach(r=>{e[r.idCategory].push(r)}),i.forEach(r=>{r.entries=e[r.id]}),this.api.Dictionary.fullSave(this.idDictionary,i).then(r=>{r&&(this.categories=[],this.dictionaries=Object.values(this.api.Dictionary.getAll()),this.router.navigate(["/novel/dictionary/"]))})}getCache(){0==this.categories.length&&this.api.Dictionary.getCache(this.idDictionary).then(e=>{this.categories=[],this.entries=[],this.api.Category.getAll({idDictionary:this.idDictionary}).then(i=>{this.categories=i,this.categories.forEach(r=>{this.categoriesHash[r.id]={name:r.name},this.api.Entry.getAll({idDictionary:this.idDictionary,idCategory:r.id}).then(s=>{for(const l in s)this.entry2SelectHash[s[l].entryOriginal]={entry:this.entries.length,selected:null},this.entries.push(s[l]),this.entriesOriginalValues[s[l].id]={entryOriginal:""+s[l].entryOriginal,entryTranslation:""+s[l].entryTranslation,description:""+s[l].description,idCategory:""+s[l].idCategory}})})}),this.entry2SelectHashKeys=Object.keys(this.entry2SelectHash)})}getSelectedCache(){this.api.Dictionary.getCache(this.idDictionarySelected).then(e=>{this.categoriesSelected=[],this.entriesSelected=[],this.api.Category.getAll({idDictionary:this.idDictionarySelected}).then(i=>{this.categoriesSelected=i}),this.categoriesSelected.forEach(i=>{this.categoriesSelectedHash[i.id]={name:i.name},this.api.Entry.getAll({idDictionary:this.idDictionarySelected,idCategory:i.id}).then(r=>{for(const s in r)this.entry2SelectHash[r[s].entryOriginal]?this.entry2SelectHash[r[s].entryOriginal].selected=this.entriesSelected.length:this.entry2SelectHash[r[s].entryOriginal]={entry:null,selected:this.entriesSelected.length},this.entriesSelected.push(r[s])})}),this.entry2SelectHashKeys=Object.keys(this.entry2SelectHash)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.s),t.Y36(h.gz),t.Y36(h.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-diff"]],decls:33,vars:4,consts:[["actionButtons",""],[4,"ngTemplateOutlet"],[1,"table","is-stripede","is-fullwidth","tableContent"],["colspan","4"],[3,"ngModel","ngModelChange","change"],["value","","selected","selected"],[3,"value",4,"ngFor","ngForOf"],[1,"tableContent"],[4,"ngFor","ngForOf"],[1,"columns","actionButtons"],[1,"column"],[1,"button","is-info",3,"click"],[3,"value"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["selectedEmpty",""],["nonAnEntry",""],[3,"ngModel","ngModelChange"],["type","text",3,"ngModel","ngModelChange"],[3,"change"],["value",""]],template:function(e,i){if(1&e&&(t.YNc(0,Q,4,0,"ng-template",null,0,t.W1O),t.YNc(2,Y,1,0,"ng-container",1),t.TgZ(3,"div")(4,"table",2)(5,"thead")(6,"tr")(7,"th",3)(8,"select",4),t.NdJ("ngModelChange",function(s){return i.idDictionarySelected=s})("change",function(){return i.loadSelectedDictionary()}),t.TgZ(9,"option",5),t._uU(10,"Select a Dictionary"),t.qZA(),t.YNc(11,L,2,2,"option",6),t.qZA()()(),t.TgZ(12,"tr")(13,"th"),t._uU(14,"Original"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Translated"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Description"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Category"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"|"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Category"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Original"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Translated"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Description"),t.qZA()()(),t.TgZ(31,"tbody",7),t.YNc(32,G,10,9,"ng-container",8),t.qZA()()()),2&e){const r=t.MAs(1);t.xp6(2),t.Q6J("ngTemplateOutlet",r),t.xp6(6),t.Q6J("ngModel",i.idDictionarySelected),t.xp6(3),t.Q6J("ngForOf",i.dictionaries),t.xp6(21),t.Q6J("ngForOf",i.entry2SelectHashKeys)}},directives:[o.tP,a.EJ,a.JJ,a.On,a.YN,a.Kr,o.sg,o.mk,o.O5,a.Fj],styles:[".actionButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center;width:100%}.tableContent[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#eee}.tableContent[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.changed[_ngcontent-%COMP%]{background-color:#afa}.tableContent[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.new[_ngcontent-%COMP%]{background-color:#aaf}"]}),n})(),data:{title:"Diff Dictionary",breadcrumb:"Diff"}},{path:":idDictionary",loadChildren:()=>Promise.all([g.e(592),g.e(912)]).then(g.bind(g,912)).then(n=>n.CategoryModule),data:{title:"View categories",breadcrumb:"View Categories"}},{path:"**",redirectTo:""}];let R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[o.ez,h.Bz.forChild(z)],h.Bz]}),n})(),X=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[o.ez,R,a.u5,a.UX]]}),n})()},3795:(O,T,g)=>{g.d(T,{n:()=>Z});var o=g(6738),h=g(1457),A=g(6845),a=g(6895);function N(u,f){if(1&u){const d=o.EpF();o.TgZ(0,"div",5)(1,"div",6)(2,"a",7),o.NdJ("click",function(){return o.CHM(d),o.oxw().LINK(null,"add")}),o._uU(3,"Add Dictionary"),o.qZA()()()}}function x(u,f){1&u&&o.GkF(0)}const t=function(){return[]};function v(u,f){if(1&u){const d=o.EpF();o.ynx(0),o.TgZ(1,"tr")(2,"td",8),o.NdJ("click",function(){const m=o.CHM(d).$implicit;return o.oxw().LINK(m.id)}),o._uU(3),o.qZA(),o.TgZ(4,"td",8),o.NdJ("click",function(){const m=o.CHM(d).$implicit;return o.oxw().LINK(m.id)}),o._uU(5),o.qZA(),o.TgZ(6,"td",8),o.NdJ("click",function(){const m=o.CHM(d).$implicit;return o.oxw().LINK(m.id)}),o._uU(7),o.qZA(),o.TgZ(8,"td")(9,"a",9),o.NdJ("click",function(){const m=o.CHM(d).$implicit;return o.oxw().LINK(m.id,"edit")}),o._UZ(10,"i",10),o.qZA(),o._uU(11," / "),o.TgZ(12,"a",11),o.NdJ("click",function(){const m=o.CHM(d).$implicit;return o.oxw().delete(m.id)}),o._UZ(13,"i",12),o.qZA()()(),o.BQk()}if(2&u){const d=f.$implicit;o.xp6(3),o.Oqu(d.name),o.xp6(2),o.Oqu(d.language),o.xp6(2),o.Oqu(d.countCategories()),o.xp6(5),o.Q6J("routerLink",o.DdM(4,t))}}let Z=(()=>{class u{constructor(d,p,_){this.router=d,this.route=p,this.api=_,this.dictionaries=[],this.idNovel=null}ngOnInit(){this.loadList()}loadList(){this.idNovel=this.route.snapshot.params.idNovel,this.api.Dictionary.getAll({idNovel:this.idNovel}).then(d=>{this.dictionaries=Object.values(d)},d=>{console.log(d)})}LINK(d,p){const _=[];this.idNovel&&(_.push("novel"),_.push(this.idNovel)),_.push("dictionary"),p&&_.push(p),d&&_.push(d),console.log("LINK",_),this.router.navigate(_)}delete(d){return confirm("Are you sure?")&&this.api.Dictionary.delete({id:d}).then(p=>{this.loadList()},p=>{console.log(p)}),!0}}return u.\u0275fac=function(d){return new(d||u)(o.Y36(h.F0),o.Y36(h.gz),o.Y36(A.s))},u.\u0275cmp=o.Xpm({type:u,selectors:[["app-dictionary-list"]],decls:17,vars:2,consts:[["actionButtons",""],[4,"ngTemplateOutlet"],[1,"table","is-striped","is-hoverable","is-fullwidth"],[2,"width","200px"],[4,"ngFor","ngForOf"],[1,"columns","actionButtons"],[1,"column"],[1,"button","is-info",3,"click"],[3,"click"],[1,"icon","has-text-success",3,"click"],[1,"fas","fa-info-circle"],[1,"icon","has-text-danger",3,"routerLink","click"],[1,"fas","fa-ban"]],template:function(d,p){if(1&d&&(o.YNc(0,N,4,0,"ng-template",null,0,o.W1O),o.TgZ(2,"div"),o.YNc(3,x,1,0,"ng-container",1),o.TgZ(4,"table",2)(5,"thead")(6,"tr")(7,"th"),o._uU(8,"Name"),o.qZA(),o.TgZ(9,"th"),o._uU(10,"Language"),o.qZA(),o.TgZ(11,"th",3),o._uU(12,"# of Categories"),o.qZA(),o.TgZ(13,"th",3),o._uU(14,"Actions"),o.qZA()()(),o.TgZ(15,"tbody"),o.YNc(16,v,14,5,"ng-container",4),o.qZA()()()),2&d){const _=o.MAs(1);o.xp6(3),o.Q6J("ngTemplateOutlet",_),o.xp6(13),o.Q6J("ngForOf",p.dictionaries)}},directives:[a.tP,a.sg,h.yS],styles:[".columns[_ngcontent-%COMP%]{margin:5px}.actionButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center;width:100%}"]}),u})()}}]);