(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"eCG/":function(l,n,t){"use strict";t.r(n);var e=t("8Y7J");class i{}var u=t("pMnS"),o=t("iInd"),a=t("SVse"),r=t("yTNM");class s{constructor(l,n,t){this.router=l,this.route=n,this.api=t,this.chapters=[]}ngOnInit(){this.idNovel=this.route.snapshot.params.idNovel,this.novel=this.api.Novel(this.idNovel),this.novel?this.chapterList():this.api.getNovel(this.idNovel).subscribe(l=>{this.novel=this.api.Novel(this.idNovel),this.chapterList()},l=>{console.log(l)})}chapterList(l){this.api.getChapters(this.idNovel,l).subscribe(l=>{let n=this.api.Chapters(this.idNovel);n&&(this.chapters=Object.values(n)),console.log(this.chapters)},l=>{console.log(l)})}downloadChapter(){this.api.getAutoChapter(this.idNovel).subscribe(l=>{this.chapterList(!0)},l=>{console.log(l)})}updateChapters(){this.api.autoUpdateChapters(this.idNovel).subscribe(l=>{console.log(l),this.chapterList(!0)},l=>{console.log(l)})}}var c=e.ob({encapsulation:0,styles:[[".actionButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center;width:100%}"]],data:{}});function d(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,3,"div",[["class","column"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"a",[["class","button is-info"],["routerLink","['/novel/',idNovel,'add']"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,t){var i=!0;return"click"===n&&(i=!1!==e.Cb(l,2).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&i),i},null,null)),e.pb(2,671744,null,0,o.o,[o.l,o.a,a.g],{routerLink:[0,"routerLink"]},null),(l()(),e.Ib(-1,null,["Import Chapter"]))],function(l,n){l(n,2,0,"['/novel/',idNovel,'add']")},function(l,n){l(n,1,0,e.Cb(n,2).target,e.Cb(n,2).href)})}function g(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"a",[["class","button is-info"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.updateChapters()&&e),e},null,null)),(l()(),e.Ib(-1,null,["Update Chapters"]))],null,null)}function p(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"a",[["class","button is-info"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.downloadChapter()&&e),e},null,null)),(l()(),e.Ib(-1,null,["Add Next Chapter"]))],null,null)}function b(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,11,"div",[["class","columns actionButtons"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,4,"div",[["class","column"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,3,"a",[["class","button is-primary"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,t){var i=!0;return"click"===n&&(i=!1!==e.Cb(l,3).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&i),i},null,null)),e.pb(3,671744,null,0,o.o,[o.l,o.a,a.g],{routerLink:[0,"routerLink"]},null),e.Db(4,2),(l()(),e.Ib(-1,null,["Dictionary"])),(l()(),e.fb(16777216,null,null,1,null,d)),e.pb(7,16384,null,0,a.j,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,g)),e.pb(9,16384,null,0,a.j,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,p)),e.pb(11,16384,null,0,a.j,[e.M,e.J],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component,e=l(n,4,0,"/novel/dictionary",t.idNovel);l(n,3,0,e),l(n,7,0,t.novel&&!t.novel.flagSyosetu),l(n,9,0,t.novel&&t.novel.flagSyosetu),l(n,11,0,t.novel&&t.novel.flagSyosetu)},function(l,n){l(n,2,0,e.Cb(n,3).target,e.Cb(n,3).href)})}function h(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function C(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function f(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,2,"a",[["class","button is-success"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"span",[["class","icon is-small"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,0,"i",[["class","fas fa-check"]],null,null,null,null,null))],null,null)}function v(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,2,"a",[["class","button is-danger"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"span",[["class","icon is-small"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,0,"i",[["class","fas fa-times"]],null,null,null,null,null))],null,null)}function m(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,20,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,19,"tr",[],[[8,"title",0]],null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e.Ib(3,null,["",""])),(l()(),e.qb(4,0,null,null,3,"td",[],null,[[null,"click"]],function(l,n,t){var i=!0;return"click"===n&&(i=!1!==e.Cb(l,5).onClick()&&i),i},null,null)),e.pb(5,16384,null,0,o.m,[o.l,o.a,[8,null],e.B,e.k],{routerLink:[0,"routerLink"]},null),e.Db(6,3),(l()(),e.Ib(7,null,["",""])),(l()(),e.qb(8,0,null,null,3,"td",[],null,[[null,"click"]],function(l,n,t){var i=!0;return"click"===n&&(i=!1!==e.Cb(l,9).onClick()&&i),i},null,null)),e.pb(9,16384,null,0,o.m,[o.l,o.a,[8,null],e.B,e.k],{routerLink:[0,"routerLink"]},null),e.Db(10,3),(l()(),e.Ib(11,null,["",""])),(l()(),e.qb(12,0,null,null,3,"td",[],null,[[null,"click"]],function(l,n,t){var i=!0;return"click"===n&&(i=!1!==e.Cb(l,13).onClick()&&i),i},null,null)),e.pb(13,16384,null,0,o.m,[o.l,o.a,[8,null],e.B,e.k],{routerLink:[0,"routerLink"]},null),e.Db(14,3),(l()(),e.Ib(15,null,["",""])),(l()(),e.qb(16,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,C)),e.pb(18,16384,null,0,a.j,[e.M,e.J],{ngIf:[0,"ngIf"],ngIfThen:[1,"ngIfThen"],ngIfElse:[2,"ngIfElse"]},null),(l()(),e.fb(0,[["success",2]],null,0,null,f)),(l()(),e.fb(0,[["danger",2]],null,0,null,v))],function(l,n){var t=l(n,6,0,"/novel/",n.context.$implicit.idNovel,n.context.$implicit.no);l(n,5,0,t);var i=l(n,10,0,"/novel/",n.context.$implicit.idNovel,n.context.$implicit.no);l(n,9,0,i);var u=l(n,14,0,"/novel/",n.context.$implicit.idNovel,n.context.$implicit.no);l(n,13,0,u),l(n,18,0,1==n.context.$implicit.hasText,e.Cb(n,19),e.Cb(n,20))},function(l,n){l(n,1,0,e.ub(1,"",n.component.novel.title,"")),l(n,3,0,n.context.$implicit.no),l(n,7,0,n.context.$implicit.title),l(n,11,0,n.context.$implicit.dateOriginalPost),l(n,15,0,n.context.$implicit.dateOriginalRevision)})}function y(l){return e.Jb(0,[(l()(),e.fb(0,[["actionButtons",2]],null,0,null,b)),(l()(),e.fb(16777216,null,null,1,null,h)),e.pb(2,540672,null,0,a.p,[e.M],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(l()(),e.qb(3,0,null,null,16,"div",[],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,15,"table",[["class","table is-striped is-hoverable is-fullwidth"]],null,null,null,null,null)),(l()(),e.qb(5,0,null,null,11,"thead",[],null,null,null,null,null)),(l()(),e.qb(6,0,null,null,10,"tr",[],null,null,null,null,null)),(l()(),e.qb(7,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Number"])),(l()(),e.qb(9,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Title"])),(l()(),e.qb(11,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Date Created"])),(l()(),e.qb(13,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Date Updated"])),(l()(),e.qb(15,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Loaded"])),(l()(),e.qb(17,0,null,null,2,"tbody",[],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,m)),e.pb(19,278528,null,0,a.i,[e.M,e.J,e.q],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var t=n.component;l(n,2,0,e.Cb(n,0)),l(n,19,0,t.chapters)},null)}function O(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,1,"app-chapter-list",[],null,null,null,y,c)),e.pb(1,114688,null,0,s,[o.l,o.a,r.a],null,null)],function(l,n){l(n,1,0)},null)}var M=e.mb("app-chapter-list",s,O,{},{},[]),k=t("s7LF"),q=t("AytR");class x{constructor(l,n){this.api=l,this.route=n,this.Sidebar2Chapter=new e.m,this.dictionaries=[],this.categories=[],this.entriesOriginalValues={},this.categoriesOriginalValues={},this.dictionarySelector=""}ngOnInit(){this.idNovel=this.route.snapshot.params.idNovel,this.dictionaries=Object.values(this.api.Dictionaries(this.idNovel)),0==this.dictionaries.length?this.api.getDictionaries(this.idNovel).subscribe(l=>{let n=this.api.Dictionaries(this.idNovel);n&&(this.dictionaries=Object.values(n)),this.dictionarySelector=this.dictionaries[0].id,this.dictionarySelected(this.dictionarySelector)},l=>{console.log(l)}):(this.dictionarySelector=this.dictionaries[0].id,this.dictionarySelected(this.dictionarySelector))}ngOnDestroy(){delete this.dictionaries,delete this.categories,delete this.entriesOriginalValues,delete this.categoriesOriginalValues,delete this.idCategory,delete this.idDictionary,delete this.idNovel,delete this.dictionarySelector,console.log("destroy Sidebar")}dictionarySelected(l){this.idDictionary=l,this.getCache()}getCache(){0==this.categories.length?this.api.dictionaryCache(this.idNovel,this.idDictionary).subscribe(l=>{this.categories=[],this.categoriesOriginalValues={},this.entriesOriginalValues={},this.categories=Object.values(this.api.Categories(this.idDictionary)),this.categories.forEach(l=>{this.categoriesOriginalValues[l.id]={name:l.name},l.entries=Object.values(this.api.Entries(l.id)),l.entries.forEach(n=>{this.entriesOriginalValues[l.id]||(this.entriesOriginalValues[l.id]={}),this.entriesOriginalValues[l.id][n.id]={entryOriginal:""+n.entryOriginal,entryTranslation:""+n.entryTranslation,description:""+n.description,idCategory:""+n.idCategory}})}),this.refreshTranslation()},l=>{console.log(l)}):this.refreshTranslation()}changeEntry(l){l.id>0&&(l.update=l.entryOriginal!=this.entriesOriginalValues[l.idCategory][l.id].entryOriginal||l.entryTranslation!=this.entriesOriginalValues[l.idCategory][l.id].entryTranslation||!!l.description&&l.description!=this.entriesOriginalValues[l.idCategory][l.id].description||l.idCategory!=this.entriesOriginalValues[l.idCategory][l.id].idCategory)}changeCategory(l){l.id>0&&(l.update=l.name!=this.categoriesOriginalValues[l.id].name,console.log(l.update))}addEntry(l,n){l.push({id:0,entryOriginal:"",entryTranslation:"",description:"",update:!1,idCategory:n})}addCategory(){this.categories.push({id:0,idDictionary:this.idDictionary,name:"",update:!1,entries:[]})}refreshTranslation(){this.Sidebar2Chapter.emit(this.categories)}refreshOriginal(){this.Sidebar2Chapter.emit([])}saveModifications(){this.api.saveFullDictionary(this.idNovel,this.idDictionary,this.categories).subscribe(l=>{l.changes&&(this.dictionaries=Object.values(this.api.Dictionaries(this.idNovel)),this.categories=[],this.getCache()),console.log(l)},l=>{console.log(l)}),console.log(this.categories)}openOutside(l){window.open(`${q.a.backendServer}/static/${this.idNovel}/${this.idDictionary}/${this.route.snapshot.params.noChapter}/`)}}var P=e.ob({encapsulation:0,styles:[[".dictionaryList[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}.dictionaryList[_ngcontent-%COMP%]   .dictionary-selector[_ngcontent-%COMP%]{align-self:flex-start;width:100%}.dictionaryList[_ngcontent-%COMP%]   .dictionary-selector[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:33.3%;height:100%}.dictionaryList[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{align-self:flex-end}.dictionaryList[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{color:#fff;width:100%}.dictionaryList[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{height:30px;width:100%;background:linear-gradient(to bottom,#e570e7 0,#c85ec7 47%,#a849a3 100%)}.dictionaryList[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > h1.changed[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#009013 0,#00b469 47%,#107020 100%)}.dictionaryList[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > h1.new[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#393cff 0,#1f00cc 47%,#1400cc 100%)}.dictionaryList[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%]{background-color:transparent;border:0 solid #fff;color:#fff;margin-left:15px}.dictionaryList[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]{padding:left 10;overflow-y:auto}.dictionaryList[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(odd){background-color:gray}.dictionaryList[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%] > div.changed[_ngcontent-%COMP%]{background-color:green}.dictionaryList[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%] > div.new[_ngcontent-%COMP%]{background-color:#00f}.dictionaryList[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:0 solid #fff;color:#fff}.dictionaryList[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entry-original[_ngcontent-%COMP%], .dictionaryList[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entry-translation[_ngcontent-%COMP%]{width:30%}.dictionaryList[_ngcontent-%COMP%]   .entries[_ngcontent-%COMP%]   .entry-description[_ngcontent-%COMP%]{width:40%}.dictionaryList[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}.dictionaryList[_ngcontent-%COMP%]   .dictionary-buttons[_ngcontent-%COMP%]{width:100%}.dictionaryList[_ngcontent-%COMP%]   .dictionary-buttons[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:50%;height:100%}"]],data:{}});function _(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.pb(1,147456,null,0,k.q,[e.k,e.B,[2,k.s]],{value:[0,"value"]},null),e.pb(2,147456,null,0,k.w,[e.k,e.B,[8,null]],{value:[0,"value"]},null),(l()(),e.Ib(3,null,["",""]))],function(l,n){l(n,1,0,e.ub(1,"",n.context.$implicit.id,"")),l(n,2,0,e.ub(1,"",n.context.$implicit.id,""))},function(l,n){l(n,3,0,n.context.$implicit.language)})}function T(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,14,"li",[["class","dictionary-selector"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,11,"select",[["class","select"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(l,n,t){var i=!0,u=l.component;return"change"===n&&(i=!1!==e.Cb(l,2).onChange(t.target.value)&&i),"blur"===n&&(i=!1!==e.Cb(l,2).onTouched()&&i),"ngModelChange"===n&&(i=!1!==(u.dictionarySelector=t)&&i),"change"===n&&(i=!1!==u.dictionarySelected(t.target.value)&&i),i},null,null)),e.pb(2,16384,null,0,k.s,[e.B,e.k],null,null),e.Fb(1024,null,k.l,function(l){return[l]},[k.s]),e.pb(4,671744,null,0,k.p,[[8,null],[8,null],[8,null],[6,k.l]],{model:[0,"model"]},{update:"ngModelChange"}),e.Fb(2048,null,k.m,null,[k.p]),e.pb(6,16384,null,0,k.n,[[4,k.m]],null,null),(l()(),e.qb(7,0,null,null,3,"option",[["selected","selected"],["value",""]],null,null,null,null,null)),e.pb(8,147456,null,0,k.q,[e.k,e.B,[2,k.s]],{value:[0,"value"]},null),e.pb(9,147456,null,0,k.w,[e.k,e.B,[8,null]],{value:[0,"value"]},null),(l()(),e.Ib(-1,null,["Choose a language"])),(l()(),e.fb(16777216,null,null,1,null,_)),e.pb(12,278528,null,0,a.i,[e.M,e.J,e.q],{ngForOf:[0,"ngForOf"]},null),(l()(),e.qb(13,0,null,null,0,"input",[["class","button is-small is-info"],["type","button"],["value","Refresh Translation"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.refreshTranslation()&&e),e},null,null)),(l()(),e.qb(14,0,null,null,0,"input",[["class","button is-small is-warning"],["type","button"],["value","Refresh to Original"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.refreshOriginal()&&e),e},null,null))],function(l,n){var t=n.component;l(n,4,0,t.dictionarySelector),l(n,8,0,""),l(n,9,0,""),l(n,12,0,t.dictionaries)},function(l,n){l(n,1,0,e.Cb(n,6).ngClassUntouched,e.Cb(n,6).ngClassTouched,e.Cb(n,6).ngClassPristine,e.Cb(n,6).ngClassDirty,e.Cb(n,6).ngClassValid,e.Cb(n,6).ngClassInvalid,e.Cb(n,6).ngClassPending)})}function I(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,27,"div",[],null,null,null,null,null)),e.Fb(512,null,a.u,a.v,[e.q,e.r,e.k,e.B]),e.pb(2,278528,null,0,a.h,[a.u],{ngClass:[0,"ngClass"]},null),e.Eb(3,{changed:0,new:1}),(l()(),e.qb(4,0,null,null,5,"input",[["class","entry-original"],["placeholder","Original"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var i=!0,u=l.component;return"input"===n&&(i=!1!==e.Cb(l,5)._handleInput(t.target.value)&&i),"blur"===n&&(i=!1!==e.Cb(l,5).onTouched()&&i),"compositionstart"===n&&(i=!1!==e.Cb(l,5)._compositionStart()&&i),"compositionend"===n&&(i=!1!==e.Cb(l,5)._compositionEnd(t.target.value)&&i),"ngModelChange"===n&&(i=!1!==(l.context.$implicit.entryOriginal=t)&&i),"ngModelChange"===n&&(i=!1!==u.changeEntry(l.context.$implicit)&&i),i},null,null)),e.pb(5,16384,null,0,k.d,[e.B,e.k,[2,k.a]],null,null),e.Fb(1024,null,k.l,function(l){return[l]},[k.d]),e.pb(7,671744,null,0,k.p,[[8,null],[8,null],[8,null],[6,k.l]],{model:[0,"model"]},{update:"ngModelChange"}),e.Fb(2048,null,k.m,null,[k.p]),e.pb(9,16384,null,0,k.n,[[4,k.m]],null,null),(l()(),e.qb(10,0,null,null,5,"input",[["class","entry-translation"],["placeholder","Translation"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var i=!0,u=l.component;return"input"===n&&(i=!1!==e.Cb(l,11)._handleInput(t.target.value)&&i),"blur"===n&&(i=!1!==e.Cb(l,11).onTouched()&&i),"compositionstart"===n&&(i=!1!==e.Cb(l,11)._compositionStart()&&i),"compositionend"===n&&(i=!1!==e.Cb(l,11)._compositionEnd(t.target.value)&&i),"ngModelChange"===n&&(i=!1!==(l.context.$implicit.entryTranslation=t)&&i),"ngModelChange"===n&&(i=!1!==u.changeEntry(l.context.$implicit)&&i),i},null,null)),e.pb(11,16384,null,0,k.d,[e.B,e.k,[2,k.a]],null,null),e.Fb(1024,null,k.l,function(l){return[l]},[k.d]),e.pb(13,671744,null,0,k.p,[[8,null],[8,null],[8,null],[6,k.l]],{model:[0,"model"]},{update:"ngModelChange"}),e.Fb(2048,null,k.m,null,[k.p]),e.pb(15,16384,null,0,k.n,[[4,k.m]],null,null),(l()(),e.qb(16,0,null,null,5,"input",[["class","entry-description"],["placeholder","Description"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var i=!0,u=l.component;return"input"===n&&(i=!1!==e.Cb(l,17)._handleInput(t.target.value)&&i),"blur"===n&&(i=!1!==e.Cb(l,17).onTouched()&&i),"compositionstart"===n&&(i=!1!==e.Cb(l,17)._compositionStart()&&i),"compositionend"===n&&(i=!1!==e.Cb(l,17)._compositionEnd(t.target.value)&&i),"ngModelChange"===n&&(i=!1!==(l.context.$implicit.description=t)&&i),"ngModelChange"===n&&(i=!1!==u.changeEntry(l.context.$implicit)&&i),i},null,null)),e.pb(17,16384,null,0,k.d,[e.B,e.k,[2,k.a]],null,null),e.Fb(1024,null,k.l,function(l){return[l]},[k.d]),e.pb(19,671744,null,0,k.p,[[8,null],[8,null],[8,null],[6,k.l]],{model:[0,"model"]},{update:"ngModelChange"}),e.Fb(2048,null,k.m,null,[k.p]),e.pb(21,16384,null,0,k.n,[[4,k.m]],null,null),(l()(),e.qb(22,0,null,null,5,"input",[["type","hidden"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var i=!0;return"input"===n&&(i=!1!==e.Cb(l,23)._handleInput(t.target.value)&&i),"blur"===n&&(i=!1!==e.Cb(l,23).onTouched()&&i),"compositionstart"===n&&(i=!1!==e.Cb(l,23)._compositionStart()&&i),"compositionend"===n&&(i=!1!==e.Cb(l,23)._compositionEnd(t.target.value)&&i),"ngModelChange"===n&&(i=!1!==(l.context.$implicit.idCategory=t)&&i),i},null,null)),e.pb(23,16384,null,0,k.d,[e.B,e.k,[2,k.a]],null,null),e.Fb(1024,null,k.l,function(l){return[l]},[k.d]),e.pb(25,671744,null,0,k.p,[[8,null],[8,null],[8,null],[6,k.l]],{model:[0,"model"]},{update:"ngModelChange"}),e.Fb(2048,null,k.m,null,[k.p]),e.pb(27,16384,null,0,k.n,[[4,k.m]],null,null)],function(l,n){var t=l(n,3,0,1==n.context.$implicit.update,0==n.context.$implicit.id);l(n,2,0,t),l(n,7,0,n.context.$implicit.entryOriginal),l(n,13,0,n.context.$implicit.entryTranslation),l(n,19,0,n.context.$implicit.description),l(n,25,0,n.context.$implicit.idCategory)},function(l,n){l(n,4,0,e.Cb(n,9).ngClassUntouched,e.Cb(n,9).ngClassTouched,e.Cb(n,9).ngClassPristine,e.Cb(n,9).ngClassDirty,e.Cb(n,9).ngClassValid,e.Cb(n,9).ngClassInvalid,e.Cb(n,9).ngClassPending),l(n,10,0,e.Cb(n,15).ngClassUntouched,e.Cb(n,15).ngClassTouched,e.Cb(n,15).ngClassPristine,e.Cb(n,15).ngClassDirty,e.Cb(n,15).ngClassValid,e.Cb(n,15).ngClassInvalid,e.Cb(n,15).ngClassPending),l(n,16,0,e.Cb(n,21).ngClassUntouched,e.Cb(n,21).ngClassTouched,e.Cb(n,21).ngClassPristine,e.Cb(n,21).ngClassDirty,e.Cb(n,21).ngClassValid,e.Cb(n,21).ngClassInvalid,e.Cb(n,21).ngClassPending),l(n,22,0,e.Cb(n,27).ngClassUntouched,e.Cb(n,27).ngClassTouched,e.Cb(n,27).ngClassPristine,e.Cb(n,27).ngClassDirty,e.Cb(n,27).ngClassValid,e.Cb(n,27).ngClassInvalid,e.Cb(n,27).ngClassPending)})}function N(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,18,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,10,"li",[["class","categories"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,9,"h1",[],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==(l.component.selectOpenCategory=l.context.index)&&e),e},null,null)),e.Fb(512,null,a.u,a.v,[e.q,e.r,e.k,e.B]),e.pb(4,278528,null,0,a.h,[a.u],{ngClass:[0,"ngClass"]},null),e.Eb(5,{changed:0,new:1}),(l()(),e.qb(6,0,null,null,5,"input",[["class","category-name"],["placeholder","Category Name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var i=!0,u=l.component;return"input"===n&&(i=!1!==e.Cb(l,7)._handleInput(t.target.value)&&i),"blur"===n&&(i=!1!==e.Cb(l,7).onTouched()&&i),"compositionstart"===n&&(i=!1!==e.Cb(l,7)._compositionStart()&&i),"compositionend"===n&&(i=!1!==e.Cb(l,7)._compositionEnd(t.target.value)&&i),"ngModelChange"===n&&(i=!1!==(l.context.$implicit.name=t)&&i),"ngModelChange"===n&&(i=!1!==u.changeCategory(l.context.$implicit)&&i),i},null,null)),e.pb(7,16384,null,0,k.d,[e.B,e.k,[2,k.a]],null,null),e.Fb(1024,null,k.l,function(l){return[l]},[k.d]),e.pb(9,671744,null,0,k.p,[[8,null],[8,null],[8,null],[6,k.l]],{model:[0,"model"]},{update:"ngModelChange"}),e.Fb(2048,null,k.m,null,[k.p]),e.pb(11,16384,null,0,k.n,[[4,k.m]],null,null),(l()(),e.qb(12,0,null,null,6,"li",[["class","entries"]],null,null,null,null,null)),e.Fb(512,null,a.u,a.v,[e.q,e.r,e.k,e.B]),e.pb(14,278528,null,0,a.h,[a.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Eb(15,{hidden:0}),(l()(),e.fb(16777216,null,null,1,null,I)),e.pb(17,278528,null,0,a.i,[e.M,e.J,e.q],{ngForOf:[0,"ngForOf"]},null),(l()(),e.qb(18,0,null,null,0,"input",[["type","button"],["value","+ Add new Entry"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.addEntry(l.context.$implicit.entries,l.context.$implicit.id)&&e),e},null,null))],function(l,n){var t=n.component,e=l(n,5,0,1==n.context.$implicit.update,0==n.context.$implicit.id);l(n,4,0,e),l(n,9,0,n.context.$implicit.name);var i=l(n,15,0,t.selectOpenCategory!=n.context.index);l(n,14,0,"entries",i),l(n,17,0,n.context.$implicit.entries)},function(l,n){l(n,6,0,e.Cb(n,11).ngClassUntouched,e.Cb(n,11).ngClassTouched,e.Cb(n,11).ngClassPristine,e.Cb(n,11).ngClassDirty,e.Cb(n,11).ngClassValid,e.Cb(n,11).ngClassInvalid,e.Cb(n,11).ngClassPending)})}function w(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,11,"ul",[["class","dictionaryList"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,T)),e.pb(2,16384,null,0,a.j,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,N)),e.pb(4,278528,null,0,a.i,[e.M,e.J,e.q],{ngForOf:[0,"ngForOf"]},null),(l()(),e.qb(5,0,null,null,0,"li",[["class","categories"]],null,null,null,null,null)),(l()(),e.qb(6,0,null,null,2,"li",[["class","dictionary-buttons"]],null,null,null,null,null)),(l()(),e.qb(7,0,null,null,0,"input",[["class","button is-small is-primary"],["type","button"],["value","+ Add new Category"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.addCategory()&&e),e},null,null)),(l()(),e.qb(8,0,null,null,0,"input",[["class","button is-small is-danger"],["type","button"],["value","Save Modifications"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.saveModifications()&&e),e},null,null)),(l()(),e.qb(9,0,null,null,2,"li",[["class","dictionary-buttons"]],null,null,null,null,null)),(l()(),e.qb(10,0,null,null,0,"input",[["class","button is-small is-info"],["type","button"],["value","Google Translate"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.openOutside(!0)&&e),e},null,null)),(l()(),e.qb(11,0,null,null,0,"input",[["class","button is-small is-warning"],["type","button"],["value","Open Keyword Translated Raw"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.openOutside(!1)&&e),e},null,null))],function(l,n){var t=n.component;l(n,2,0,t.dictionaries.length>0),l(n,4,0,t.categories)},null)}class L{constructor(l,n,t,e){this.router=l,this.route=n,this.sanitized=t,this.api=e}startContent(){this.idNovel=this.route.snapshot.params.idNovel,this.noChapter=this.route.snapshot.params.noChapter,this.novel=this.api.Novel(this.idNovel),this.loadingChapter=new Promise((l,n)=>{this.novel?!this.chapter||this.chapter.textOriginal?this.getChapter(l,n):(this.chapter=this.api.Chapter(this.idNovel,this.noChapter),this.renderDataView(),l()):this.api.getNovel(this.idNovel).subscribe(t=>{this.novel=this.api.Novel(this.idNovel),this.getChapter(l,n)},l=>{console.log(l),n()})}),this.api.getChapters(this.idNovel).subscribe(l=>{this.chapterPrevious=this.api.Chapter(this.idNovel,+this.noChapter-1),this.chapterNext=this.api.Chapter(this.idNovel,+this.noChapter+1)},l=>{console.log(l)})}renderDataView(){this.renderedTitle=this.chapter.title,this.renderedText=this.chapter.textRevised?this.chapter.textRevised:this.chapter.textOriginal}ngOnInit(){console.log("onInit"),this.startContent()}ngDoCheck(){this.noChapter!=this.route.snapshot.params.noChapter&&this.startContent()}translateText(l){this.loadingChapter.then(n=>{if(this.renderDataView(),l.length>0){let n=[];l.forEach(l=>{l.entries.forEach(t=>{let e=t.entryOriginal.length;n[e]||(n[e]=[]),n[e].push({entryOriginal:t.entryOriginal,entryTranslation:t.entryTranslation,idEntry:t.id,idCategory:l.id,category:l.name})})});for(let l=n.length;l>0;--l)n[l]&&n[l].forEach(l=>{let n=new RegExp(l.entryOriginal,"g");this.renderedTitle=this.renderedTitle.replace(n,"[["+l.entryTranslation+"]]"),this.renderedText=this.renderedText.replace(n,"[["+l.entryTranslation+"]]")});let t=new RegExp("\\]\\]\\[\\[","g");this.renderedTitle=this.renderedTitle.replace(t," "),this.renderedText=this.renderedText.replace(t," "),t=new RegExp("\\]\\]","g"),this.renderedTitle=this.renderedTitle.replace(t,""),this.renderedText=this.renderedText.replace(t,""),t=new RegExp("\\[\\[","g"),this.renderedTitle=this.renderedTitle.replace(t,""),this.renderedText=this.renderedText.replace(t,"")}})}getChapter(l,n){this.api.getChapter(this.idNovel,this.noChapter).subscribe(n=>{this.chapter=this.api.Chapter(this.idNovel,this.noChapter),this.renderDataView(),l()},l=>{console.log(l),n()})}}var J=t("cUpR"),$=e.ob({encapsulation:0,styles:[[".controlButtons[_ngcontent-%COMP%]{margin-top:1px}.controlButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;text-align:center}.novel-content[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{color:#fff}.sidebar[_ngcontent-%COMP%]{z-index:20;position:fixed;width:500px;right:0;top:0;bottom:0;overflow-y:auto;background-color:rgba(63,63,63,.8)}"]],data:{}});function D(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,3,"a",[["class","button is-large is-primary"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,t){var i=!0;return"click"===n&&(i=!1!==e.Cb(l,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&i),i},null,null)),e.pb(1,671744,null,0,o.o,[o.l,o.a,a.g],{routerLink:[0,"routerLink"]},null),e.Db(2,3),(l()(),e.Ib(-1,null,[" Previous "]))],function(l,n){var t=n.component,e=l(n,2,0,"/novel/",t.idNovel,t.chapterPrevious.no);l(n,1,0,e)},function(l,n){l(n,0,0,e.Cb(n,1).target,e.Cb(n,1).href)})}function S(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,3,"a",[["class","button is-large is-primary"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,t){var i=!0;return"click"===n&&(i=!1!==e.Cb(l,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&i),i},null,null)),e.pb(1,671744,null,0,o.o,[o.l,o.a,a.g],{routerLink:[0,"routerLink"]},null),e.Db(2,3),(l()(),e.Ib(-1,null,[" Next "]))],function(l,n){var t=n.component,e=l(n,2,0,"/novel/",t.idNovel,t.chapterNext.no);l(n,1,0,e)},function(l,n){l(n,0,0,e.Cb(n,1).target,e.Cb(n,1).href)})}function E(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,11,"div",[["class","columns controlButtons"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,D)),e.pb(3,16384,null,0,a.j,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(4,0,null,null,4,"div",[["class","column"]],null,null,null,null,null)),(l()(),e.qb(5,0,null,null,3,"a",[["class","button is-large is-primary"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,t){var i=!0;return"click"===n&&(i=!1!==e.Cb(l,6).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&i),i},null,null)),e.pb(6,671744,null,0,o.o,[o.l,o.a,a.g],{routerLink:[0,"routerLink"]},null),e.Db(7,2),(l()(),e.Ib(-1,null,[" Table of Contents "])),(l()(),e.qb(9,0,null,null,2,"div",[["class","column"]],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,S)),e.pb(11,16384,null,0,a.j,[e.M,e.J],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component;l(n,3,0,t.chapterPrevious);var e=l(n,7,0,"/novel/",t.idNovel);l(n,6,0,e),l(n,11,0,t.chapterNext)},function(l,n){l(n,5,0,e.Cb(n,6).target,e.Cb(n,6).href)})}function V(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function F(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"h1",[["class","title"]],null,null,null,null,null)),(l()(),e.Ib(2,null,["",""])),(l()(),e.qb(3,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,0,"div",[["class","novel-content"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(l,n){var t=n.component;l(n,2,0,t.renderedTitle),l(n,4,0,e.ub(1,"",t.renderedText,""))})}function B(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function j(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,2,"div",[["class","sidebar"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"app-chapter-sidebar",[],null,[[null,"Sidebar2Chapter"]],function(l,n,t){var e=!0;return"Sidebar2Chapter"===n&&(e=!1!==l.component.translateText(t)&&e),e},w,P)),e.pb(2,245760,null,0,x,[r.a,o.a],null,{Sidebar2Chapter:"Sidebar2Chapter"}),(l()(),e.fb(0,[["controlButtons",2]],null,0,null,E)),(l()(),e.fb(16777216,null,null,1,null,V)),e.pb(5,540672,null,0,a.p,[e.M],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(l()(),e.fb(16777216,null,null,1,null,F)),e.pb(7,16384,null,0,a.j,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(l()(),e.fb(16777216,null,null,1,null,B)),e.pb(9,540672,null,0,a.p,[e.M],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(l,n){var t=n.component;l(n,2,0),l(n,5,0,e.Cb(n,3)),l(n,7,0,t.chapter),l(n,9,0,e.Cb(n,3))},null)}function K(l){return e.Jb(0,[(l()(),e.qb(0,0,null,null,1,"app-chapter-detail",[],null,null,null,j,$)),e.pb(1,376832,null,0,L,[o.l,o.a,J.b,r.a],null,null)],function(l,n){l(n,1,0)},null)}var A=e.mb("app-chapter-detail",L,K,{},{},[]);const R={title:"List Chapter"},U={title:"View chapter"};class z{}t.d(n,"ChapterModuleNgFactory",function(){return G});var G=e.nb(i,[],function(l){return e.zb([e.Ab(512,e.j,e.Y,[[8,[u.a,M,A]],[3,e.j],e.v]),e.Ab(4608,a.l,a.k,[e.s,[2,a.x]]),e.Ab(4608,k.u,k.u,[]),e.Ab(1073742336,a.b,a.b,[]),e.Ab(1073742336,o.p,o.p,[[2,o.u],[2,o.l]]),e.Ab(1073742336,z,z,[]),e.Ab(1073742336,k.t,k.t,[]),e.Ab(1073742336,k.k,k.k,[]),e.Ab(1073742336,i,i,[]),e.Ab(1024,o.j,function(){return[[{path:"list",component:s,data:R},{path:":noChapter",component:L,data:U},{path:"**",redirectTo:"list"}]]},[])])})}}]);