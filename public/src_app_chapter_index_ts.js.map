{"version":3,"file":"src_app_chapter_index_ts.js","mappings":"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","sources":["./src/app/chapter/chapter-routing.module.ts","./src/app/chapter/chapter.module.ts","./src/app/chapter/detail/detail.component.ts","./src/app/chapter/detail/detail.component.html","./src/app/chapter/form.service.ts","./src/app/chapter/index.ts","./src/app/chapter/list/list.component.ts","./src/app/chapter/list/list.component.html","./src/app/chapter/sidebar/sidebar.component.ts","./src/app/chapter/sidebar/sidebar.component.html","./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ListComponent } from './list/list.component';\nimport { DetailComponent } from './detail/detail.component';\n\nconst routes: Routes = [\n  {\n     path: ''\n    , component: ListComponent\n    , data: { title: 'List Chapters' }\n  },\n  {\n    path: 'dictionary'\n    , loadChildren: () => import('../dictionary').then(m => m.DictionaryModule)\n    , data: { title: 'View dictionary', breadcrumb: 'Dictionaries' }\n  },\n  {\n     path: ':noChapter'\n    , component: DetailComponent\n    // ,loadChildren: () => ChapterModule\n    , data: { title: 'View chapter', breadcrumb: 'View Chapter' }\n  },\n  {\n     path: '**'\n    , redirectTo: ''\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class ChapterRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\n\nimport { ChapterRoutingModule } from './chapter-routing.module';\n\nimport { ListComponent } from './list/list.component';\nimport { DetailComponent, SafeHtmlPipe } from './detail/detail.component';\nimport { SidebarComponent } from './sidebar/sidebar.component';\nimport { FormsModule } from '@angular/forms';\nimport { KeyboardShortcutsModule } from 'ng-keyboard-shortcuts';\n\n@NgModule({\n\tdeclarations: [\n\t\tListComponent,\n\t\tDetailComponent,\n\t\tSidebarComponent,\n\t\tSafeHtmlPipe,\n\t],\n\timports: [\n\t\tCommonModule,\n\t\tChapterRoutingModule,\n        RouterModule,\n\t\tFormsModule,\n\t\tKeyboardShortcutsModule.forRoot()  \n\t]\n})\nexport class ChapterModule { }\n","import { AfterViewInit, Component, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { ApiService } from '../../api';\nimport { DomSanitizer } from '@angular/platform-browser';\n\nimport { Chapter } from '../../_models/chapter';\nimport { Novel } from '../../_models/novel';\nimport { DictionaryCategory } from 'src/app/_models/dictionarycategory';\nimport { CategoryModule } from 'src/app/category';\nimport { count } from 'rxjs-compat/operator/count';\nimport { SidebarComponent } from '../sidebar/sidebar.component';\nimport { ViewportScroller } from '@angular/common';\nimport { AllowIn, KeyboardShortcutsComponent, ShortcutEventOutput, ShortcutInput } from 'ng-keyboard-shortcuts';\n\nimport { PipeTransform, Pipe } from \"@angular/core\";\nimport { DictionaryEntry } from 'src/app/_models';\n\n@Pipe({ name: 'safeHtml' })\nexport class SafeHtmlPipe implements PipeTransform {\n  constructor(private sanitized: DomSanitizer) { }\n  transform(value) {\n    return this.sanitized.bypassSecurityTrustHtml(value);\n  }\n}\n\n@Component({\n  selector: 'app-chapter-detail',\n  templateUrl: './detail.component.html',\n  styleUrls: ['./detail.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class DetailComponent implements OnInit {\n  @ViewChild(SidebarComponent) Sidebar;\n\n  chapter: Chapter;\n  novel: Novel;\n  idNovel: number;\n  noChapter: number;\n\n  chapterPrevious: Chapter;\n  chapterNext: Chapter;\n\n  renderedTitle: string;\n  renderedText: string;\n  loadedChapter: Promise<void>;\n  loadedChapterResolve: () => void;\n\n\n  showSidebar: boolean;\n\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    public sanitized: DomSanitizer,\n    private api: ApiService,\n    private viewport: ViewportScroller\n  ) {\n    this.showSidebar = true;\n    this.translateWorker = new Worker(new URL('../../_workers/translate-text.worker', import.meta.url), { type: 'module' });\n  }\n\n  ngOnInit() {\n    this.loadedChapter = new Promise<void>((resolve) => {\n      this.loadedChapterResolve = resolve;\n    });\n    this.startContent();\n  }\n\n  @ViewChild(KeyboardShortcutsComponent) private keyboard: KeyboardShortcutsComponent;\n  shortcuts: ShortcutInput[] = [];\n  ngAfterViewInit(): void {\n    this.shortcuts.push(\n      {\n        key: \"alt + pageup\",\n        preventDefault: true,\n        label: \"Chapter\",\n        description: \"Previous Chapter\",\n        command: (output: ShortcutEventOutput) => {\n          this.chapterRoute.previous()\n        },\n      },\n      {\n        key: \"alt + pagedown\",\n        preventDefault: true,\n        label: \"Chapter\",\n        description: \"Next Chapter\",\n        command: (output: ShortcutEventOutput) => {\n          this.chapterRoute.next()\n        },\n      },\n    );\n\n    //this.keyboard.select(\"ctrl + f\").subscribe(e => console.log(e));\n  }  \n  ngOnDestroy() {\n    delete this.loadedChapter;\n    console.log('destroy detailed chapter');\n  }\n  ngDoCheck() {\n\n    if (this.noChapter !== this.route.snapshot.params.noChapter) {\n      console.log('changing chapter', this.Sidebar.categories);\n      this.ngOnInit();\n      this.translateText(this.Sidebar.categories);\n    }\n  }\n\n  private startContent() {\n    this.idNovel = this.route.snapshot.params.idNovel;\n    this.noChapter = this.route.snapshot.params.noChapter;\n    Promise.all([\n      this.api.Novel.get({ id: this.idNovel }),\n      this.api.Chapter.get({ idNovel: this.idNovel, no: this.noChapter, text: true })\n    ]).then((values: [Novel, Chapter]) => {\n      this.novel = values[0];\n      this.chapter = values[1];\n\n      this.renderDataView();\n      this.cacheAdjecentChapters(this.noChapter - 0);\n      this.loadedChapterResolve();\n    });\n  }\n  private cacheAdjecentChapters(noChapter: number) {\n    const prev = noChapter - 1;\n    if (prev > 0) {\n      this.api.Chapter.get({ idNovel: this.idNovel, no: prev, text: true })\n        .then(previous => {\n          this.chapterPrevious = previous;\n        });\n    }\n    const next = noChapter - 0 + 1;\n    if (next <= this.novel.numberChapters) {\n      this.api.Chapter.get({ idNovel: this.idNovel, no: next, text: true })\n        .then(Next => {\n          this.chapterNext = Next;\n        });\n    }\n  }\n  renderDataView() {\n    this.renderedTitle = this.chapter.title;\n    this.renderedText = !!this.chapter.textRevision ? this.chapter.textRevision : this.chapter.textOriginal;\n  }\n  private translateWorker:Worker;\n  translateText(categories: DictionaryCategory[]) {\n    // In case the dictionary comes first, then let it wait for the chapter\n    this.loadedChapter.then(_ => {\n      // Confirm that there are categories\n      if(typeof Worker !== 'undefined') {\n        this.translateWorker.onmessage = ( ( e ) => {\n          this.renderedText = e.data.text;\n          this.renderedTitle = e.data.title;\n\n          setTimeout(() => {\n            let els = Array.from(document.getElementsByClassName('replaced'));\n            els.forEach(element => {\n              element.addEventListener('click', (event) => {\n                let idxs = (event.target as HTMLElement).id.split('-');\n                this.Sidebar.textPointer(idxs[1], idxs[2]);\n              })\n            });\n          }, 200);\n        })\n        this.translateWorker.postMessage({\n          categories,\n          title: this.chapter.title,\n          text: !!this.chapter.textRevision ? this.chapter.textRevision : this.chapter.textOriginal\n        })\n      } else {\n        console.log('use some browser, goddamnit');\n      }\n    });\n\n  }\n  toogleSidebar() {\n    if (this.showSidebar)\n      this.showSidebar = false;\n    else\n      this.showSidebar = true;\n  }\n\n  public chapterRoute = {\n    next: () => {\n      document.getElementById('content').scrollTop = 0;\n      this.router.navigate(['novel', this.idNovel, this.chapterNext.no]);\n    },\n    previous: () => {\n      document.getElementById('content').scrollTop = 0;\n      this.router.navigate(['novel', this.idNovel, this.chapterPrevious.no]);\n    }\n  }\n\n}\n","<div class='flexContent'>\n\t<!--div class=\"show-sidebar\" (click)=\"toogleSidebar()\"></div-->\n\t<div class=\"sidebar\" [hidden]=\"!showSidebar\">\n\t\t<app-chapter-sidebar #SidebarChild (Sidebar2Chapter)=\"translateText($event)\"></app-chapter-sidebar>\n\t</div>\n\t<div #Content id=\"content\" class='content'>\n\t\t<ng-template #controlButtons>\n\t\t\t<div class=\"columns controlButtons\">\n\t\t\t\t<div class=\"column\">\n\t\t\t\t\t<a class=\"button is-large is-primary\" *ngIf=\"chapterPrevious\" (click)=\"chapterRoute.previous()\"> Previous </a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"column\">\n\t\t\t\t\t<a class=\"button is-large is-primary\" [routerLink]=\"['/novel/', idNovel]\"> Table of Contents </a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"column\">\n\t\t\t\t\t<a class=\"button is-large is-primary\" *ngIf=\"chapterNext\" (click)=\"chapterRoute.next()\"> Next </a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ng-template>\n\n\t\t<ng-container *ngTemplateOutlet=\"controlButtons\"></ng-container>\n\t\t<ng-container *ngIf=\"chapter\">\n\t\t\t<h2 *ngIf=\"chapter.arc\">{{ chapter.arc }}</h2>\n\t\t\t<h1 class='title'  [innerHTML]=\"renderedTitle | safeHtml\"></h1>\n\t\t\t<hr />\n\t\t\t<div class=\"novel-content\" [innerHTML]=\"renderedText | safeHtml\">\n\n\t\t\t</div>\n\t\t</ng-container>\n\t\t<ng-container *ngTemplateOutlet=\"controlButtons\"></ng-container>\n\t</div>\n\n</div>\n<ng-keyboard-shortcuts [shortcuts]=\"shortcuts\"></ng-keyboard-shortcuts>\n<ng-keyboard-shortcuts-help [key]=\"'f1'\" [title]=\"'Help'\"></ng-keyboard-shortcuts-help>","import { ElementRef, Injectable, QueryList, ViewChildren } from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { ApiService } from '../api';\nimport { DictionaryCategory, DictionaryEntry, EntryForm } from '../_models';\nimport { Dictionary } from '../_models/dictionary';\nimport { FormField, Meta, Option } from '../_models/formField';\nimport { Novel } from '../_models/novel';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FormService {\n  idDictionary: number;\n\n  categories: DictionaryCategory[] = [];\n  categoriesOriginalValues: DictionaryCategory[] = [];\n\n  indexes: string[] = [];\n\n  @ViewChildren('categoryDOM') public DOMcategories: QueryList<ElementRef<HTMLDivElement>>;\n\n  constructor(\n    public api: ApiService\n  ) { }\n\n  rebuildCache(resolveDic): void {\n    this.api.Category.getAll({ idDictionary: this.idDictionary })\n      .then(async (categories) => {\n\n        this.categories = Object.values(categories);\n        const LoadedPromise = [];\n\n        this.categories.forEach(async (category, categoryIndex) => {\n          LoadedPromise.push(new Promise<void>((resolveCat, rejectCat) => {\n\n            this.api.Entry.getAll({ idDictionary: this.idDictionary, idCategory: category.id })\n              .then(async (entries) => { \n                LoadedPromise.push(new Promise<void>(async (resolveEnt, rejectEnt) => {\n                  /** @var DictionaryEntry[] category.entries */\n                  category.entries = Object.values(entries);\n                  resolveEnt();\n                }));\n              });\n            resolveCat();\n          }));\n        });\n\n        Promise.all(LoadedPromise)\n          .then(_ => {\n            this.categoriesOriginalValues = JSON.parse(JSON.stringify(this.categories));\n            resolveDic();\n          });\n      });\n  }\n  addEntry(category:DictionaryCategory, category_id:number, category_index:number,entry?:DictionaryEntry) {\n    if (!category.entries) {\n      category.entries = [];\n    }\n    category.entries.push(new EntryForm(entry));\n\n    // Wait until new input is rendered to focus it\n    setTimeout(() => {\n      let DOMLi: HTMLDivElement;\n      let DOMInput: HTMLInputElement;\n      if (this.DOMcategories){\n        let DOMcategory = this.DOMcategories.toArray()[category_index];\n        if (DOMcategory) {\n          DOMLi = DOMcategory.nativeElement;\n        }\n      }\n      // Fallback for AOT\n      if (!DOMLi) {\n        DOMLi = <HTMLDivElement>document.getElementById(\"categoryDOM-\" + category_index);\n      }\n      DOMInput = (DOMLi.children[DOMLi.children.length - 2].children[0] as HTMLInputElement);\n      DOMInput.focus();\n    },150)\n  }\n  duplicateEntry(category:DictionaryCategory, category_id:number, category_index:number, entry:DictionaryEntry|EntryForm) {\n    let clone = JSON.parse(JSON.stringify(entry));\n    delete clone.id;\n    this.addEntry(category, category_id, category_index, clone);\n  }\n  addCategory() {\n    this.categories.push(new DictionaryCategory(null, this.idDictionary));\n  }\n\n\n  changeEntry(entry: EntryForm, catIdx?: number, entIdx?: number, target?:any) {\n    if (entry.reset) {\n      if (this.categories[catIdx].entries[entIdx].id) {\n        this.categories[catIdx].entries[entIdx] = new EntryForm(this.categoriesOriginalValues[catIdx].entries[entIdx]);\n      } else {\n        this.categories[catIdx].entries[entIdx] = new EntryForm(null, this.categories[catIdx].id);\n      }\n    } else {\n      if (entry.delete) {\n        if (!entry.id) {\n          this.categories[catIdx].entries.splice(entIdx, 1);\n        }\n      } else {\n        if (entry.id) {\n          entry.update = entry.entryOriginal    !== this.categoriesOriginalValues[catIdx].entries[entIdx].entryOriginal\n                      || entry.entryTranslation !== this.categoriesOriginalValues[catIdx].entries[entIdx].entryTranslation\n                      || entry.description      !== this.categoriesOriginalValues[catIdx].entries[entIdx].description\n                      || entry.idCategory       !== this.categoriesOriginalValues[catIdx].entries[entIdx].idCategory\n                      || entry.sufix            !== this.categoriesOriginalValues[catIdx].entries[entIdx].sufix\n                      || entry.prefix           !== this.categoriesOriginalValues[catIdx].entries[entIdx].prefix\n            ;\n        }\n      }\n    }\n  }\n  changeCategory(category, idx) {\n    if (category.id) {\n      category.update = category.name !== this.categoriesOriginalValues[idx].name;\n    }\n  }\n\n}\n","export * from './chapter.module';","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { ApiService } from '../../api';\n\nimport { Chapter } from '../../_models/chapter';\nimport { Novel } from '../../_models/novel';\nimport { environment } from 'src/environments/environment';\nimport { Dictionary } from 'src/app/_models/dictionary';\n\n@Component({\n  selector: 'app-chapter-list',\n  templateUrl: './list.component.html',\n  styleUrls: ['./list.component.scss']\n})\nexport class ListComponent implements OnInit {\n\n  chapters: Chapter[] = [];\n  dictionaries: Dictionary[] = [];\n  novel: Novel;\n  idNovel: number;\n\n  updating:boolean[] = [];\n\n  constructor(\n      private router: Router\n    , private route: ActivatedRoute\n    , private api: ApiService\n    ) { }\n\n  sortingAlg = {\n    numberAsc: (a: Chapter, b: Chapter) => {\n      return a.no > b.no;\n    },\n    titleAsc: (a: Chapter, b: Chapter) => {\n      return a.title > b.title;\n    },\n    createdAsc: (a: Chapter, b: Chapter) => {\n      return a.dateCreated > b.dateCreated;\n    },\n    updatedAsc: (a: Chapter, b: Chapter) => {\n      return (a.dateRevision ?? a.dateCreated) > (b.dateRevision ?? b.dateCreated);\n    },\n    numberDesc: (a: Chapter, b: Chapter) => {\n      return a.no < b.no;\n    },\n    titleDesc: (a: Chapter, b: Chapter) => {\n      return a.title < b.title;\n    },\n    createdDesc: (a: Chapter, b: Chapter) => {\n      return a.dateCreated < b.dateCreated;\n    },\n    updatedDesc: (a: Chapter, b: Chapter) => {\n      return (a.dateRevision ?? a.dateCreated) < (b.dateRevision ?? b.dateCreated);\n    },\n  }\n  currentSort = {\n    by: 'number',\n    dir: '-'\n  }\n  sort(sortAlg:string, dir:string) {\n    this.currentSort.by = sortAlg;\n    this.currentSort.dir = dir;\n    this.chapters.sort(this.sortingAlg[this.currentSort.by + (dir == '+' ? 'Asc' : 'Desc' ) ] );\n  }\n\n  ngOnInit() {\n    this.idNovel = this.route.snapshot.params.idNovel;\n    this.api.Novel.get({id: this.idNovel})\n                .then(novel => {\n                  this.novel = novel;\n                  this.api.Dictionary.getAll({idNovel: this.idNovel})\n                          .then(dictionaries => {\n                            this.dictionaries = Object.values(dictionaries);\n                            this.api.Chapter.getAll({idNovel: this.idNovel})\n                                            .then(chapters => {\n                                              this.chapters = Object.values(chapters);\n                                              this.sort(this.currentSort.by, this.currentSort.dir);\n                                            });\n                          });\n                });\n  }\n  disableupdate:number = 0;\n  async updateChapter(noChapter: number) {\n    this.updating[noChapter] = true;\n    this.disableupdate++;\n    return this.api.Chapter.chapterAutoUpdate({ idNovel:this.idNovel, no: noChapter })\n      .then(res => {\n        console.log('Chapter updated', res);\n        --this.disableupdate;\n        /**\n         * Auto update on the list too\n         */\n        this.api.Chapter.getAll({ idNovel: this.idNovel })\n          .then(chapters => {\n            this.chapters = Object.values(chapters);\n            this.sort(this.currentSort.by, this.currentSort.dir);\n          });\n        delete this.updating[noChapter];\n      }, err => {\n        console.log(err);\n      });\n  }\n  async updateAllChapters(){\n    if(this.disableupdate == 0){\n      for(let i=0; i<this.chapters.length; ++i){\n        await (new Promise((resolve) => {\n          this.updateChapter(this.chapters[i].no)\n              .then(() => {\n                resolve(true);\n              });\n        }))\n      }\n    }\n  }\n  openGT(chapter: Chapter, dictionary: Dictionary) {\n      let url = `${environment.backendServer}/static/${this.idNovel}/${dictionary.id}/${chapter.no}/1`;\n      url = 'https://translate.google.com/translate?sl=auto&tl=en&u=' + url;\n      window.open(url);\n  }\n\n  updateChapters() {\n    this.disableupdate++;\n    this.api.Chapter.autoUpdate({ idNovel : this.idNovel })\n      .then(res => {\n        /**\n         * Update the list too\n         */\n        --this.disableupdate;\n        this.api.Chapter.getAll({ idNovel: this.idNovel })\n                      .then(chapters => {\n                        this.chapters = Object.values(chapters);\n                        this.sort(this.currentSort.by, this.currentSort.dir);\n                      });\n      }, err => {\n        console.log(err);\n      });\n  }\n\n}\n","<ng-template #actionButtons>\n\t<div class=\"columns actionButtons\">\n        <div class=\"column\">\n            <a [routerLink]=\"['/novel/', idNovel,'dictionary']\" class=\"button is-primary\">Dictionary</a>\n        </div>\n\t\t<div class=\"column\" *ngIf=\"novel && novel.driver == 'manual'\">\n\t\t\t<a routerLink=\"['/novel/',idNovel,'add']\" class=\"button is-info\">Import Chapter</a>\n\t\t</div>\n\t\t<div class=\"column\" *ngIf=\"novel && novel.driver != 'manual'\">\n\t\t\t<a (click)=\"updateChapters()\" class=\"button\" [ngClass]=\"{'is-danger': disableupdate > 0, 'is-info': disableupdate == 0}\">Update Chapters</a>\n\t\t</div>\n\t\t<div class=\"column\" *ngIf=\"novel && novel.driver == 'kakuyomu'\">\n\t\t\t<a (click)=\"updateAllChapters()\" class=\"button\" [ngClass]=\"{'is-danger': disableupdate > 0, 'is-info': disableupdate == 0}\">Update All Chapters (Alternative)</a>\n\t\t</div>\n\t\t<!--div class=\"column\" *ngIf=\"novel && novel.driver == 'syosetu'\">\n\t\t\t<a (click)=\"downloadChapter()\" class=\"button is-info\">Add Next Chapter</a>\n\t\t</div-->\n\t</div>\n</ng-template>\n<div id=\"novelInfo\" *ngIf=\"novel\">\n\t<p>Name:<br /><b>{{ novel.nameCustom }}</b></p>\n\t<p>Original:<br /><b>{{ novel.nameOriginal }}</b></p>\n\t<p>Number of Chapters:<br /><b>{{ novel.numberChapters }}</b></p>\n\t<p>Source:<br /><a href=\"{{ novel.urlSource }}\" target=\"_blank\">{{ novel.urlSource }}</a></p>\n</div>\n<div id='novelTable'>\n\t<ng-container *ngTemplateOutlet=\"actionButtons\"></ng-container>\n\t<table class='table is-striped is-hoverable'>\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th [ngClass]=\"{'orderedBy': currentSort.by == 'number'}\">\n\t\t\t\t\tNumber\n\t\t\t\t\t<i class=\"fas fa-sort-numeric-down\" *ngIf=\"currentSort.by != 'number' || currentSort.dir != '-'\" (click)=\"sort('number', '-')\"></i>\n\t\t\t\t\t<i class=\"fas fa-sort-numeric-up\" *ngIf=\"currentSort.by == 'number' && currentSort.dir == '-'\" (click)=\"sort('number', '+')\"></i>\n\t\t\t\t</th>\n\t\t\t\t<th>\n\t\t\t\t\tArc\n\t\t\t\t</th>\n\t\t\t\t<th [ngClass]=\"{'orderedBy': currentSort.by == 'title'}\">\n\t\t\t\t\tTitle\n\t\t\t\t\t<i class=\"fas fa-sort-alpha-down\" *ngIf=\"currentSort.by != 'title' || currentSort.dir != '-'\" (click)=\"sort('title', '-')\"></i>\n\t\t\t\t\t<i class=\"fas fa-sort-alpha-up\" *ngIf=\"currentSort.by == 'title' && currentSort.dir == '-'\" (click)=\"sort('title', '+')\"></i>\n\t\t\t\t</th>\n\t\t\t\t<th [ngClass]=\"{'orderedBy': currentSort.by == 'created'}\">\n\t\t\t\t\tDate Created\n\t\t\t\t\t<i class=\"fas fa-sort-numeric-down\" *ngIf=\"currentSort.by != 'created' || currentSort.dir != '-'\" (click)=\"sort('created', '-')\"></i>\n\t\t\t\t\t<i class=\"fas fa-sort-numeric-up\" *ngIf=\"currentSort.by == 'created' && currentSort.dir == '-'\" (click)=\"sort('created', '+')\"></i>\n\t\t\t\t</th>\n\t\t\t\t<th [ngClass]=\"{'orderedBy': currentSort.by == 'updated'}\">\n\t\t\t\t\tDate Updated\n\t\t\t\t\t<i class=\"fas fa-sort-numeric-down\" *ngIf=\"currentSort.by != 'updated' || currentSort.dir != '-'\" (click)=\"sort('updated', '-')\"></i>\n\t\t\t\t\t<i class=\"fas fa-sort-numeric-up\" *ngIf=\"currentSort.by == 'updated' && currentSort.dir == '-'\" (click)=\"sort('updated', '+')\"></i>\n\t\t\t\t</th>\n\t\t\t\t<th>\n\t\t\t\t\tDictionary<br />Google Translator\n\t\t\t\t</th>\n\t\t\t\t<th>\n\t\t\t\t\tActions\n\t\t\t\t</th>\n\t\t\t\t<!--th>Actions</th-->\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<ng-container *ngFor=\"let chapter of chapters\" >\n\t\t\t\t<tr title=\"{{ novel.title }}\" [ngClass]=\"{'disabled': updating && updating[chapter.no]}\">\n\t\t\t\t\t<td>{{ chapter.no }}</td>\n\t\t\t\t\t<td [routerLink]=\"['/novel/', chapter.idNovel, chapter.no]\">{{ chapter.arc }}</td>\n\t\t\t\t\t<td [routerLink]=\"['/novel/', chapter.idNovel, chapter.no]\">{{ chapter.title }}</td>\n\t\t\t\t\t<td [routerLink]=\"['/novel/', chapter.idNovel, chapter.no]\">{{ chapter.dateOriginalPost }}</td>\n\t\t\t\t\t<td [routerLink]=\"['/novel/', chapter.idNovel, chapter.no]\">{{ chapter.dateOriginalRevision }}</td>\n                    <!--td><ng-container *ngIf=\"chapter.hasText == 1; then success else danger\"></ng-container></td-->\n                    <td>\n                        <p *ngFor=\"let dictionary of dictionaries\" >\n\t\t\t\t\t\t\t<a (click)=\"openGT(chapter,dictionary);\">{{dictionary.language}}</a>\n\t\t\t\t\t\t</p>\n                    </td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<i class=\"fas fa-align-justify is-danger\" *ngIf=\"!chapter.hasText\" title=\"Text is not loaded\"></i>\n\t\t\t\t\t\t<i class=\"fas fa-align-justify\" *ngIf=\"chapter.hasText\" title=\"Text is loaded\"></i>\n\t\t\t\t\t\t<a (click)=\"updateChapter(chapter.no)\">\n\t\t\t\t\t\t\t<i class=\"has-text-info fas fa-sync\" title=\"Update Chapter\"></i>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<a href=\"{{ chapter.urlSource }}\" target=\"_blank\">\n\t\t\t\t\t\t\t<i class=\"has-text-info fas fa-external-link-alt\" title=\"Source\"></i>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<!--a [routerLink]=\"['/novel/', chapter.idNovel, chapter.no, 'edit']\">UPD</a>\n\t\t\t\t\t\t/\n\t\t\t\t\t\t<a [routerLink]=\"['/novel/', chapter.idNovel, chapter.no, 'del']\">DEL</a-->\n\t\t\t\t\t</td>\n\t\t\t\t\t<ng-template #success>\n\t\t\t\t\t\t<a class='button is-success'>\n\t\t\t\t\t\t\t<span class=\"icon is-small\">\n\t\t\t\t\t\t\t\t<i class=\"fas fa-check\"></i>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</ng-template>\n\t\t\t\t\t<ng-template #danger>\n\t\t\t\t\t\t<a class='button is-danger'>\n\t\t\t\t\t\t\t<span class=\"icon is-small\">\n\t\t\t\t\t\t\t\t<i class=\"fas fa-times\"></i>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</ng-template>\n\t\t\t\t</tr>\n\t\t\t</ng-container>\n\t\t</tbody>\n\t</table>\n</div>","import { Component, OnInit, Output, EventEmitter, OnDestroy, ViewChild, AfterViewInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { NgModel } from '@angular/forms';\n\nimport { DictionaryEntry, EntryForm } from '../../_models/dictionaryentry';\nimport { DictionaryCategory } from '../../_models/dictionarycategory';\nimport { Dictionary } from '../../_models/dictionary';\nimport { ApiService } from 'src/app/api';\nimport { environment } from 'src/environments/environment';\nimport { Novel } from 'src/app/_models/novel';\nimport { CacheService } from '../cache.service';\nimport { DetailComponent } from '../detail/detail.component';\nimport { FormService } from '../form.service';\nimport { AllowIn, KeyboardShortcutsComponent, ShortcutEventOutput, ShortcutInput } from 'ng-keyboard-shortcuts';\n\n@Component({\n  selector: 'app-chapter-sidebar',\n  templateUrl: './sidebar.component.html',\n  styleUrls: ['./sidebar.component.scss']\n})\nexport class SidebarComponent extends FormService implements OnInit, OnDestroy, AfterViewInit {\n\n  @Output() Sidebar2Chapter: EventEmitter<DictionaryCategory[]> = new EventEmitter<DictionaryCategory[]>();\n\n  dictionaries: Dictionary[] = [];\n  categories: DictionaryCategory[] = [];\n\n  idCategory: number;\n  idDictionary: number;\n  idNovel: number;\n  novel: Novel;\n\n  dictionarySelector: any = '';\n\n\n  constructor(\n      public api: ApiService\n    , private route: ActivatedRoute\n  ) {\n    super(api);\n  }\n\n  ngOnInit() {\n    this.idNovel = this.route.snapshot.params.idNovel;\n\n    this.api.Dictionary.getAll({idNovel: this.idNovel})\n      .then((dictionaries: Dictionary[]) => {\n        this.dictionaries = dictionaries;\n        this.dictionarySelector = dictionaries[0].id;\n        this.dictionarySelected(this.dictionarySelector);\n      });\n  }\n\n  @ViewChild(KeyboardShortcutsComponent) private keyboard: KeyboardShortcutsComponent;\n  shortcuts: ShortcutInput[] = [];\n  selectOpenCategory:number = -1;\n  selectedEntry:number = -1;\n  private getSelectedEntryType = (inputId:string) => {\n    let explode = inputId.split('-');\n    if(!explode[3]){\n      return '';\n    }\n    else {\n      return '-'+explode[3];\n    }\n  }\n  private moveFocus = (id: string, output?:ShortcutEventOutput) => {\n    let el = document.getElementById(id);\n    if (el){\n      el.focus();\n      el.scrollIntoView({\n        behavior:'smooth',\n        block: 'center',\n        inline: 'center',\n      });\n    }\n    else {\n      console.error(id);\n    }\n  }\n  private moveCurrentCategory = (output?:ShortcutEventOutput) => {\n    let id = 'category-' + this.selectOpenCategory;\n    this.moveFocus(id, output);\n  }\n  private moveCurrentEntry = (entryType: string = '', output?: ShortcutEventOutput) => {\n    let id = 'entry-' + this.selectOpenCategory + '-' + this.selectedEntry + entryType;\n    this.moveFocus(id, output);\n  }\n\n  changeEntryTarget(entry:EntryForm, i:number, j:number, target?:HTMLInputElement|HTMLSelectElement){\n    if(target){\n      const els = target.id.split('-');\n      if(els[0] == 'entry'){\n        switch(els[3]) {\n          case 'sufix':\n            entry.sufix = parseInt(target.value);\n            break;\n          case 'prefix':\n            entry.prefix = parseInt(target.value);\n            break;\n          case 'desc':\n            entry.description = target.value;\n            break;\n          case 'trans':\n            entry.entryTranslation = target.value;\n            break;\n          default:\n            entry.entryOriginal = target.value;\n        }\n      }\n    }\n    this.changeEntry(entry,i,j);\n  }\n\n  ngOnDestroy() {\n    delete this.dictionaries;\n    delete this.categories;\n    delete this.categoriesOriginalValues;\n    delete this.idCategory;\n    delete this.idDictionary;\n    delete this.idNovel;\n    delete this.dictionarySelector;\n    console.log('destroy Sidebar');\n  }\n  dictionarySelected(idDictionary: number) {\n    this.idDictionary = idDictionary;\n    this.getCache();\n  }\n  private getCache() {\n    if (this.categories.length === 0) {\n      this.api.Dictionary.getCache(this.idDictionary)\n        .then((status) => {\n          this.PrepareCacheThenTranslate(status);\n        });\n    } else {\n      this.refreshTranslation();\n    }\n  }\n  private PrepareCacheThenTranslate(status) {\n    if (status) {\n      const loadedDictionary = new Promise<void>((resolveDic, rejectDic) => {\n        this.rebuildCache(resolveDic);\n      });\n\n      loadedDictionary.then(_ => {\n        this.refreshTranslation();\n      });\n    }\n  }\n\n  refreshTranslation() {\n    this.Sidebar2Chapter.emit(this.categories);\n  }\n  refreshOriginal() {\n    this.Sidebar2Chapter.emit([]);\n  }\n  saving: boolean = false;\n  saveModifications() {\n    this.saving = true;\n    this.api.Dictionary.fullSave(this.idDictionary, this.categories)\n      .then(res => {\n        this.categories = [];\n        this.getCache();\n        this.refreshTranslation();\n\n        this.saving = false;\n      }).catch(res => {\n        this.saving = false;\n        console.error(res);\n      });\n  }\n\n  openOutside(translate) {\n    const no = this.route.snapshot.params.noChapter;\n    let url = `${environment.backendServer}/static/${this.idNovel}/${this.idDictionary}/${no}/`;\n    if (translate) {\n      url = 'https://translate.google.com/translate?sl=auto&tl=en&u=' + url;\n    }\n    window.open(url);\n  }\n\n  textPointer(catIdx: number, entIdx: number) {\n    this.selectOpenCategory = catIdx;\n    this.selectedEntry = entIdx;\n    setTimeout(() => {\n      this.moveCurrentEntry('');\n    }, 100)\n  }\n  activateSufix(entry:EntryForm, catIdx:number, entIdx:number) {\n    switch(true){\n      case !!entry.sufix:\n        entry.sufix = null;\n        entry.prefix = this.categories[0].id;\n        break;\n      case !!entry.prefix:\n        entry.sufix = null;\n        entry.prefix = null;\n        break;\n      default:\n        entry.sufix = this.categories[0].id;\n        entry.prefix = null;\n    }\n    this.changeEntry(entry, catIdx, entIdx);\n  }\n  ngAfterViewInit(): void {\n    this.shortcuts.push(\n      {\n        key: [\"f5\"],\n        preventDefault: true,\n        label: \"Dictionary\",\n        description: \"Refresh Translation\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          this.refreshTranslation();\n        }\n      },\n      {\n        key: [\"f4\"],\n        preventDefault: true,\n        label: \"Dictionary\",\n        description: \"Refresh to Original\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          this.refreshOriginal();\n        }\n      },\n      {\n        key: [\"ctrl + s\"],\n        preventDefault: true,\n        label: \"Dictionary\",\n        description: \"Save Modifications\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          this.saveModifications();\n        }\n      },\n      {\n        key: [\"ctrl + up\", \"ctrl + alt + up\"],\n        preventDefault: true,\n        label: \"Categories\",\n        description: \"Category Up\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          this.selectedEntry = -1;\n          if (this.selectOpenCategory > 0) {\n            this.selectOpenCategory--\n          } else {\n            this.selectOpenCategory = this.categories.length - 1;\n          }\n          this.moveCurrentCategory(output);\n        }\n      },\n      {\n        key: [\"ctrl + down\", \"ctrl + alt + down\"],\n        preventDefault: true,\n        label: \"Categories\",\n        description: \"Category Down\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          this.selectedEntry = -1;\n          if (this.selectOpenCategory < this.categories.length - 1) {\n            this.selectOpenCategory++\n          } else {\n            this.selectOpenCategory = 0;\n          }\n          this.moveCurrentCategory(output);\n        }\n      },\n      {\n        key: [\"ctrl + alt + plus\", \"ctrl + alt + n\"],\n        preventDefault: true,\n        label: \"Categories\",\n        description: \"Add New Category\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          this.addCategory();\n          this.selectOpenCategory = this.categories.length - 1;\n          setTimeout(() => {\n            this.moveCurrentCategory(output);\n          }, 100)\n        }\n      },\n      {\n        key: \"alt + down\",\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Move Down on Entry List\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            this.selectOpenCategory = 0;\n          }\n          if (this.categories[this.selectOpenCategory].entries) {\n            if (this.selectedEntry >= this.categories[this.selectOpenCategory].entries.length - 1) {\n              this.selectedEntry = 0;\n            } else {\n              this.selectedEntry++;\n            }\n            let target = (output.event.target as HTMLElement)\n            let entryType: string = (target.id ? this.getSelectedEntryType(target.id) : '');\n            if (\n              (entryType == '-sufix' && !this.categories[this.selectOpenCategory].entries[this.selectedEntry].sufix) ||\n              (entryType == '-prefix' && !this.categories[this.selectOpenCategory].entries[this.selectedEntry].prefix)\n            ) {\n              entryType = '-trans';\n            }\n            this.moveCurrentEntry(entryType, output);\n          }\n        }\n      },\n      {\n        key: \"alt + up\",\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Move Up on Entry List\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            this.selectOpenCategory = 0;\n          }\n          if (this.categories[this.selectOpenCategory].entries) {\n            if (this.selectedEntry <= 0) {\n              this.selectedEntry = this.categories[this.selectOpenCategory].entries.length - 1;\n            } else {\n              this.selectedEntry--;\n            }\n            let target = (output.event.target as HTMLElement)\n            let entryType: string = (target.id ? this.getSelectedEntryType(target.id) : '');\n            if (\n              (entryType == '-sufix' && !this.categories[this.selectOpenCategory].entries[this.selectedEntry].sufix) ||\n              (entryType == '-prefix' && !this.categories[this.selectOpenCategory].entries[this.selectedEntry].prefix)\n            ){\n              entryType = '-trans';\n            }\n            this.moveCurrentEntry(entryType, output);\n          }\n        }\n      },\n      {\n        key: \"alt + right\",\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Move Right on Entry List\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            return;\n          }\n          if (!this.categories[this.selectOpenCategory].entries)\n            return;\n          let target = (output.event.target as HTMLElement)\n          if (target.id.indexOf('entry-') !== 0)\n            return;\n\n          let entryType: string = (target.id ? this.getSelectedEntryType(target.id) : '');\n          switch (entryType) {\n            case '':\n              if (this.categories[this.selectOpenCategory].entries[this.selectedEntry].sufix){\n                entryType = '-sufix';\n              } else {\n                entryType = '-trans';\n              }\n              break;\n            case '-sufix':\n              entryType = '-trans';\n              break;\n            case '-trans':\n\n              if (this.categories[this.selectOpenCategory].entries[this.selectedEntry].prefix) {\n                entryType = '-prefix';\n              } else {\n                entryType = '-desc';\n              }\n              break;\n            case '-prefix':\n              entryType = '-desc';\n              break;\n          }\n          this.moveCurrentEntry(entryType, output);\n        }\n      },\n      {\n        key: \"alt + left\",\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Move Left on Entry List\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            return;\n          }\n          if (!this.categories[this.selectOpenCategory].entries)\n            return;\n\n          let target = (output.event.target as HTMLElement)\n          if (target.id.indexOf('entry-') !== 0)\n            return;\n\n          let entryType: string = (target.id ? this.getSelectedEntryType(target.id) : '');\n\n          switch (entryType) {\n            case '-desc':\n              if (this.categories[this.selectOpenCategory].entries[this.selectedEntry].prefix) {\n                entryType = '-prefix';\n              } else {\n                entryType = '-trans';\n              }\n              break;\n            case '-prefix':\n              entryType = '-trans';\n              break;\n            case '-trans':\n              if (this.categories[this.selectOpenCategory].entries[this.selectedEntry].sufix) {\n                entryType = '-sufix';\n              } else {\n                entryType = '';\n              }\n              break;\n            case '-sufix':\n              entryType = '';\n              break;\n          }\n          this.moveCurrentEntry(entryType, output);\n        }\n      },\n      {\n        key: [\"alt + home\", \"alt + 1\"],\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Move to First Entry\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            this.selectOpenCategory = 0;\n          }\n          if (this.categories[this.selectOpenCategory].entries) {\n            this.selectedEntry = 0;\n            let target = (output.event.target as HTMLElement)\n            let entryType: string = (target.id ? this.getSelectedEntryType(target.id) : '');\n            this.moveCurrentEntry(entryType, output);\n          }\n        }\n      },\n      {\n        key: \"alt + end\",\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Move to Last Entry\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            this.selectOpenCategory = 0;\n          }\n          if (this.categories[this.selectOpenCategory].entries) {\n            this.selectedEntry = this.categories[this.selectOpenCategory].entries.length - 1;\n            let target = (output.event.target as HTMLElement)\n            let entryType: string = (target.id ? this.getSelectedEntryType(target.id) : '');\n            this.moveCurrentEntry(entryType, output);\n          }\n        }\n      },\n\n      {\n        key: [\"alt + plus\", \"alt + insert\", \"alt + n\"],\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Add New Entry\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            return;\n          }\n          this.addEntry(this.categories[this.selectOpenCategory], this.categories[this.selectOpenCategory].id, this.selectOpenCategory);\n\n          this.selectedEntry = this.categories[this.selectOpenCategory].entries.length - 1;\n          setTimeout(() => {\n            this.moveCurrentEntry('', output);\n          }, 100)\n        }\n      },\n      {\n        key: [\"ctrl + d\", \"alt + d\"],\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Duplicate Entry\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            return;\n          }\n          if (this.selectedEntry < 0) {\n            return;\n          }\n          this.duplicateEntry(\n            this.categories[this.selectOpenCategory],\n            this.categories[this.selectOpenCategory].id,\n            this.selectOpenCategory,\n            this.categories[this.selectOpenCategory].entries[this.selectedEntry]\n          );\n        }\n      },\n      {\n        key: [\"alt + -\", \"alt + d\"],\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Remove Entry\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            return;\n          }\n          if (this.selectedEntry < 0) {\n            return;\n          }\n          let entryform = this.categories[this.selectOpenCategory].entries[this.selectedEntry] as EntryForm\n          entryform.delete = !entryform.delete;\n        }\n      },\n      {\n        key: [\"alt + *\", \"alt + r\"],\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Return Entry to normal\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            return;\n          }\n          if (this.selectedEntry < 0) {\n            return;\n          }\n          let entryform = this.categories[this.selectOpenCategory].entries[this.selectedEntry] as EntryForm\n          entryform.reset = true;\n          this.changeEntry(entryform, this.selectOpenCategory, this.selectedEntry);\n          setTimeout(() => {\n            let target = (output.event.target as HTMLElement);\n            let id = target.id;\n            this.moveFocus(id);\n          }, 100);\n        }\n      },\n      {\n        key: [\"alt + s\"],\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Toggle Suffix/Prefix\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            return;\n          }\n          if (this.selectedEntry < 0) {\n            return;\n          }\n          let entryform = this.categories[this.selectOpenCategory].entries[this.selectedEntry] as EntryForm;\n          this.activateSufix(entryform, this.selectOpenCategory, this.selectedEntry);\n        }\n      },\n    );\n    //this.keyboard.select(\"ctrl + alt + u\").subscribe(e => console.log(e));\n  }\n}\n","<div class=\"dictionaryList\" *ngIf=\"dictionaries.length > 0\">\n    <ul>\n        <li class=\"dictionary-selector\" *ngIf=\"dictionaries.length > 0\">\n            <input type=\"button\" class=\"button is-small is-info\" value=\"Refresh Translation\" (click)=\"refreshTranslation()\" />\n            <input type=\"button\" class=\"button is-small is-warning\" value=\"Refresh to Original\" (click)=\"refreshOriginal()\" />\n            <select class='select' [(ngModel)]=\"dictionarySelector\" (change)=\"dictionarySelected($event.target.value)\">\n                <option value='' selected='selected'>Choose a language</option>\n                <option *ngFor=\"let option of dictionaries\" value=\"{{option.id}}\">{{ option.language }}</option>\n            </select>\n        </li>\n    </ul>\n    <ul>\n        <li class=\"dictionary-buttons\">\n            <input type=\"button\" (click)=\"saveModifications()\" value='Save Modifications' class=\"button is-small is-danger\" [disabled]=\"saving\"  />\n            <input type=\"button\" (click)=\"openOutside(true)\" value='Google Translate' class=\"button is-small is-info\" />\n            <input type=\"button\" (click)=\"openOutside(false)\" value='Open Keyword Translated Raw' class=\"button is-small is-warning\" />\n        </li>\n    </ul>\n    <div class=\"interactiveBox\">\n        <ul class='categories'>\n            <ng-container *ngFor=\"let category of categories; let i = index\">\n                <li>\n                    <h1 (click)=\"selectOpenCategory = i\"  [ngClass]=\"{'changed': category.update == true, 'new': category.id == null, 'category-selected': (selectOpenCategory == i) }\">\n                        <input class=\"category-name\" type=\"text\" [(ngModel)]=\"category.name\"\n                                placeholder=\"Category Name\" (ngModelChange)=\"changeCategory(category,i)\"\n                                id=\"category-{{i}}\"/>\n                    </h1>\n                </li>\n            </ng-container>\n            <li>\n                <h1 class=\"categoryButtonRow\">\n                    <input type=\"button\" (click)=\"addCategory()\" value='+ Add new Category' class=\"button is-small is-primary\" />\n                </h1>\n            </li>\n        </ul>\n        <div class=\"entries\">\n            <ul class=\"entries-container\">\n                <li [ngClass]=\"{'hidden': (selectOpenCategory >= 0)}\">\n                    <p class=\"hint\">\n                        &LT;- Select a category\n                    </p>\n                </li>\n                <ng-container *ngFor=\"let category of categories; let i = index\">\n                    <li [ngClass]=\"{'hidden': (selectOpenCategory != i)}\">\n                        <div class=\"category-entry-container\" #categoryDOM id=\"categoryDOM-{{i}}\">\n                            <div *ngFor=\"let entry of category.entries; let j = index\" class=\"entry\"\n                                [ngClass]=\"{'changed': entry.update == true, 'deleted': entry.delete == true, 'new': entry.id == null }\">\n\n                                <input class=\"entry-original\" type=\"text\" [(ngModel)]=\"entry.entryOriginal\" (focus)=\"selectedEntry = j\"\n                                        placeholder=\"Original\" (ngModelChange)=\"changeEntry(entry, i, j)\" #entry id=\"entry-{{i}}-{{j}}\" />\n\n                                <label class=\"sufixButton sidebarButton\">\n                                    <i [ngClass]=\"{'fas': entry.sufix || entry.prefix, 'fa-angle-right': entry.sufix, 'fa-angle-left': entry.prefix, 'far fa-times-circle': !entry.sufix && !entry.prefix }\"></i> \n                                    <input type=\"checkbox\" class=\"hidden\" [(ngModel)]=\"entry.sefixButton\" title=\"Toggle suffix/prefix on/off\" (change)=\"activateSufix(entry, i, j)\" />\n                                </label>\n                                \n                                <select *ngIf=\"entry.sufix\" class='select' [(ngModel)]=\"entry.sufix\" (change)=\"changeEntry(entry, i, j)\" id=\"entry-{{i}}-{{j}}-sufix\">\n                                    <option disabled=\"disabled\">Select a Category for the suffix</option>\n                                    <option *ngFor=\"let option of categoriesOriginalValues\" value=\"{{option.id}}\">{{ option.name }}</option>\n                                </select>\n\n                                <input [ngClass]=\"{'entry-translation-half': entry.sufix || entry.prefix, 'entry-translation': !entry.sufix && !entry.prefix }\"\n                                        type=\"text\" [(ngModel)]=\"entry.entryTranslation\" (focus)=\"selectedEntry = j\"\n                                        placeholder=\"Translation\" (ngModelChange)=\"changeEntry(entry, i, j)\" id=\"entry-{{i}}-{{j}}-trans\"/>\n\n                                <select *ngIf=\"entry.prefix\" class='select' [(ngModel)]=\"entry.prefix\" (change)=\"changeEntry(entry, i, j)\" id=\"entry-{{i}}-{{j}}-prefix\">\n                                    <option disabled=\"disabled\">Select a Category for the Prefix</option>\n                                    <option *ngFor=\"let option of categoriesOriginalValues\" value=\"{{option.id}}\">{{ option.name }}</option>\n                                </select>\n\n                                <input class=\"entry-description\" type=\"text\" [(ngModel)]=\"entry.description\" (focus)=\"selectedEntry = j\"\n                                        placeholder=\"Description\" (ngModelChange)=\"changeEntry(entry, i, j)\" id=\"entry-{{i}}-{{j}}-desc\" />\n\n                                <label class=\"deleteButton sidebarButton\">\n                                    <i class=\"fas fa-trash\"></i> \n                                    <input type=\"checkbox\" class=\"hidden\" title=\"Delete\" (change)=\"entry.delete = true; changeEntry(entry, i, j)\" />\n                                </label>\n                                <label class=\"resetButton sidebarButton\">\n                                    <i class=\"fas fa-sync-alt\"></i>\n                                    <input type=\"checkbox\" class=\"hidden\" title=\"Reset\" (change)=\"entry.reset = true; changeEntry(entry, i, j)\" />\n                                </label>\n                            </div>\n                            <div class=\"entry-spacer\"></div>\n                        </div>\n                        <input type=\"button\" (click)=\"addEntry(category, category.id, i)\" value='+ Add new Entry' class=\"addNewEntryButton\" />\n                    </li>\n                </ng-container>\n            </ul>\n        </div>\n    </div>\n    <ul>\n        <li class=\"dictionary-buttons\">\n            <input type=\"button\" (click)=\"saveModifications()\" value='Save Modifications'  class=\"button is-small is-danger\" [disabled]=\"saving\"  />\n            <input type=\"button\" (click)=\"openOutside(true)\" value='Google Translate' class=\"button is-small is-info\" />\n            <input type=\"button\" (click)=\"openOutside(false)\" value='Open Keyword Translated Raw'  class=\"button is-small is-warning\" />\n        </li>\n    </ul>\n</div>\n\n<ng-keyboard-shortcuts [shortcuts]=\"shortcuts\"></ng-keyboard-shortcuts>\n<ng-keyboard-shortcuts-help [key]=\"'f1'\" [title]=\"'Shortcut Keys'\"></ng-keyboard-shortcuts-help>","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}"],"names":["RouterModule","ListComponent","DetailComponent","routes","path","component","data","title","loadChildren","then","m","DictionaryModule","breadcrumb","redirectTo","ChapterRoutingModule","forChild","imports","exports","CommonModule","SafeHtmlPipe","SidebarComponent","FormsModule","KeyboardShortcutsModule","ChapterModule","forRoot","declarations","i1","i2","i3","KeyboardShortcutsComponent","i0","ctx_r9","ctx_r11","constructor","sanitized","transform","value","bypassSecurityTrustHtml","pure","router","route","api","viewport","next","document","getElementById","scrollTop","navigate","idNovel","chapterNext","no","previous","chapterPrevious","showSidebar","translateWorker","Worker","URL","import","meta","url","type","ngOnInit","loadedChapter","Promise","resolve","loadedChapterResolve","startContent","ngAfterViewInit","shortcuts","push","key","preventDefault","label","description","command","output","chapterRoute","ngOnDestroy","console","log","ngDoCheck","noChapter","snapshot","params","Sidebar","categories","translateText","all","Novel","get","id","Chapter","text","values","novel","chapter","renderDataView","cacheAdjecentChapters","prev","numberChapters","Next","renderedTitle","renderedText","textRevision","textOriginal","_","onmessage","e","setTimeout","els","Array","from","getElementsByClassName","forEach","element","addEventListener","event","idxs","target","split","textPointer","postMessage","toogleSidebar","selectors","viewQuery","ctx","DictionaryCategory","EntryForm","FormService","rebuildCache","resolveDic","Category","getAll","idDictionary","Object","LoadedPromise","category","categoryIndex","resolveCat","rejectCat","Entry","idCategory","entries","resolveEnt","rejectEnt","categoriesOriginalValues","JSON","parse","stringify","addEntry","category_id","category_index","entry","DOMLi","DOMInput","DOMcategories","DOMcategory","toArray","nativeElement","children","length","focus","duplicateEntry","clone","addCategory","changeEntry","catIdx","entIdx","reset","delete","splice","update","entryOriginal","entryTranslation","sufix","prefix","changeCategory","idx","name","factory","providedIn","environment","ctx_r16","ctx_r18","ctx_r20","ctx_r22","ctx_r24","ctx_r26","ctx_r28","ctx_r30","ctx_r32","ctx_r34","ctx_r45","ctx_r48","numberAsc","a","b","titleAsc","createdAsc","dateCreated","updatedAsc","dateRevision","numberDesc","titleDesc","createdDesc","updatedDesc","by","dir","sort","sortAlg","currentSort","chapters","sortingAlg","Dictionary","dictionaries","updateChapter","updating","disableupdate","chapterAutoUpdate","res","err","updateAllChapters","i","openGT","dictionary","backendServer","window","open","updateChapters","autoUpdate","decls","vars","consts","template","EventEmitter","AllowIn","ctx_r6","ctx_r8","ctx_r10","ctx_r31","ctx_r41","ctx_r49","ctx_r52","ctx_r56","ctx_r60","entry_r21","ctx_r62","ctx_r64","ctx_r67","ctx_r69","ctx_r71","ctx_r72","ctx_r73","ctx_r74","ctx_r75","ctx_r76","inputId","explode","el","scrollIntoView","behavior","block","inline","error","selectOpenCategory","moveFocus","entryType","selectedEntry","dictionarySelector","dictionarySelected","changeEntryTarget","j","parseInt","getCache","status","PrepareCacheThenTranslate","refreshTranslation","loadedDictionary","rejectDic","Sidebar2Chapter","emit","refreshOriginal","saveModifications","saving","fullSave","catch","openOutside","translate","moveCurrentEntry","activateSufix","allowIn","ContentEditable","Input","Select","Textarea","moveCurrentCategory","getSelectedEntryType","indexOf","entryform"],"sourceRoot":"webpack:///"}