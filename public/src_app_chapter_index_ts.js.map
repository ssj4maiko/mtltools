{"version":3,"file":"src_app_chapter_index_ts.js","mappings":"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","sources":["./src/app/chapter/chapter-routing.module.ts","./src/app/chapter/chapter.module.ts","./src/app/chapter/detail/detail.component.ts","./src/app/chapter/detail/detail.component.html","./src/app/chapter/form.service.ts","./src/app/chapter/index.ts","./src/app/chapter/list/list.component.ts","./src/app/chapter/list/list.component.html","./src/app/chapter/sidebar/sidebar.component.ts","./src/app/chapter/sidebar/sidebar.component.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ListComponent } from './list/list.component';\nimport { DetailComponent } from './detail/detail.component';\n\nconst routes: Routes = [\n  {\n     path: ''\n    , component: ListComponent\n    , data: { title: 'List Chapters' }\n  },\n  {\n    path: 'dictionary'\n    , loadChildren: () => import('../dictionary').then(m => m.DictionaryModule)\n    , data: { title: 'View dictionary', breadcrumb: 'Dictionaries' }\n  },\n  {\n     path: ':noChapter'\n    , component: DetailComponent\n    // ,loadChildren: () => ChapterModule\n    , data: { title: 'View chapter', breadcrumb: 'View Chapter' }\n  },\n  {\n     path: '**'\n    , redirectTo: ''\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class ChapterRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\n\nimport { ChapterRoutingModule } from './chapter-routing.module';\n\nimport { ListComponent } from './list/list.component';\nimport { DetailComponent, SafeHtmlPipe } from './detail/detail.component';\nimport { SidebarComponent } from './sidebar/sidebar.component';\nimport { FormsModule } from '@angular/forms';\nimport { KeyboardShortcutsModule } from 'ng-keyboard-shortcuts';\n\n@NgModule({\n\tdeclarations: [\n\t\tListComponent,\n\t\tDetailComponent,\n\t\tSidebarComponent,\n\t\tSafeHtmlPipe,\n\t],\n\timports: [\n\t\tCommonModule,\n\t\tChapterRoutingModule,\n        RouterModule,\n\t\tFormsModule,\n\t\tKeyboardShortcutsModule.forRoot()  \n\t]\n})\nexport class ChapterModule { }\n","import { AfterViewInit, Component, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { ApiService } from '../../api';\nimport { DomSanitizer } from '@angular/platform-browser';\n\nimport { Chapter } from '../../_models/chapter';\nimport { Novel } from '../../_models/novel';\nimport { DictionaryCategory } from 'src/app/_models/dictionarycategory';\nimport { CategoryModule } from 'src/app/category';\nimport { count } from 'rxjs-compat/operator/count';\nimport { SidebarComponent } from '../sidebar/sidebar.component';\nimport { ViewportScroller } from '@angular/common';\nimport { AllowIn, KeyboardShortcutsComponent, ShortcutEventOutput, ShortcutInput } from 'ng-keyboard-shortcuts';\n\nimport { PipeTransform, Pipe } from \"@angular/core\";\nimport { DictionaryEntry } from 'src/app/_models';\n\n@Pipe({ name: 'safeHtml' })\nexport class SafeHtmlPipe implements PipeTransform {\n  constructor(private sanitized: DomSanitizer) { }\n  transform(value) {\n    return this.sanitized.bypassSecurityTrustHtml(value);\n  }\n}\n\n@Component({\n  selector: 'app-chapter-detail',\n  templateUrl: './detail.component.html',\n  styleUrls: ['./detail.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class DetailComponent implements OnInit {\n  @ViewChild(SidebarComponent) Sidebar;\n\n  chapter: Chapter;\n  novel: Novel;\n  idNovel: number;\n  noChapter: number;\n\n  chapterPrevious: Chapter;\n  chapterNext: Chapter;\n\n  renderedTitle: string;\n  renderedText: string;\n  loadedChapter: Promise<void>;\n  loadedChapterResolve: () => void;\n\n\n  showSidebar: boolean;\n\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    public sanitized: DomSanitizer,\n    private api: ApiService,\n    private viewport: ViewportScroller\n  ) {\n    this.showSidebar = true;\n  }\n\n  ngOnInit() {\n    this.loadedChapter = new Promise<void>((resolve) => {\n      this.loadedChapterResolve = resolve;\n    });\n    this.startContent();\n  }\n\n  @ViewChild(KeyboardShortcutsComponent) private keyboard: KeyboardShortcutsComponent;\n  shortcuts: ShortcutInput[] = [];\n  ngAfterViewInit(): void {\n    this.shortcuts.push(\n      {\n        key: \"alt + pageup\",\n        preventDefault: true,\n        label: \"Chapter\",\n        description: \"Previous Chapter\",\n        command: (output: ShortcutEventOutput) => {\n          this.chapterRoute.previous()\n        },\n      },\n      {\n        key: \"alt + pagedown\",\n        preventDefault: true,\n        label: \"Chapter\",\n        description: \"Next Chapter\",\n        command: (output: ShortcutEventOutput) => {\n          this.chapterRoute.next()\n        },\n      },\n    );\n\n    //this.keyboard.select(\"ctrl + f\").subscribe(e => console.log(e));\n  }  \n  ngOnDestroy() {\n    delete this.loadedChapter;\n    console.log('destroy detailed chapter');\n  }\n  ngDoCheck() {\n\n    if (this.noChapter !== this.route.snapshot.params.noChapter) {\n      console.log('changing chapter', this.Sidebar.categories);\n      this.ngOnInit();\n      this.translateText(this.Sidebar.categories);\n    }\n  }\n\n  private startContent() {\n    this.idNovel = this.route.snapshot.params.idNovel;\n    this.noChapter = this.route.snapshot.params.noChapter;\n    Promise.all([\n      this.api.Novel.get({ id: this.idNovel }),\n      this.api.Chapter.get({ idNovel: this.idNovel, no: this.noChapter, text: true })\n    ]).then((values: [Novel, Chapter]) => {\n      this.novel = values[0];\n      this.chapter = values[1];\n\n      this.renderDataView();\n      this.cacheAdjecentChapters(this.noChapter - 0);\n      this.loadedChapterResolve();\n    });\n  }\n  private cacheAdjecentChapters(noChapter: number) {\n    const prev = noChapter - 1;\n    if (prev > 0) {\n      this.api.Chapter.get({ idNovel: this.idNovel, no: prev, text: true })\n        .then(previous => {\n          this.chapterPrevious = previous;\n        });\n    }\n    const next = noChapter - 0 + 1;\n    if (next <= this.novel.numberChapters) {\n      this.api.Chapter.get({ idNovel: this.idNovel, no: next, text: true })\n        .then(Next => {\n          this.chapterNext = Next;\n        });\n    }\n  }\n  renderDataView() {\n    this.renderedTitle = this.chapter.title;\n    this.renderedText = !!this.chapter.textRevision ? this.chapter.textRevision : this.chapter.textOriginal;\n  }\n\n  translateText(categories: DictionaryCategory[]) {\n    // In case the dictionary comes first, then let it wait for the chapter\n    this.loadedChapter.then(_ => {\n      this.renderDataView();\n      // Confirm that there are categories\n      if (categories.length > 0) {\n        const entries:DictionaryEntry[][] = [];\n        categories.forEach((category,i) => {\n          // Newly created Categories don't come with Entries, so let's not break the code\n          if (category.entries) {\n            category.entries.forEach((entry,j) => {\n              // Newly created Entries won't have the variables set by default, which would break the code on AOT\n              if (entry.entryOriginal) {\n                let regex = new RegExp('(\\\\p{P})+', 'gu');\n                const simplified = entry.entryOriginal.replace(regex, '');\n                const length = simplified.length;\n\n                if (!entries[length]) {\n                  entries[length] = [];\n                }\n                entries[length].push({\n                  entryOriginal: entry.entryOriginal,\n                  entryTranslation: entry.entryTranslation,\n                  description: entry.description,\n                  sufix: entry.sufix,\n                  prefix: entry.prefix,\n                  id: entry.id,\n                  idCategory: category.id,\n                  category: category.name,\n                  simplified: simplified,\n                  index: [i,j]\n                } as DictionaryEntry);\n              }\n            });\n          }\n        });\n        for (let i = entries.length; i > 0; --i) {\n          if (entries[i]) {\n            entries[i].forEach((entry, j) => {\n              if(entry.entryOriginal == entry.entryTranslation){\n                return;\n              }\n              // console.log('Change ', entry.entryOriginal, entry.entryTranslation);\n              if (entry.sufix) {\n                const regex = new RegExp(']' + entry.sufix + ']' + entry.entryOriginal, 'g');\n                this.renderedTitle = this.renderedTitle.replace(regex, entry.entryTranslation + '\\]' + entry.idCategory + '\\]');\n\n                this.renderedText = this.renderedText.replace(regex, '<span class=\"replaced sufix\" '\n                  + (entry.description ? `title=\"${entry.description}\"` : '')\n                  + ' id=\"replaced-' + entry.index[0] + '-' + entry.index[1] + '\">'\n                  + entry.entryTranslation\n                  + '</span>\\]' + entry.idCategory + '\\]');\n              } else if (entry.prefix) {\n                const regex = new RegExp(entry.entryOriginal + '[' + entry.idCategory + '[', 'g');\n                this.renderedTitle = this.renderedTitle.replace(regex, '\\[' + entry.idCategory + '\\[' + entry.entryTranslation);\n\n                this.renderedText = this.renderedText.replace(regex, '\\[' + entry.idCategory + '\\[<span class=\"replaced prefix\" '\n                  + (entry.description ? `title=\"${entry.description}\"` : '')\n                  + ' id=\"replaced-' + entry.index[0] + '-' + entry.index[1] + '\">'\n                  + entry.entryTranslation\n                  + '</span>');\n              } else {\n                const regex = new RegExp(entry.entryOriginal, 'g');\n                this.renderedTitle = this.renderedTitle.replace(regex, '\\[' + entry.idCategory + '\\[' + entry.entryTranslation + '\\]' + entry.idCategory + '\\]');\n                \n                this.renderedText = this.renderedText.replace(regex, '\\[' + entry.idCategory + '\\[<span class=\"replaced\" '\n                                                                  + (entry.description ? `title=\"${entry.description}\"` : '') \n                                                                  +' id=\"replaced-' + entry.index[0] + '-' + entry.index[1] +'\">'\n                                                                  + entry.entryTranslation\n                                                                  + '</span>\\]' + entry.idCategory + '\\]');\n              }\n            });\n          }\n        }\n        // The extra characters are to allow to create a space in between translated words\n        const regexEnd = '\\\\][0-9]+\\\\]';\n        const regexStart = '\\\\[[0-9]+\\\\[';\n        try{\n\n          let regex = new RegExp('(' + regexEnd + regexStart +')+', 'gm');\n          this.renderedTitle = this.renderedTitle.replace(regex, ' ');\n          this.renderedText = this.renderedText.replace(regex, ' ');\n          regex = new RegExp('(' + regexEnd + ')+', 'gm');\n          this.renderedTitle = this.renderedTitle.replace(regex, '');\n          this.renderedText = this.renderedText.replace(regex, '');\n          regex = new RegExp('('+regexStart+')+', 'gm');\n          this.renderedTitle = this.renderedTitle.replace(regex, '');\n          this.renderedText = this.renderedText.replace(regex, '');\n        } catch (e){\n          console.info(regexEnd+regexStart);\n          console.error(e)\n        }\n\n        setTimeout(() => {\n          let els = Array.from(document.getElementsByClassName('replaced'));\n          els.forEach(element => {\n            element.addEventListener('click',(event) => {\n              let idxs = (event.target as HTMLElement).id.split('-');\n              this.Sidebar.textPointer(idxs[1],idxs[2]);\n            })\n          });\n        }, 200);\n        //alert(this.renderedText);\n      }\n    });\n\n  }\n  toogleSidebar() {\n    if (this.showSidebar)\n      this.showSidebar = false;\n    else\n      this.showSidebar = true;\n  }\n\n  public chapterRoute = {\n    next: () => {\n      document.getElementById('content').scrollTop = 0;\n      this.router.navigate(['novel', this.idNovel, this.chapterNext.no]);\n    },\n    previous: () => {\n      document.getElementById('content').scrollTop = 0;\n      this.router.navigate(['novel', this.idNovel, this.chapterPrevious.no]);\n    }\n  }\n\n}\n","<div class='flexContent'>\n\t<!--div class=\"show-sidebar\" (click)=\"toogleSidebar()\"></div-->\n\t<div class=\"sidebar\" [hidden]=\"!showSidebar\">\n\t\t<app-chapter-sidebar #SidebarChild (Sidebar2Chapter)=\"translateText($event)\"></app-chapter-sidebar>\n\t</div>\n\t<div #Content id=\"content\" class='content'>\n\t\t<ng-template #controlButtons>\n\t\t\t<div class=\"columns controlButtons\">\n\t\t\t\t<div class=\"column\">\n\t\t\t\t\t<a class=\"button is-large is-primary\" *ngIf=\"chapterPrevious\" (click)=\"chapterRoute.previous()\"> Previous </a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"column\">\n\t\t\t\t\t<a class=\"button is-large is-primary\" [routerLink]=\"['/novel/', idNovel]\"> Table of Contents </a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"column\">\n\t\t\t\t\t<a class=\"button is-large is-primary\" *ngIf=\"chapterNext\" (click)=\"chapterRoute.next()\"> Next </a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ng-template>\n\n\t\t<ng-container *ngTemplateOutlet=\"controlButtons\"></ng-container>\n\t\t<ng-container *ngIf=\"chapter\">\n\t\t\t<h1 class='title'>{{ this.renderedTitle }}</h1>\n\t\t\t<hr />\n\t\t\t<div class=\"novel-content\" [innerHTML]=\"renderedText | safeHtml\">\n\n\t\t\t</div>\n\t\t</ng-container>\n\t\t<ng-container *ngTemplateOutlet=\"controlButtons\"></ng-container>\n\t</div>\n\n</div>\n<ng-keyboard-shortcuts [shortcuts]=\"shortcuts\"></ng-keyboard-shortcuts>\n<ng-keyboard-shortcuts-help [key]=\"'f1'\" [title]=\"'Help'\"></ng-keyboard-shortcuts-help>","import { ElementRef, Injectable, QueryList, ViewChildren } from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { ApiService } from '../api';\nimport { DictionaryCategory, DictionaryEntry, EntryForm } from '../_models';\nimport { Dictionary } from '../_models/dictionary';\nimport { FormField, Meta, Option } from '../_models/formField';\nimport { Novel } from '../_models/novel';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FormService {\n  idDictionary: number;\n\n  categories: DictionaryCategory[] = [];\n  categoriesOriginalValues: DictionaryCategory[] = [];\n\n  indexes: string[] = [];\n\n  @ViewChildren('categoryDOM') public DOMcategories: QueryList<ElementRef<HTMLDivElement>>;\n\n  constructor(\n    public api: ApiService\n  ) { }\n\n  rebuildCache(resolveDic): void {\n    this.api.Category.getAll({ idDictionary: this.idDictionary })\n      .then((categories) => {\n\n        this.categories = Object.values(categories);\n        const LoadedPromise = [];\n\n        this.categories.forEach((category, categoryIndex) => {\n          LoadedPromise.push(new Promise<void>((resolveCat, rejectCat) => {\n\n            this.api.Entry.getAll({ idDictionary: this.idDictionary, idCategory: category.id })\n              .then((entries) => {\n                LoadedPromise.push(new Promise<void>((resolveEnt, rejectEnt) => {\n                  /** @var DictionaryEntry[] category.entries */\n                  category.entries = Object.values(entries);\n                  resolveEnt();\n                }));\n              });\n            resolveCat();\n          }));\n        });\n\n        Promise.all(LoadedPromise)\n          .then(_ => {\n            this.categoriesOriginalValues = JSON.parse(JSON.stringify(this.categories));\n            resolveDic();\n          });\n      });\n  }\n  addEntry(category:DictionaryCategory, category_id:number, category_index:number) {\n    if (!category.entries) {\n      category.entries = [];\n    }\n    category.entries.push(new EntryForm());\n\n    // Wait until new input is rendered to focus it\n    setTimeout(() => {\n      let DOMLi: HTMLDivElement;\n      let DOMInput: HTMLInputElement;\n      if (this.DOMcategories){\n        let DOMcategory = this.DOMcategories.toArray()[category_index];\n        if (DOMcategory) {\n          DOMLi = DOMcategory.nativeElement;\n        }\n      }\n      // Fallback for AOT\n      if (!DOMLi) {\n        DOMLi = <HTMLDivElement>document.getElementById(\"categoryDOM-\" + category_index);\n      }\n      DOMInput = (DOMLi.children[DOMLi.children.length - 2].children[0] as HTMLInputElement);\n      DOMInput.focus();\n    },150)\n  }\n  addCategory() {\n    this.categories.push(new DictionaryCategory(null, this.idDictionary));\n  }\n\n\n  changeEntry(entry: EntryForm, catIdx?: number, entIdx?: number) {\n    if (entry.reset) {\n      if (this.categories[catIdx].entries[entIdx].id) {\n        this.categories[catIdx].entries[entIdx] = new EntryForm(this.categoriesOriginalValues[catIdx].entries[entIdx]);\n      } else {\n        this.categories[catIdx].entries[entIdx] = new EntryForm(null, this.categories[catIdx].id);\n      }\n    } else {\n      if (entry.delete) {\n        if (!entry.id) {\n          this.categories[catIdx].entries.splice(entIdx, 1);\n        }\n      } else {\n        if (entry.id) {\n          entry.update = entry.entryOriginal    !== this.categoriesOriginalValues[catIdx].entries[entIdx].entryOriginal\n                      || entry.entryTranslation !== this.categoriesOriginalValues[catIdx].entries[entIdx].entryTranslation\n                      || entry.description      !== this.categoriesOriginalValues[catIdx].entries[entIdx].description\n                      || entry.idCategory       !== this.categoriesOriginalValues[catIdx].entries[entIdx].idCategory\n                      || entry.sufix            !== this.categoriesOriginalValues[catIdx].entries[entIdx].sufix\n                      || entry.prefix           !== this.categoriesOriginalValues[catIdx].entries[entIdx].prefix\n            ;\n        }\n      }\n    }\n  }\n  changeCategory(category, idx) {\n    if (category.id) {\n      category.update = category.name !== this.categoriesOriginalValues[idx].name;\n    }\n  }\n\n}\n","export * from './chapter.module';","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { ApiService } from '../../api';\n\nimport { Chapter } from '../../_models/chapter';\nimport { Novel } from '../../_models/novel';\nimport { environment } from 'src/environments/environment';\nimport { Dictionary } from 'src/app/_models/dictionary';\n\n@Component({\n  selector: 'app-chapter-list',\n  templateUrl: './list.component.html',\n  styleUrls: ['./list.component.scss']\n})\nexport class ListComponent implements OnInit {\n\n  chapters: Chapter[] = [];\n  dictionaries: Dictionary[] = [];\n  novel: Novel;\n  idNovel: number;\n\n  constructor(\n      private router: Router\n    , private route: ActivatedRoute\n    , private api: ApiService\n    ) { }\n\n  ngOnInit() {\n    this.idNovel = this.route.snapshot.params.idNovel;\n    this.api.Novel.get({id: this.idNovel})\n                .then(novel => {\n                  this.novel = novel;\n                  this.api.Dictionary.getAll({idNovel: this.idNovel})\n                          .then(dictionaries => {\n                            this.dictionaries = Object.values(dictionaries);\n                            this.api.Chapter.getAll({idNovel: this.idNovel})\n                                            .then(chapters => {\n                                              this.chapters = Object.values(chapters);\n                                            });\n                          });\n                });\n  }\n\n  openGT(chapter: Chapter, dictionary: Dictionary) {\n      let url = `${environment.backendServer}/static/${this.idNovel}/${dictionary.id}/${chapter.no}/1`;\n      url = 'https://translate.google.com/translate?sl=auto&tl=en&u=' + url;\n      window.open(url);\n  }\n\n  updateChapters() {\n    this.api.Chapter.autoUpdate({ idNovel : this.idNovel })\n      .then(res => {\n        /**\n         * Update the list too\n         */\n        this.api.Chapter.getAll({ idNovel: this.idNovel })\n                      .then(chapters => {\n                        this.chapters = Object.values(chapters);\n                      });\n      }, err => {\n        console.log(err);\n      });\n  }\n\n}\n","<ng-template #actionButtons>\n\t<div class=\"columns actionButtons\">\n        <div class=\"column\">\n            <a [routerLink]=\"['/novel/', idNovel,'dictionary']\" class=\"button is-primary\">Dictionary</a>\n        </div>\n\t\t<div class=\"column\" *ngIf=\"novel && novel.driver == 'manual'\">\n\t\t\t<a routerLink=\"['/novel/',idNovel,'add']\" class=\"button is-info\">Import Chapter</a>\n\t\t</div>\n\t\t<div class=\"column\" *ngIf=\"novel && novel.driver != 'manual'\">\n\t\t\t<a (click)=\"updateChapters()\" class=\"button is-info\">Update Chapters</a>\n\t\t</div>\n\t\t<!--div class=\"column\" *ngIf=\"novel && novel.driver == 'syosetu'\">\n\t\t\t<a (click)=\"downloadChapter()\" class=\"button is-info\">Add Next Chapter</a>\n\t\t</div-->\n\t</div>\n</ng-template>\n\n<ng-container *ngTemplateOutlet=\"actionButtons\"></ng-container>\n<div>\n\t<table class='table is-striped is-hoverable is-fullwidth'>\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th>Number</th>\n\t\t\t\t<th>Title</th>\n\t\t\t\t<th>Date Created</th>\n\t\t\t\t<th>Date Updated</th>\n\t\t\t\t<th>Dictionary<br />Google Translator</th>\n\t\t\t\t<!--th>Actions</th-->\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<ng-container *ngFor=\"let chapter of chapters\" >\n\t\t\t\t<tr title=\"{{ novel.title }}\">\n\t\t\t\t\t<td>{{ chapter.no }}</td>\n\t\t\t\t\t<td [routerLink]=\"['/novel/', chapter.idNovel, chapter.no]\">{{ chapter.title }}</td>\n\t\t\t\t\t<td [routerLink]=\"['/novel/', chapter.idNovel, chapter.no]\">{{ chapter.dateOriginalPost }}</td>\n\t\t\t\t\t<td [routerLink]=\"['/novel/', chapter.idNovel, chapter.no]\">{{ chapter.dateOriginalRevision }}</td>\n                    <!--td><ng-container *ngIf=\"chapter.hasText == 1; then success else danger\"></ng-container></td-->\n                    <td>\n                        <a *ngFor=\"let dictionary of dictionaries\" (click)=\"openGT(chapter,dictionary);\">{{dictionary.language}}</a>\n                    </td>\n\t\t\t\t\t<!--td>\n\t\t\t\t\t\t<a [routerLink]=\"['/novel/', chapter.idNovel, chapter.no, 'edit']\">UPD</a>\n\t\t\t\t\t\t/\n\t\t\t\t\t\t<a [routerLink]=\"['/novel/', chapter.idNovel, chapter.no, 'del']\">DEL</a>\n\t\t\t\t\t</td-->\n\t\t\t\t\t<ng-template #success>\n\t\t\t\t\t\t<a class='button is-success'>\n\t\t\t\t\t\t\t<span class=\"icon is-small\">\n\t\t\t\t\t\t\t\t<i class=\"fas fa-check\"></i>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</ng-template>\n\t\t\t\t\t<ng-template #danger>\n\t\t\t\t\t\t<a class='button is-danger'>\n\t\t\t\t\t\t\t<span class=\"icon is-small\">\n\t\t\t\t\t\t\t\t<i class=\"fas fa-times\"></i>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</ng-template>\n\t\t\t\t</tr>\n\t\t\t</ng-container>\n\t\t</tbody>\n\t</table>\n</div>\n","import { Component, OnInit, Output, EventEmitter, OnDestroy, ViewChild, AfterViewInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { NgModel } from '@angular/forms';\n\nimport { DictionaryEntry, EntryForm } from '../../_models/dictionaryentry';\nimport { DictionaryCategory } from '../../_models/dictionarycategory';\nimport { Dictionary } from '../../_models/dictionary';\nimport { ApiService } from 'src/app/api';\nimport { environment } from 'src/environments/environment';\nimport { Novel } from 'src/app/_models/novel';\nimport { CacheService } from '../cache.service';\nimport { DetailComponent } from '../detail/detail.component';\nimport { FormService } from '../form.service';\nimport { AllowIn, KeyboardShortcutsComponent, ShortcutEventOutput, ShortcutInput } from 'ng-keyboard-shortcuts';\n\n@Component({\n  selector: 'app-chapter-sidebar',\n  templateUrl: './sidebar.component.html',\n  styleUrls: ['./sidebar.component.scss']\n})\nexport class SidebarComponent extends FormService implements OnInit, OnDestroy, AfterViewInit {\n\n  @Output() Sidebar2Chapter: EventEmitter<DictionaryCategory[]> = new EventEmitter<DictionaryCategory[]>();\n\n  dictionaries: Dictionary[] = [];\n  categories: DictionaryCategory[] = [];\n\n  idCategory: number;\n  idDictionary: number;\n  idNovel: number;\n  novel: Novel;\n\n  dictionarySelector: any = '';\n\n\n  constructor(\n      public api: ApiService\n    , private route: ActivatedRoute\n  ) {\n    super(api);\n  }\n\n  ngOnInit() {\n    this.idNovel = this.route.snapshot.params.idNovel;\n\n    this.api.Dictionary.getAll({idNovel: this.idNovel})\n      .then((dictionaries: Dictionary[]) => {\n        this.dictionaries = dictionaries;\n        this.dictionarySelector = dictionaries[0].id;\n        this.dictionarySelected(this.dictionarySelector);\n      });\n  }\n\n  @ViewChild(KeyboardShortcutsComponent) private keyboard: KeyboardShortcutsComponent;\n  shortcuts: ShortcutInput[] = [];\n  selectOpenCategory:number = -1;\n  selectedEntry:number = -1;\n  private getSelectedEntryType = (inputId:string) => {\n    let explode = inputId.split('-');\n    if(!explode[3]){\n      return '';\n    }\n    else {\n      return '-'+explode[3];\n    }\n  }\n  private moveFocus = (id: string, output?:ShortcutEventOutput) => {\n    let el = document.getElementById(id);\n    if (el){\n      el.focus();\n      el.scrollIntoView({\n        behavior:'smooth',\n        block: 'center',\n        inline: 'center',\n      });\n    }\n    else {\n      console.error(id);\n    }\n\n    if(output){\n      console.log({\n        output: output.key,\n        category: this.selectOpenCategory,\n        categoryLength: this.categories.length,\n        entry: this.selectedEntry,\n        entryLength: this.categories[this.selectOpenCategory].entries?.length,\n        target: output?.event.target\n      });\n    }\n  }\n  private moveCurrentCategory = (output?:ShortcutEventOutput) => {\n    let id = 'category-' + this.selectOpenCategory;\n    this.moveFocus(id, output);\n  }\n  private moveCurrentEntry = (entryType: string = '', output?: ShortcutEventOutput) => {\n    let id = 'entry-' + this.selectOpenCategory + '-' + this.selectedEntry + entryType;\n    this.moveFocus(id, output);\n  }\n\n  ngOnDestroy() {\n    delete this.dictionaries;\n    delete this.categories;\n    delete this.categoriesOriginalValues;\n    delete this.idCategory;\n    delete this.idDictionary;\n    delete this.idNovel;\n    delete this.dictionarySelector;\n    console.log('destroy Sidebar');\n  }\n  dictionarySelected(idDictionary: number) {\n    this.idDictionary = idDictionary;\n    this.getCache();\n  }\n  private getCache() {\n    if (this.categories.length === 0) {\n      this.api.Dictionary.getCache(this.idDictionary)\n        .then((status) => {\n          this.PrepareCacheThenTranslate(status);\n        });\n    } else {\n      this.refreshTranslation();\n    }\n  }\n  private PrepareCacheThenTranslate(status) {\n    if (status) {\n      const loadedDictionary = new Promise<void>((resolveDic, rejectDic) => {\n        this.rebuildCache(resolveDic);\n      });\n\n      loadedDictionary.then(_ => {\n        this.refreshTranslation();\n      });\n    }\n  }\n\n  refreshTranslation() {\n    this.Sidebar2Chapter.emit(this.categories);\n  }\n  refreshOriginal() {\n    this.Sidebar2Chapter.emit([]);\n  }\n  saving: boolean = false;\n  saveModifications() {\n    this.saving = true;\n    this.api.Dictionary.fullSave(this.idDictionary, this.categories)\n      .then(res => {\n        this.categories = [];\n        this.getCache();\n        this.refreshTranslation();\n\n        this.saving = false;\n        console.log('saveModifications',res);\n      }).catch(res => {\n        this.saving = false;\n        console.error(res);\n      });\n  }\n\n  openOutside(translate) {\n    const no = this.route.snapshot.params.noChapter;\n    let url = `${environment.backendServer}/static/${this.idNovel}/${this.idDictionary}/${no}/`;\n    if (translate) {\n      url = 'https://translate.google.com/translate?sl=auto&tl=en&u=' + url;\n    }\n    window.open(url);\n  }\n\n  textPointer(catIdx: number, entIdx: number) {\n    this.selectOpenCategory = catIdx;\n    this.selectedEntry = entIdx;\n    console.log('TESTES', this.selectOpenCategory, this.selectedEntry);\n    setTimeout(() => {\n      this.moveCurrentEntry('');\n    }, 100)\n  }\n  activateSufix(entry:EntryForm, catIdx:number, entIdx:number) {\n    switch(true){\n      case !!entry.sufix:\n        entry.sufix = null;\n        entry.prefix = this.categories[0].id;\n        break;\n      case !!entry.prefix:\n        entry.sufix = null;\n        entry.prefix = null;\n        break;\n      default:\n        entry.sufix = this.categories[0].id;\n        entry.prefix = null;\n    }\n    this.changeEntry(entry, catIdx, entIdx);\n  }\n  ngAfterViewInit(): void {\n    this.shortcuts.push(\n      {\n        key: [\"f5\"],\n        preventDefault: true,\n        label: \"Dictionary\",\n        description: \"Refresh Translation\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          this.refreshTranslation();\n        }\n      },\n      {\n        key: [\"f4\"],\n        preventDefault: true,\n        label: \"Dictionary\",\n        description: \"Refresh to Original\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          this.refreshOriginal();\n        }\n      },\n      {\n        key: [\"ctrl + s\"],\n        preventDefault: true,\n        label: \"Dictionary\",\n        description: \"Save Modifications\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          this.saveModifications();\n        }\n      },\n      {\n        key: [\"ctrl + up\", \"ctrl + alt + up\"],\n        preventDefault: true,\n        label: \"Categories\",\n        description: \"Category Up\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          this.selectedEntry = -1;\n          if (this.selectOpenCategory > 0) {\n            this.selectOpenCategory--\n          } else {\n            this.selectOpenCategory = this.categories.length - 1;\n          }\n          this.moveCurrentCategory(output);\n        }\n      },\n      {\n        key: [\"ctrl + down\", \"ctrl + alt + down\"],\n        preventDefault: true,\n        label: \"Categories\",\n        description: \"Category Down\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          this.selectedEntry = -1;\n          if (this.selectOpenCategory < this.categories.length - 1) {\n            this.selectOpenCategory++\n          } else {\n            this.selectOpenCategory = 0;\n          }\n          this.moveCurrentCategory(output);\n        }\n      },\n      {\n        key: [\"ctrl + alt + plus\", \"ctrl + alt + n\"],\n        preventDefault: true,\n        label: \"Categories\",\n        description: \"Add New Category\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          this.addCategory();\n          this.selectOpenCategory = this.categories.length - 1;\n          setTimeout(() => {\n            this.moveCurrentCategory(output);\n          }, 100)\n        }\n      },\n      {\n        key: \"alt + down\",\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Move Down on Entry List\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            this.selectOpenCategory = 0;\n          }\n          if (this.categories[this.selectOpenCategory].entries) {\n            if (this.selectedEntry >= this.categories[this.selectOpenCategory].entries.length - 1) {\n              this.selectedEntry = 0;\n            } else {\n              this.selectedEntry++;\n            }\n            let target = (output.event.target as HTMLElement)\n            let entryType: string = (target.id ? this.getSelectedEntryType(target.id) : '');\n            if (\n              (entryType == '-sufix' && !this.categories[this.selectOpenCategory].entries[this.selectedEntry].sufix) ||\n              (entryType == '-prefix' && !this.categories[this.selectOpenCategory].entries[this.selectedEntry].prefix)\n            ) {\n              entryType = '-trans';\n            }\n            this.moveCurrentEntry(entryType, output);\n          }\n        }\n      },\n      {\n        key: \"alt + up\",\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Move Up on Entry List\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            this.selectOpenCategory = 0;\n          }\n          if (this.categories[this.selectOpenCategory].entries) {\n            if (this.selectedEntry <= 0) {\n              this.selectedEntry = this.categories[this.selectOpenCategory].entries.length - 1;\n            } else {\n              this.selectedEntry--;\n            }\n            let target = (output.event.target as HTMLElement)\n            let entryType: string = (target.id ? this.getSelectedEntryType(target.id) : '');\n            if (\n              (entryType == '-sufix' && !this.categories[this.selectOpenCategory].entries[this.selectedEntry].sufix) ||\n              (entryType == '-prefix' && !this.categories[this.selectOpenCategory].entries[this.selectedEntry].prefix)\n            ){\n              entryType = '-trans';\n            }\n            this.moveCurrentEntry(entryType, output);\n          }\n        }\n      },\n      {\n        key: \"alt + right\",\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Move Right on Entry List\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            return;\n          }\n          if (!this.categories[this.selectOpenCategory].entries)\n            return;\n          let target = (output.event.target as HTMLElement)\n          if (target.id.indexOf('entry-') !== 0)\n            return;\n\n          let entryType: string = (target.id ? this.getSelectedEntryType(target.id) : '');\n          switch (entryType) {\n            case '':\n              if (this.categories[this.selectOpenCategory].entries[this.selectedEntry].sufix){\n                entryType = '-sufix';\n              } else {\n                entryType = '-trans';\n              }\n              break;\n            case '-sufix':\n              entryType = '-trans';\n              break;\n            case '-trans':\n\n              if (this.categories[this.selectOpenCategory].entries[this.selectedEntry].prefix) {\n                entryType = '-prefix';\n              } else {\n                entryType = '-desc';\n              }\n              break;\n            case '-prefix':\n              entryType = '-desc';\n              break;\n          }\n          this.moveCurrentEntry(entryType, output);\n        }\n      },\n      {\n        key: \"alt + left\",\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Move Left on Entry List\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            return;\n          }\n          if (!this.categories[this.selectOpenCategory].entries)\n            return;\n\n          let target = (output.event.target as HTMLElement)\n          if (target.id.indexOf('entry-') !== 0)\n            return;\n\n          let entryType: string = (target.id ? this.getSelectedEntryType(target.id) : '');\n\n          switch (entryType) {\n            case '-desc':\n              if (this.categories[this.selectOpenCategory].entries[this.selectedEntry].prefix) {\n                entryType = '-prefix';\n              } else {\n                entryType = '-trans';\n              }\n              break;\n            case '-prefix':\n              entryType = '-trans';\n              break;\n            case '-trans':\n              if (this.categories[this.selectOpenCategory].entries[this.selectedEntry].sufix) {\n                entryType = '-sufix';\n              } else {\n                entryType = '';\n              }\n              break;\n            case '-sufix':\n              entryType = '';\n              break;\n          }\n          this.moveCurrentEntry(entryType, output);\n        }\n      },\n      {\n        key: [\"alt + home\", \"alt + 1\"],\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Move to First Entry\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            this.selectOpenCategory = 0;\n          }\n          if (this.categories[this.selectOpenCategory].entries) {\n            this.selectedEntry = 0;\n            let target = (output.event.target as HTMLElement)\n            let entryType: string = (target.id ? this.getSelectedEntryType(target.id) : '');\n            this.moveCurrentEntry(entryType, output);\n          }\n        }\n      },\n      {\n        key: \"alt + end\",\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Move to Last Entry\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            this.selectOpenCategory = 0;\n          }\n          if (this.categories[this.selectOpenCategory].entries) {\n            this.selectedEntry = this.categories[this.selectOpenCategory].entries.length - 1;\n            let target = (output.event.target as HTMLElement)\n            let entryType: string = (target.id ? this.getSelectedEntryType(target.id) : '');\n            this.moveCurrentEntry(entryType, output);\n          }\n        }\n      },\n\n      {\n        key: [\"alt + plus\", \"alt + insert\", \"alt + n\"],\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Add New Entry\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            return;\n          }\n          this.addEntry(this.categories[this.selectOpenCategory], this.categories[this.selectOpenCategory].id, this.selectOpenCategory);\n\n          this.selectedEntry = this.categories[this.selectOpenCategory].entries.length - 1;\n          setTimeout(() => {\n            this.moveCurrentEntry('', output);\n          }, 100)\n        }\n      },\n      {\n        key: [\"alt + -\", \"alt + d\"],\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Remove Entry\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            return;\n          }\n          if (this.selectedEntry < 0) {\n            return;\n          }\n          let entryform = this.categories[this.selectOpenCategory].entries[this.selectedEntry] as EntryForm\n          entryform.delete = !entryform.delete;\n        }\n      },\n      {\n        key: [\"alt + *\", \"alt + r\"],\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Return Entry to normal\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            return;\n          }\n          if (this.selectedEntry < 0) {\n            return;\n          }\n          let entryform = this.categories[this.selectOpenCategory].entries[this.selectedEntry] as EntryForm\n          entryform.reset = true;\n          this.changeEntry(entryform, this.selectOpenCategory, this.selectedEntry);\n          setTimeout(() => {\n            let target = (output.event.target as HTMLElement);\n            let id = target.id;\n            this.moveFocus(id);\n          }, 100);\n        }\n      },\n      {\n        key: [\"alt + s\"],\n        preventDefault: true,\n        label: \"Entries\",\n        description: \"Toggle Suffix/Prefix\",\n        allowIn: [AllowIn.ContentEditable, AllowIn.Input, AllowIn.Select, AllowIn.Textarea],\n        command: (output: ShortcutEventOutput) => {\n          if (this.selectOpenCategory < 0) {\n            return;\n          }\n          if (this.selectedEntry < 0) {\n            return;\n          }\n          let entryform = this.categories[this.selectOpenCategory].entries[this.selectedEntry] as EntryForm;\n          this.activateSufix(entryform, this.selectOpenCategory, this.selectedEntry);\n        }\n      },\n    );\n    //this.keyboard.select(\"ctrl + alt + u\").subscribe(e => console.log(e));\n  }\n}\n","<div class=\"dictionaryList\" *ngIf=\"dictionaries.length > 0\">\n    <ul>\n        <li class=\"dictionary-selector\" *ngIf=\"dictionaries.length > 0\">\n            <input type=\"button\" class=\"button is-small is-info\" value=\"Refresh Translation\" (click)=\"refreshTranslation()\" />\n            <input type=\"button\" class=\"button is-small is-warning\" value=\"Refresh to Original\" (click)=\"refreshOriginal()\" />\n            <select class='select' [(ngModel)]=\"dictionarySelector\" (change)=\"dictionarySelected($event.target.value)\">\n                <option value='' selected='selected'>Choose a language</option>\n                <option *ngFor=\"let option of dictionaries\" value=\"{{option.id}}\">{{ option.language }}</option>\n            </select>\n        </li>\n    </ul>\n    <ul>\n        <li class=\"dictionary-buttons\">\n            <input type=\"button\" (click)=\"saveModifications()\" value='Save Modifications' class=\"button is-small is-danger\" [disabled]=\"saving\"  />\n            <input type=\"button\" (click)=\"openOutside(true)\" value='Google Translate' class=\"button is-small is-info\" />\n            <input type=\"button\" (click)=\"openOutside(false)\" value='Open Keyword Translated Raw' class=\"button is-small is-warning\" />\n        </li>\n    </ul>\n    <div class=\"interactiveBox\">\n        <ul class='categories'>\n            <ng-container *ngFor=\"let category of categories; let i = index\">\n                <li>\n                    <h1 (click)=\"selectOpenCategory = i\"  [ngClass]=\"{'changed': category.update == true, 'new': category.id == null, 'category-selected': (selectOpenCategory == i) }\">\n                        <input class=\"category-name\" type=\"text\" [(ngModel)]=\"category.name\"\n                                placeholder=\"Category Name\" (ngModelChange)=\"changeCategory(category,i)\"\n                                id=\"category-{{i}}\"/>\n                    </h1>\n                </li>\n            </ng-container>\n            <li>\n                <h1 class=\"categoryButtonRow\">\n                    <input type=\"button\" (click)=\"addCategory()\" value='+ Add new Category' class=\"button is-small is-primary\" />\n                </h1>\n            </li>\n        </ul>\n        <div class=\"entries\">\n            <ul class=\"entries-container\">\n                <li [ngClass]=\"{'hidden': (selectOpenCategory >= 0)}\">\n                    <p class=\"hint\">\n                        &LT;- Select a category\n                    </p>\n                </li>\n                <ng-container *ngFor=\"let category of categories; let i = index\">\n                    <li [ngClass]=\"{'hidden': (selectOpenCategory != i)}\">\n                        <div class=\"category-entry-container\" #categoryDOM id=\"categoryDOM-{{i}}\">\n                            <div *ngFor=\"let entry of category.entries; let j = index\" class=\"entry\"\n                                [ngClass]=\"{'changed': entry.update == true, 'deleted': entry.delete == true, 'new': entry.id == null }\">\n\n                                <input class=\"entry-original\" type=\"text\" [(ngModel)]=\"entry.entryOriginal\" (focus)=\"selectedEntry = j\"\n                                        placeholder=\"Original\" (ngModelChange)=\"changeEntry(entry, i, j)\" #entry id=\"entry-{{i}}-{{j}}\" />\n\n                                <label class=\"sufixButton sidebarButton\">\n                                    <i [ngClass]=\"{'fas': entry.sufix || entry.prefix, 'fa-angle-right': entry.sufix, 'fa-angle-left': entry.prefix, 'far fa-times-circle': !entry.sufix && !entry.prefix }\"></i> \n                                    <input type=\"checkbox\" class=\"hidden\" [(ngModel)]=\"entry.sefixButton\" title=\"Toggle suffix/prefix on/off\" (change)=\"activateSufix(entry, i, j)\" />\n                                </label>\n                                \n                                <select *ngIf=\"entry.sufix\" class='select' [(ngModel)]=\"entry.sufix\" (change)=\"changeEntry(entry, i, j)\" id=\"entry-{{i}}-{{j}}-sufix\">\n                                    <option disabled=\"disabled\">Select a Category for the suffix</option>\n                                    <option *ngFor=\"let option of categories\" value=\"{{option.id}}\">{{ option.name }}</option>\n                                </select>\n\n                                <input [ngClass]=\"{'entry-translation-half': entry.sufix || entry.prefix, 'entry-translation': !entry.sufix && !entry.prefix }\"\n                                        type=\"text\" [(ngModel)]=\"entry.entryTranslation\" (focus)=\"selectedEntry = j\"\n                                        placeholder=\"Translation\" (ngModelChange)=\"changeEntry(entry, i, j)\" id=\"entry-{{i}}-{{j}}-trans\"/>\n\n                                <select *ngIf=\"entry.prefix\" class='select' [(ngModel)]=\"entry.prefix\" (change)=\"changeEntry(entry, i, j)\" id=\"entry-{{i}}-{{j}}-prefix\">\n                                    <option disabled=\"disabled\">Select a Category for the Prefix</option>\n                                    <option *ngFor=\"let option of categories\" value=\"{{option.id}}\">{{ option.name }}</option>\n                                </select>\n\n                                <input class=\"entry-description\" type=\"text\" [(ngModel)]=\"entry.description\" (focus)=\"selectedEntry = j\"\n                                        placeholder=\"Description\" (ngModelChange)=\"changeEntry(entry, i, j)\" id=\"entry-{{i}}-{{j}}-desc\" />\n\n                                <label class=\"deleteButton sidebarButton\">\n                                    <i class=\"fas fa-trash\"></i> \n                                    <input type=\"checkbox\" class=\"hidden\" [(ngModel)]=\"entry.delete\" title=\"Delete\" (change)=\"changeEntry(entry, i, j)\" />\n                                </label>\n                                <label class=\"resetButton sidebarButton\">\n                                    <i class=\"fas fa-sync-alt\"></i>\n                                    <input type=\"checkbox\" class=\"hidden\" [(ngModel)]=\"entry.reset\" title=\"Reset\" (change)=\"changeEntry(entry, i, j)\" />\n                                </label>\n                                <!--input  type=\"hidden\" [(ngModel)]=\"entry.update\" /-->\n                                <input type=\"hidden\" [(ngModel)]=\"entry.idCategory\" />\n                            </div>\n                            <div class=\"entry-spacer\"></div>\n                        </div>\n                        <input type=\"button\" (click)=\"addEntry(category, category.id, i)\" value='+ Add new Entry' class=\"addNewEntryButton\" />\n                    </li>\n                </ng-container>\n            </ul>\n        </div>\n    </div>\n    <ul>\n        <li class=\"dictionary-buttons\">\n            <input type=\"button\" (click)=\"saveModifications()\" value='Save Modifications'  class=\"button is-small is-danger\" [disabled]=\"saving\"  />\n            <input type=\"button\" (click)=\"openOutside(true)\" value='Google Translate' class=\"button is-small is-info\" />\n            <input type=\"button\" (click)=\"openOutside(false)\" value='Open Keyword Translated Raw'  class=\"button is-small is-warning\" />\n        </li>\n    </ul>\n</div>\n\n<ng-keyboard-shortcuts [shortcuts]=\"shortcuts\"></ng-keyboard-shortcuts>\n<ng-keyboard-shortcuts-help [key]=\"'f1'\" [title]=\"'Shortcut Keys'\"></ng-keyboard-shortcuts-help>"],"names":["RouterModule","ListComponent","DetailComponent","routes","path","component","data","title","loadChildren","then","m","DictionaryModule","breadcrumb","redirectTo","ChapterRoutingModule","forChild","imports","exports","CommonModule","SafeHtmlPipe","SidebarComponent","FormsModule","KeyboardShortcutsModule","ChapterModule","forRoot","declarations","i1","i2","i3","KeyboardShortcutsComponent","i0","ctx_r9","ctx_r11","constructor","sanitized","transform","value","bypassSecurityTrustHtml","pure","router","route","api","viewport","next","document","getElementById","scrollTop","navigate","idNovel","chapterNext","no","previous","chapterPrevious","showSidebar","ngOnInit","loadedChapter","Promise","resolve","loadedChapterResolve","startContent","ngAfterViewInit","shortcuts","push","key","preventDefault","label","description","command","output","chapterRoute","ngOnDestroy","console","log","ngDoCheck","noChapter","snapshot","params","Sidebar","categories","translateText","all","Novel","get","id","Chapter","text","values","novel","chapter","renderDataView","cacheAdjecentChapters","prev","numberChapters","Next","renderedTitle","renderedText","textRevision","textOriginal","_","length","entries","forEach","category","i","entry","j","entryOriginal","regex","RegExp","simplified","replace","entryTranslation","sufix","prefix","idCategory","name","index","regexEnd","regexStart","e","info","error","setTimeout","els","Array","from","getElementsByClassName","element","addEventListener","event","idxs","target","split","textPointer","toogleSidebar","selectors","viewQuery","ctx","DictionaryCategory","EntryForm","FormService","rebuildCache","resolveDic","Category","getAll","idDictionary","Object","LoadedPromise","categoryIndex","resolveCat","rejectCat","Entry","resolveEnt","rejectEnt","categoriesOriginalValues","JSON","parse","stringify","addEntry","category_id","category_index","DOMLi","DOMInput","DOMcategories","DOMcategory","toArray","nativeElement","children","focus","addCategory","changeEntry","catIdx","entIdx","reset","delete","splice","update","changeCategory","idx","factory","providedIn","environment","ctx_r6","ctx_r15","Dictionary","dictionaries","chapters","openGT","dictionary","url","backendServer","window","open","updateChapters","autoUpdate","res","err","decls","vars","consts","template","EventEmitter","AllowIn","ctx_r8","ctx_r10","ctx_r16","ctx_r31","ctx_r41","ctx_r49","ctx_r52","ctx_r56","ctx_r60","ctx_r63","ctx_r66","entry_r21","ctx_r70","ctx_r72","ctx_r74","ctx_r75","ctx_r76","ctx_r77","ctx_r78","ctx_r79","inputId","explode","el","scrollIntoView","behavior","block","inline","selectOpenCategory","categoryLength","selectedEntry","entryLength","moveFocus","entryType","dictionarySelector","dictionarySelected","getCache","status","PrepareCacheThenTranslate","refreshTranslation","loadedDictionary","rejectDic","Sidebar2Chapter","emit","refreshOriginal","saveModifications","saving","fullSave","catch","openOutside","translate","moveCurrentEntry","activateSufix","allowIn","ContentEditable","Input","Select","Textarea","moveCurrentCategory","getSelectedEntryType","indexOf","entryform"],"sourceRoot":"webpack:///"}